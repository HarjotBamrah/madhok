var WF=Object.defineProperty,zF=Object.defineProperties,KF=Object.getOwnPropertyDescriptors,UP=Object.getOwnPropertySymbols,ZF=Object.prototype.hasOwnProperty,YF=Object.prototype.propertyIsEnumerable,BP=(We,ye,k)=>ye in We?WF(We,ye,{enumerable:!0,configurable:!0,writable:!0,value:k}):We[ye]=k,jP=(We,ye)=>{for(var k in ye||(ye={}))ZF.call(ye,k)&&BP(We,k,ye[k]);if(UP)for(var k of UP(ye))YF.call(ye,k)&&BP(We,k,ye[k]);return We},$P=(We,ye)=>zF(We,KF(ye));(self.webpackChunkmadhok_backend_app=self.webpackChunkmadhok_backend_app||[]).push([[179],{8255:We=>{function ye(k){return Promise.resolve().then(()=>{var g=new Error("Cannot find module '"+k+"'");throw g.code="MODULE_NOT_FOUND",g})}ye.keys=()=>[],ye.resolve=ye,ye.id=8255,We.exports=ye},3018:(We,ye,k)=>{"use strict";k.d(ye,{deG:()=>vt,tb:()=>AD,AFp:()=>vl,ip1:()=>G_,CZH:()=>ep,hGG:()=>HN,z2F:()=>fm,sBO:()=>k0,Sil:()=>Lt,_Vd:()=>Vf,EJc:()=>xD,SBq:()=>ta,qLn:()=>Pa,vpe:()=>za,gxx:()=>Ha,tBr:()=>Cc,XFs:()=>Je,OlP:()=>dn,zs3:()=>Sn,ZZ4:()=>D_,aQg:()=>Uf,soG:()=>xi,YKP:()=>Bu,v3s:()=>MN,h0i:()=>ra,PXZ:()=>lm,R0b:()=>Ps,FiY:()=>Js,Lbi:()=>q_,g9A:()=>tp,Qsj:()=>HS,FYo:()=>E_,JOm:()=>io,Tiy:()=>bC,q3G:()=>on,tp0:()=>Xs,EAV:()=>YD,Rgc:()=>Uu,dDg:()=>VD,DyG:()=>bc,q4F:()=>Lu,GfV:()=>na,s_b:()=>x_,ifc:()=>It,eFA:()=>dm,G48:()=>HD,Gpc:()=>ge,X6Q:()=>z_,_c5:()=>UN,VLi:()=>jD,c2e:()=>SD,zSh:()=>ag,wAp:()=>ht,vHH:()=>De,EiD:()=>Mc,mCW:()=>Uo,qzn:()=>Di,JVY:()=>Qh,pB0:()=>jr,eBb:()=>Jl,L6k:()=>Ym,LAX:()=>Qm,cg1:()=>t0,Tjo:()=>rT,kL8:()=>n0,yhl:()=>Mp,dqk:()=>H,sIi:()=>Tf,CqO:()=>Pw,QGY:()=>$y,F4k:()=>Hy,RDi:()=>Li,AaK:()=>Y,z3N:()=>Vo,qOj:()=>gw,TTD:()=>Fi,_Bn:()=>x0,xp6:()=>Lc,uIk:()=>_w,ekj:()=>Qy,Suo:()=>uD,Xpm:()=>tu,lG2:()=>fp,Yz7:()=>gt,cJS:()=>qi,oAB:()=>gi,Yjl:()=>nu,Y36:()=>Nf,_UZ:()=>wg,qZA:()=>Ld,TgZ:()=>vg,EpF:()=>Ow,n5z:()=>mc,Ikx:()=>Ng,LFG:()=>Zn,$8M:()=>Bl,NdJ:()=>Gy,CRH:()=>cD,oxw:()=>qy,Q6J:()=>Nw,WLB:()=>Xg,iGM:()=>aD,CHM:()=>du,LSH:()=>to,kYT:()=>as,YNc:()=>Py,_uU:()=>t_,Oqu:()=>$w});var g=k(9765),ee=k(5319),F=k(7574),ce=k(6682),se=k(2441);var le=k(1307);function ne(){return new g.xQ}function V(i){for(let s in i)if(i[s]===V)return s;throw Error("Could not find renamed property on target object.")}function J(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function Y(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Y).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function de(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const be=V({__forward_ref__:V});function ge(i){return i.__forward_ref__=ge,i.toString=function(){return Y(this())},i}function fe(i){return Ae(i)?i():i}function Ae(i){return"function"==typeof i&&i.hasOwnProperty(be)&&i.__forward_ref__===ge}class De extends Error{constructor(s,o){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,o)),this.code=s}}function Le(i){return"string"==typeof i?i:null==i?"":String(i)}function Ot(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Le(i)}function Ve(i,s){const o=s?` in ${s}`:"";throw new De("201",`No provider for ${Ot(i)} found${o}`)}function pn(i,s){null==i&&function(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function gt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function qi(i){return{providers:i.providers||[],imports:i.imports||[]}}function qn(i){return Mr(i,un)||Mr(i,wo)}function Mr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ln(i){return i&&(i.hasOwnProperty(cn)||i.hasOwnProperty(Pi))?i[cn]:null}const un=V({\u0275prov:V}),cn=V({\u0275inj:V}),wo=V({ngInjectableDef:V}),Pi=V({ngInjectorDef:V});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Or;function pi(i){const s=Or;return Or=i,s}function gn(i,s,o){const u=qn(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Je.Optional?null:void 0!==s?s:void Ve(Y(i),"Injector")}function rt(i){return{toString:i}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),It=(()=>((It=It||{})[It.Emulated=0]="Emulated",It[It.None=2]="None",It[It.ShadowDom=3]="ShadowDom",It))();const qt="undefined"!=typeof globalThis&&globalThis,Us="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,H=qt||"undefined"!=typeof global&&global||Us||q,X={},me=[],ze=V({\u0275cmp:V}),ft=V({\u0275dir:V}),Ct=V({\u0275pipe:V}),nn=V({\u0275mod:V}),St=V({\u0275loc:V}),Tn=V({\u0275fac:V}),_r=V({__NG_ELEMENT_ID__:V});let fh=0;function tu(i){return rt(()=>{const o={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||me,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||It.Emulated,id:"c",styles:i.styles||me,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,d=i.features,m=i.pipes;return u.id+=fh++,u.inputs=fa(i.inputs,o),u.outputs=fa(i.outputs),d&&d.forEach(v=>v(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(da):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(ha):null,u})}function da(i){return Mn(i)||function(i){return i[ft]||null}(i)}function ha(i){return function(i){return i[Ct]||null}(i)}const Qu={};function gi(i){return rt(()=>{const s={type:i.type,bootstrap:i.bootstrap||me,declarations:i.declarations||me,imports:i.imports||me,exports:i.exports||me,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Qu[i.id]=i.type),s})}function as(i,s){return rt(()=>{const o=Wn(i,!0);o.declarations=s.declarations||me,o.imports=s.imports||me,o.exports=s.exports||me})}function fa(i,s){if(null==i)return X;const o={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),o[l]=u,s&&(s[l]=d)}return o}const fp=tu;function nu(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Mn(i){return i[ze]||null}function Wn(i,s){const o=i[nn]||null;if(!o&&!0===s)throw new Error(`Type ${Y(i)} does not have '\u0275mod' property.`);return o}function Ki(i){return Array.isArray(i)&&"object"==typeof i[1]}function An(i){return Array.isArray(i)&&!0===i[1]}function Xu(i){return 0!=(8&i.flags)}function ec(i){return 2==(2&i.flags)}function us(i){return 1==(1&i.flags)}function yi(i){return null!==i.template}function Sl(i){return 0!=(512&i[2])}function Fr(i,s){return i.hasOwnProperty(Tn)?i[Tn]:null}class Zi{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Fi(){return au}function au(i){return i.type.prototype.ngOnChanges&&(i.setInput=yp),Ch}function Ch(){const i=uu(this),s=null==i?void 0:i.current;if(s){const o=i.previous;if(o===X)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function yp(i,s,o,u){const l=uu(i)||function(i,s){return i[Rl]=s}(i,{previous:X,current:null}),d=l.current||(l.current={}),m=l.previous,v=this.declaredInputs[o],b=m[v];d[v]=new Zi(b&&b.currentValue,s,m===X),i[u]=s}Fi.ngInherit=!0;const Rl="__ngSimpleChanges__";function uu(i){return i[Rl]||null}let _a;function Li(i){_a=i}function Zt(i){return!!i.listen}const cs={createRenderer:(i,s)=>void 0!==_a?_a:"undefined"!=typeof document?document:void 0};function Pt(i){for(;Array.isArray(i);)i=i[0];return i}function ls(i,s){return Pt(s[i])}function ii(i,s){return Pt(s[i.index])}function ds(i,s){return i.data[s]}function er(i,s){const o=s[i];return Ki(o)?o:o[0]}function br(i){return 4==(4&i[2])}function cu(i){return 128==(128&i[2])}function Qi(i,s){return null==s?null:i[s]}function Do(i){i[18]=0}function lu(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const dt={lFrame:Ca(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function va(){return dt.bindingsEnabled}function Ee(){return dt.lFrame.lView}function Bt(){return dt.lFrame.tView}function du(i){return dt.lFrame.contextLView=i,i[8]}function _n(){let i=sc();for(;null!==i&&64===i.type;)i=i.parent;return i}function sc(){return dt.lFrame.currentTNode}function _i(i,s){const o=dt.lFrame;o.currentTNode=i,o.isParent=s}function wa(){return dt.lFrame.isParent}function ba(){return dt.isInCheckNoChangesMode}function Ji(i){dt.isInCheckNoChangesMode=i}function qs(){return dt.lFrame.bindingIndex++}function kl(i,s){const o=dt.lFrame;o.bindingIndex=o.bindingRootIndex=i,hu(s)}function hu(i){dt.lFrame.currentDirectiveIndex=i}function Nh(){return dt.lFrame.currentQueryIndex}function uc(i){dt.lFrame.currentQueryIndex=i}function vp(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function cc(i,s,o){if(o&Je.SkipSelf){let l=s,d=i;for(;!(l=l.parent,null!==l||o&Je.Host||(l=vp(d),null===l||(d=d[15],10&l.type))););if(null===l)return!1;s=l,i=d}const u=dt.lFrame=Rh();return u.currentTNode=s,u.lView=i,!0}function No(i){const s=Rh(),o=i[1];dt.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Rh(){const i=dt.lFrame,s=null===i?null:i.child;return null===s?Ca(i):s}function Ca(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Fl(){const i=dt.lFrame;return dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Um=Fl;function lc(){const i=Fl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Vr(){return dt.lFrame.selectedIndex}function si(i){dt.lFrame.selectedIndex=i}function bn(){const i=dt.lFrame;return ds(i.tView,i.selectedIndex)}function Da(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=i.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:b,ngAfterViewChecked:C,ngOnDestroy:S}=d;m&&(i.contentHooks||(i.contentHooks=[])).push(-o,m),v&&((i.contentHooks||(i.contentHooks=[])).push(o,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,v)),b&&(i.viewHooks||(i.viewHooks=[])).push(-o,b),C&&((i.viewHooks||(i.viewHooks=[])).push(o,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,C)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(o,S)}}function dc(i,s,o){hc(i,s,3,o)}function Ll(i,s,o,u){(3&i[2])===o&&hc(i,s,o,u)}function gu(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function hc(i,s,o,u){const d=null!=u?u:-1,m=s.length-1;let v=0;for(let b=void 0!==u?65535&i[18]:0;b<m;b++)if("number"==typeof s[b+1]){if(v=s[b],null!=u&&v>=u)break}else s[b]<0&&(i[18]+=65536),(v<d||-1==d)&&(Vl(i,o,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Vl(i,s,o,u){const l=o[u]<0,d=o[u+1],v=i[l?-o[u]:o[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{d.call(v)}finally{}}}else try{d.call(v)}finally{}}class Ta{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function mu(i,s,o){const u=Zt(i);let l=0;for(;l<o.length;){const d=o[l];if("number"==typeof d){if(0!==d)break;l++;const m=o[l++],v=o[l++],b=o[l++];u?i.setAttribute(s,v,b,m):s.setAttributeNS(m,v,b)}else{const m=d,v=o[++l];Cp(m)?u&&i.setProperty(s,m,v):u?i.setAttribute(s,m,v):s.setAttribute(m,v),l++}}return l}function fc(i){return 3===i||4===i||6===i}function Cp(i){return 64===i.charCodeAt(0)}function pc(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||Dp(i,o,l,null,-1===o||2===o?s[++u]:null)}}return i}function Dp(i,s,o,u,l){let d=0,m=i.length;if(-1===s)m=-1;else for(;d<i.length;){const v=i[d++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=d-1;break}}}for(;d<i.length;){const v=i[d];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(i[d+1]=l));if(u===i[d+1])return void(i[d+2]=l)}d++,null!==u&&d++,null!==l&&d++}-1!==m&&(i.splice(m,0,s),d=m+1),i.splice(d++,0,o),null!==u&&i.splice(d++,0,u),null!==l&&i.splice(d++,0,l)}function Aa(i){return-1!==i}function Ui(i){return 32767&i}function yu(i,s){let o=function(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let Fh=!0;function _u(i){const s=Fh;return Fh=i,s}let ps=0;function en(i,s){const o=On(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,ot(u.data,i),ot(s,null),ot(u.blueprint,null));const l=Ws(i,s),d=i.injectorIndex;if(Aa(l)){const m=Ui(l),v=yu(l,s),b=v[1].data;for(let C=0;C<8;C++)s[d+C]=v[m+C]|b[m+C]}return s[d+8]=l,d}function ot(i,s){i.push(0,0,0,0,0,0,0,0,s)}function On(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ws(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){const d=l[1],m=d.type;if(u=2===m?d.declTNode:1===m?l[6]:null,null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Mo(i,s,o){!function(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(_r)&&(u=o[_r]),null==u&&(u=o[_r]=ps++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,o)}function Tp(i,s,o){if(o&Je.Optional)return i;Ve(s,"NodeInjector")}function vi(i,s,o,u){if(o&Je.Optional&&void 0===u&&(u=null),0==(o&(Je.Self|Je.Host))){const l=i[9],d=pi(void 0);try{return l?l.get(s,u,o&Je.Optional):gn(s,u,o&Je.Optional)}finally{pi(d)}}return Tp(u,s,o)}function wi(i,s,o,u=Je.Default,l){if(null!==i){const d=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(_r)?i[_r]:void 0;return"number"==typeof s?s>=0?255&s:Oo:s}(o);if("function"==typeof d){if(!cc(s,i,u))return u&Je.Host?Tp(l,o,u):vi(s,o,u,l);try{const m=d(u);if(null!=m||u&Je.Optional)return m;Ve(o)}finally{Um()}}else if("number"==typeof d){let m=null,v=On(i,s),b=-1,C=u&Je.Host?s[16][6]:null;for((-1===v||u&Je.SkipSelf)&&(b=-1===v?Ws(i,s):s[v+8],-1!==b&&Sa(u,!1)?(m=s[1],v=Ui(b),s=yu(b,s)):v=-1);-1!==v;){const S=s[1];if(Lh(d,v,S.data)){const O=Ap(v,s,o,m,u,C);if(O!==gc)return O}b=s[v+8],-1!==b&&Sa(u,s[1].data[v+8]===C)&&Lh(d,v,s)?(m=S,v=Ui(b),s=yu(b,s)):v=-1}}}return vi(s,o,u,l)}const gc={};function Oo(){return new xa(_n(),Ee())}function Ap(i,s,o,u,l,d){const m=s[1],v=m.data[i+8],S=Qe(v,m,o,null==u?ec(v)&&Fh:u!=m&&0!=(3&v.type),l&Je.Host&&d===v);return null!==S?gs(s,m,S,v):gc}function Qe(i,s,o,u,l){const d=i.providerIndexes,m=s.data,v=1048575&d,b=i.directiveStart,S=d>>20,P=l?v+S:i.directiveEnd;for(let B=u?v:v+S;B<P;B++){const W=m[B];if(B<b&&o===W||B>=b&&W.type===o)return B}if(l){const B=m[b];if(B&&yi(B)&&B.type===o)return b}return null}function gs(i,s,o,u){let l=i[o];const d=s.data;if(function(i){return i instanceof Ta}(l)){const m=l;m.resolving&&function(i,s){throw new De("200",`Circular dependency in DI detected for ${i}`)}(Ot(d[o]));const v=_u(m.canSeeViewProviders);m.resolving=!0;const b=m.injectImpl?pi(m.injectImpl):null;cc(i,u,Je.Default);try{l=i[o]=m.factory(void 0,d,i,u),s.firstCreatePass&&o>=u.directiveStart&&function(i,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:d}=s.type.prototype;if(u){const m=au(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,l),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,d))}(o,d[o],s)}finally{null!==b&&pi(b),_u(v),m.resolving=!1,Um()}}return l}function Lh(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function Sa(i,s){return!(i&Je.Self||i&Je.Host&&s)}class xa{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return wi(this._tNode,this._lView,s,u,o)}}function mc(i){return rt(()=>{const s=i.prototype.constructor,o=s[Tn]||Bi(s),u=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==u;){const d=l[Tn]||Bi(l);if(d&&d!==o)return d;l=Object.getPrototypeOf(l)}return d=>new d})}function Bi(i){return Ae(i)?()=>{const s=Bi(fe(i));return s&&s()}:Fr(i)}function Bl(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const d=o[l];if(fc(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(d===s)return o[l+1];l+=2}}}return null}(_n(),i)}const Ks="__parameters__";function bi(i,s,o){return rt(()=>{const u=function(i){return function(...o){if(i){const u=i(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...d){if(this instanceof l)return u.apply(this,d),this;const m=new l(...d);return v.annotation=m,v;function v(b,C,S){const O=b.hasOwnProperty(Ks)?b[Ks]:Object.defineProperty(b,Ks,{value:[]})[Ks];for(;O.length<=S;)O.push(null);return(O[S]=O[S]||[]).push(m),b}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class dn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=gt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const vt=new dn("AnalyzeForEntryComponents"),bc=Function;function ai(i,s){void 0===s&&(s=i);for(let o=0;o<i.length;o++){let u=i[o];Array.isArray(u)?(s===i&&(s=i.slice(0,o)),ai(u,s)):s!==i&&s.push(u)}return s}function Ii(i,s){i.forEach(o=>Array.isArray(o)?Ii(o,s):s(o))}function ui(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function Ys(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function I(i,s,o){let u=R(i,s);return u>=0?i[1|u]=o:(u=~u,function(i,s,o,u){let l=i.length;if(l==s)i.push(o,u);else if(1===l)i.push(u,i[0]),i[0]=o;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function A(i,s){const o=R(i,s);if(o>=0)return i[1|o]}function R(i,s){return function(i,s,o){let u=0,l=i.length>>o;for(;l!==u;){const d=u+(l-u>>1),m=i[d<<o];if(s===m)return d<<o;m>s?l=d:u=d+1}return~(l<<o)}(i,s,1)}const Ci={},Na="__NG_DI_FLAG__",es="ngTempTokenPath",ws=/\n/gm,ql="__source",ko=V({provide:String,useValue:V});let Iu;function Qs(i){const s=Iu;return Iu=i,s}function Wl(i,s=Je.Default){if(void 0===Iu)throw new Error("inject() must be called from an injection context");return null===Iu?gn(i,void 0,s):Iu.get(i,s&Je.Optional?null:void 0,s)}function Zn(i,s=Je.Default){return(Or||Wl)(fe(i),s)}function bs(i){const s=[];for(let o=0;o<i.length;o++){const u=fe(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let l,d=Je.Default;for(let m=0;m<u.length;m++){const v=u[m],b=Sp(v);"number"==typeof b?-1===b?l=v.token:d|=b:l=v}s.push(Zn(l,d))}else s.push(Zn(u))}return s}function Fo(i,s){return i[Na]=s,i.prototype[Na]=s,i}function Sp(i){return i[Na]}function Ic(i,s,o,u){const l=i[es];throw s[ql]&&l.unshift(s[ql]),i.message=function(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=Y(s);if(Array.isArray(s))l=s.map(Y).join(" -> ");else if("object"==typeof s){let d=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];d.push(m+":"+("string"==typeof v?JSON.stringify(v):Y(v)))}l=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${i.replace(ws,"\n  ")}`}("\n"+i.message,l,o,u),i.ngTokenPath=l,i[es]=null,i}const Cc=Fo(bi("Inject",i=>({token:i})),-1),Js=Fo(bi("Optional"),8),Xs=Fo(bi("SkipSelf"),4);let Ra;function Ac(i){var s;return(null===(s=function(){if(void 0===Ra&&(Ra=null,H.trustedTypes))try{Ra=H.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Ra}())||void 0===s?void 0:s.createHTML(i))||i}class Ma{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Yh extends Ma{getTypeName(){return"HTML"}}class xv extends Ma{getTypeName(){return"Style"}}class Nv extends Ma{getTypeName(){return"Script"}}class Nc extends Ma{getTypeName(){return"URL"}}class Rv extends Ma{getTypeName(){return"ResourceURL"}}function Vo(i){return i instanceof Ma?i.changingThisBreaksApplicationSecurity:i}function Di(i,s){const o=Mp(i);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}function Mp(i){return i instanceof Ma&&i.getTypeName()||null}function Qh(i){return new Yh(i)}function Ym(i){return new xv(i)}function Jl(i){return new Nv(i)}function Qm(i){return new Nc(i)}function jr(i){return new Rv(i)}class Xl{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const o=(new window.DOMParser).parseFromString(Ac(s),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(s):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Jh{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(s){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Ac(s),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Ac(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const o=s.attributes;for(let l=o.length-1;0<l;l--){const m=o.item(l).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const ed=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Uo(i){return(i=String(i)).match(ed)||i.match(Xh)?i:"unsafe:"+i}function ns(i){const s={};for(const o of i.split(","))s[o]=!0;return s}function Bo(...i){const s={};for(const o of i)for(const u in o)o.hasOwnProperty(u)&&(s[u]=!0);return s}const nd=ns("area,br,col,hr,img,wbr"),Du=ns("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ef=ns("rp,rt"),tf=Bo(nd,Bo(Du,ns("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bo(ef,ns("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bo(ef,Du)),eo=ns("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nf=ns("srcset"),Rc=Bo(eo,nf,ns("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ns("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rf=ns("script,style,template");class sf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let o=s.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let l=this.checkClobberedElement(o,o.nextSibling);if(l){o=l;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(s){const o=s.nodeName.toLowerCase();if(!tf.hasOwnProperty(o))return this.sanitizedSomething=!0,!rf.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=s.attributes;for(let l=0;l<u.length;l++){const d=u.item(l),m=d.name,v=m.toLowerCase();if(!Rc.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let b=d.value;eo[v]&&(b=Uo(b)),nf[v]&&(i=b,b=(i=String(i)).split(",").map(s=>Uo(s.trim())).join(", ")),this.buf.push(" ",m,'="',of(b),'"')}var i;return this.buf.push(">"),!0}endElement(s){const o=s.nodeName.toLowerCase();tf.hasOwnProperty(o)&&!nd.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(s){this.buf.push(of(s))}checkClobberedElement(s,o){if(o&&(s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return o}}const rd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jo=/([^\#-~ |!])/g;function of(i){return i.replace(/&/g,"&amp;").replace(rd,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(jo,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let af;function Mc(i,s){let o=null;try{af=af||function(i){const s=new Jh(i);return function(){try{return!!(new window.DOMParser).parseFromString(Ac(""),"text/html")}catch(i){return!1}}()?new Xl(s):s}(i);let u=s?String(s):"";o=af.getInertBodyElement(u);let l=5,d=u;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,u=d,d=o.innerHTML,o=af.getInertBodyElement(u)}while(u!==d);return Ac((new sf).sanitizeChildren(Oa(o)||o))}finally{if(o){const u=Oa(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Oa(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var on=(()=>((on=on||{})[on.NONE=0]="NONE",on[on.HTML=1]="HTML",on[on.STYLE=2]="STYLE",on[on.SCRIPT=3]="SCRIPT",on[on.URL=4]="URL",on[on.RESOURCE_URL=5]="RESOURCE_URL",on))();function to(i){const s=function(){const i=Ee();return i&&i[12]}();return s?s.sanitize(on.URL,i)||"":Di(i,"URL")?Vo(i):Uo(Le(i))}const Up="__ngContext__";function $r(i,s){i[Up]=s}function Bp(i){const s=function(i){return i[Up]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Pc(i){return i.ngOriginalError}function Wp(i,...s){i.error(...s)}class Pa{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s),u=this._findContext(s),l=(i=s)&&i.ngErrorLogger||Wp;var i;l(this._console,"ERROR",s),o&&l(this._console,"ORIGINAL ERROR",o),u&&l(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(Pc(s)):null}_findOriginalError(s){let o=s&&Pc(s);for(;o&&Pc(o);)o=Pc(o);return o||null}}const ay=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(H))();function Is(i){return i instanceof Function?i():i}var io=(()=>((io=io||{})[io.Important=1]="Important",io[io.DashCase=2]="DashCase",io))();function f(i,s){return undefined(i,s)}function T(i){const s=i[3];return An(s)?s[3]:s}function te(i){return Ie(i[13])}function Re(i){return Ie(i[4])}function Ie(i){for(;null!==i&&!An(i);)i=i[4];return i}function Ze(i,s,o,u,l){if(null!=u){let d,m=!1;An(u)?d=u:Ki(u)&&(m=!0,u=u[0]);const v=Pt(u);0===i&&null!==o?null==l?cy(s,o,v):vd(s,o,v,l||null,!0):1===i&&null!==o?vd(s,o,v,l||null,!0):2===i?function(i,s,o){const u=Jp(i,s);u&&function(i,s,o,u){Zt(i)?i.removeChild(s,o,u):s.removeChild(o)}(i,u,s,o)}(s,v,m):3===i&&s.destroyNode(v),null!=d&&function(i,s,o,u,l){const d=o[7];d!==Pt(o)&&Ze(s,i,u,d,l);for(let v=10;v<o.length;v++){const b=o[v];Ed(b[1],b,i,s,u,d)}}(s,i,d,o,l)}}function xu(i,s,o){return Zt(i)?i.createElement(s,o):null===o?i.createElement(s):i.createElementNS(o,s)}function gd(i,s){const o=i[9],u=o.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,lu(l,-1)),o.splice(u,1)}function md(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const l=u[17];null!==l&&l!==i&&gd(l,u),s>0&&(i[o-1][4]=u[4]);const d=Ys(i,10+s);!function(i,s){Ed(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=d[19];null!==m&&m.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function yd(i,s){if(!(256&s[2])){const o=s[11];Zt(o)&&o.destroyNode&&Ed(i,s,o,3,null,null),function(i){let s=i[13];if(!s)return Cr(i[1],i);for(;s;){let o=null;if(Ki(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)Ki(s)&&Cr(s[1],s),s=s[3];null===s&&(s=i),Ki(s)&&Cr(s[1],s),o=s&&s[4]}s=o}}(s)}}function Cr(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof Ta)){const d=o[u+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const v=l[d[m]],b=d[m+1];try{b.call(v)}finally{}}else try{d.call(l)}finally{}}}}(i,s),function(i,s){const o=i.cleanup,u=s[7];let l=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const m=o[d+1],v="function"==typeof m?m(s):Pt(s[m]),b=u[l=o[d+2]],C=o[d+3];"boolean"==typeof C?v.removeEventListener(o[d],b,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),d+=2}else{const m=u[l=o[d+1]];o[d].call(m)}if(null!==u){for(let d=l+1;d<u.length;d++)u[d]();s[7]=null}}(i,s),1===s[1].type&&Zt(s[11])&&s[11].destroy();const o=s[17];if(null!==o&&An(s[3])){o!==s[3]&&gd(o,s);const u=s[19];null!==u&&u.detachView(i)}}}function _d(i,s,o){return function(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===It.None||l===It.Emulated)return null}return ii(u,o)}(i,s.parent,o)}function vd(i,s,o,u,l){Zt(i)?i.insertBefore(s,o,u,l):s.insertBefore(o,u,l)}function cy(i,s,o){Zt(i)?i.appendChild(s,o):s.appendChild(o)}function gE(i,s,o,u,l){null!==u?vd(i,s,o,u,l):cy(i,s,o)}function Jp(i,s){return Zt(i)?i.parentNode(s):s.parentNode}let Vv=function(i,s,o){return 40&i.type?ii(i,o):null};function Go(i,s,o,u){const l=_d(i,u,s),d=s[11],v=function(i,s,o){return Vv(i,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let b=0;b<o.length;b++)gE(d,l,o[b],v,!1);else gE(d,l,o,v,!1)}function pf(i,s){if(null!==s){const o=s.type;if(3&o)return ii(s,i);if(4&o)return ke(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return pf(i,u);{const l=i[s.index];return An(l)?ke(-1,l):Pt(l)}}if(32&o)return f(s,i)()||Pt(i[s.index]);{const u=yE(i,s);return null!==u?Array.isArray(u)?u[0]:pf(T(i[16]),u):pf(i,s.next)}}return null}function yE(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ke(i,s){const o=10+i+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return pf(u,l)}return s[7]}function bd(i,s,o,u,l,d,m){for(;null!=o;){const v=u[o.index],b=o.type;if(m&&0===s&&(v&&$r(Pt(v),u),o.flags|=4),64!=(64&o.flags))if(8&b)bd(i,s,o.child,u,l,d,!1),Ze(s,i,l,v,d);else if(32&b){const C=f(o,u);let S;for(;S=C();)Ze(s,i,l,S,d);Ze(s,i,l,v,d)}else 16&b?Et(i,s,u,o,l,d):Ze(s,i,l,v,d);o=m?o.projectionNext:o.next}}function Ed(i,s,o,u,l,d){bd(o,u,i.firstChild,s,l,d,!1)}function Et(i,s,o,u,l,d){const m=o[16],b=m[6].projection[u.projection];if(Array.isArray(b))for(let C=0;C<b.length;C++)Ze(s,i,l,b[C],d);else bd(i,s,b,m[3],l,d,!0)}function he(i,s,o){Zt(i)?i.setAttribute(s,"style",o):s.style.cssText=o}function Ce(i,s,o){Zt(i)?""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o):s.className=o}function Tr(i,s,o){let u=i.length;for(;;){const l=i.indexOf(s,o);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const d=s.length;if(l+d===u||i.charCodeAt(l+d)<=32)return l}o=l+1}}const _E="ng-template";function dA(i,s,o){let u=0;for(;u<i.length;){let l=i[u++];if(o&&"class"===l){if(l=i[u],-1!==Tr(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function vE(i){return 4===i.type&&i.value!==_E}function hA(i,s,o){return s===(4!==i.type||o?i.value:_E)}function fA(i,s,o){let u=4;const l=i.attrs||[],d=function(i){for(let s=0;s<i.length;s++)if(fc(i[s]))return s;return i.length}(l);let m=!1;for(let v=0;v<s.length;v++){const b=s[v];if("number"!=typeof b){if(!m)if(4&u){if(u=2|1&u,""!==b&&!hA(i,b,o)||""===b&&1===s.length){if(oo(u))return!1;m=!0}}else{const C=8&u?b:s[++v];if(8&u&&null!==i.attrs){if(!dA(i.attrs,C,o)){if(oo(u))return!1;m=!0}continue}const O=pA(8&u?"class":b,l,vE(i),o);if(-1===O){if(oo(u))return!1;m=!0;continue}if(""!==C){let P;P=O>d?"":l[O+1].toLowerCase();const B=8&u?P:null;if(B&&-1!==Tr(B,C,0)||2&u&&C!==P){if(oo(u))return!1;m=!0}}}}else{if(!m&&!oo(u)&&!oo(b))return!1;if(m&&oo(b))continue;m=!1,u=b|1&u}}return oo(u)||m}function oo(i){return 0==(1&i)}function pA(i,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let d=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)d=!0;else{if(1===m||2===m){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=d?1:2}return-1}return function(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function gA(i,s,o=!1){for(let u=0;u<s.length;u++)if(fA(i,s[u],o))return!0;return!1}function Id(i,s){return i?":not("+s.trim()+")":s}function bE(i){let s=i[0],o=1,u=2,l="",d=!1;for(;o<i.length;){let m=i[o];if("string"==typeof m)if(2&u){const v=i[++o];l+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!oo(m)&&(s+=Id(d,l),l=""),u=m,d=d||!oo(u);o++}return""!==l&&(s+=Id(d,l)),s}const At={};function Lc(i){Uv(Bt(),Ee(),Vr()+i,ba())}function Uv(i,s,o,u){if(!u)if(3==(3&s[2])){const d=i.preOrderCheckHooks;null!==d&&dc(s,d,o)}else{const d=i.preOrderHooks;null!==d&&Ll(s,d,0,o)}si(o)}function Vc(i,s){return i<<17|s<<2}function Rt(i){return i>>17&32767}function Uc(i){return 2|i}function Nu(i){return(131068&i)>>2}function ar(i,s){return-131069&i|s<<2}function Fa(i){return 1|i}function ao(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],d=o[u+1];if(-1!==d){const m=i.data[d];uc(l),m.contentQueries(2,s[d],d)}}}function Wc(i,s,o,u,l,d,m,v,b,C){const S=s.blueprint.slice();return S[0]=l,S[2]=140|u,Do(S),S[3]=S[15]=i,S[8]=o,S[10]=m||i&&i[10],S[11]=v||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=C||i&&i[9]||null,S[6]=d,S[16]=2==s.type?i[16]:S,S}function Yn(i,s,o,u,l){let d=i.data[s];if(null===d)d=function(i,s,o,u,l){const d=sc(),m=wa(),b=i.data[s]=function(i,s,o,u,l,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,o,s,u,l);return null===i.firstChild&&(i.firstChild=b),null!==d&&(m?null==d.child&&null!==b.parent&&(d.child=b):null===d.next&&(d.next=b)),b}(i,s,o,u,l),dt.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=l;const m=function(){const i=dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return _i(d,!0),d}function Cd(i,s,o,u){if(0===o)return-1;const l=s.length;for(let d=0;d<o;d++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function Ba(i,s,o){No(s);try{const u=i.viewQuery;null!==u&&Qn(1,u,o);const l=i.template;null!==l&&zc(i,s,l,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ao(i,s),i.staticViewQueries&&Qn(2,i.viewQuery,o);const d=i.components;null!==d&&function(i,s){for(let o=0;o<s.length;o++)Ad(i,s[o])}(s,d)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,lc()}}function mf(i,s,o,u){const l=s[2];if(256==(256&l))return;No(s);const d=ba();try{Do(s),function(i){dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&zc(i,s,o,2,u);const m=3==(3&l);if(!d)if(m){const C=i.preOrderCheckHooks;null!==C&&dc(s,C,null)}else{const C=i.preOrderHooks;null!==C&&Ll(s,C,0,null),gu(s,0)}if(function(i){for(let s=te(i);null!==s;s=Re(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],d=l[3];0==(1024&l[2])&&lu(d,1),l[2]|=1024}}}(s),function(i){for(let s=te(i);null!==s;s=Re(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];cu(u)&&mf(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&ao(i,s),!d)if(m){const C=i.contentCheckHooks;null!==C&&dc(s,C)}else{const C=i.contentHooks;null!==C&&Ll(s,C,1),gu(s,1)}!function(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)si(~l);else{const d=l,m=o[++u],v=o[++u];kl(m,d),v(2,s[d])}}}finally{si(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let o=0;o<s.length;o++)$E(i,s[o])}(s,v);const b=i.viewQuery;if(null!==b&&Qn(2,b,u),!d)if(m){const C=i.viewCheckHooks;null!==C&&dc(s,C)}else{const C=i.viewHooks;null!==C&&Ll(s,C,2),gu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,lu(s[3],-1))}finally{lc()}}function xE(i,s,o,u){const l=s[10],d=!ba(),m=br(s);try{d&&!m&&l.begin&&l.begin(),m&&Ba(i,s,u),mf(i,s,o,u)}finally{d&&!m&&l.end&&l.end()}}function zc(i,s,o,u,l){const d=Vr(),m=2&u;try{si(-1),m&&s.length>20&&Uv(i,s,20,ba()),o(u,l)}finally{si(d)}}function Dd(i,s,o){!va()||(function(i,s,o,u){const l=o.directiveStart,d=o.directiveEnd;i.firstCreatePass||en(o,s),$r(u,s);const m=o.initialInputs;for(let v=l;v<d;v++){const b=i.data[v],C=yi(b);C&&UE(s,o,b);const S=gs(s,i,v,o);$r(S,s),null!==m&&BE(0,v-l,S,b,0,m),C&&(er(o.index,s)[8]=S)}}(i,s,o,ii(o,s)),128==(128&o.flags)&&function(i,s,o){const u=o.directiveStart,l=o.directiveEnd,m=o.index,v=dt.lFrame.currentDirectiveIndex;try{si(m);for(let b=u;b<l;b++){const C=i.data[b],S=s[b];hu(b),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Td(C,S)}}finally{si(-1),hu(v)}}(i,s,o))}function yf(i,s,o=ii){const u=s.localNames;if(null!==u){let l=s.index+1;for(let d=0;d<u.length;d+=2){const m=u[d+1],v=-1===m?o(s,i):i[m];i[l++]=v}}}function rg(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=ig(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function ig(i,s,o,u,l,d,m,v,b,C){const S=20+u,O=S+l,P=function(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:At);return o}(S,O),B="function"==typeof C?C():C;return P[1]={type:i,blueprint:P,template:o,queries:null,viewQuery:v,declTNode:s,data:P.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:b,consts:B,incompleteFirstPass:!1}}function OE(i,s,o,u){const l=GE(s);null===o?l.push(u):(l.push(o),i.firstCreatePass&&Cy(i).push(u,l.length-1))}function kE(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function Ds(i,s,o,u,l,d,m,v){const b=ii(s,o);let S,C=s.inputs;!v&&null!=C&&(S=C[u])?(ew(i,o,S,u,l),ec(s)&&function(i,s){const o=er(s,i);16&o[2]||(o[2]|=64)}(o,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=m?m(l,s.value||"",u):l,Zt(d)?d.setProperty(b,u,l):Cp(u)||(b.setProperty?b.setProperty(u,l):b[u]=l))}function Yc(i,s,o,u){let l=!1;if(va()){const d=function(i,s,o){const u=i.directiveRegistry;let l=null;if(u)for(let d=0;d<u.length;d++){const m=u[d];gA(o,m.selectors,!1)&&(l||(l=[]),Mo(en(o,s),i,m.type),yi(m)?(Yv(i,o),l.unshift(m)):l.push(m))}return l}(i,s,o),m=null===u?null:{"":-1};if(null!==d){l=!0,_y(o,i.data.length,d.length);for(let S=0;S<d.length;S++){const O=d[S];O.providersResolver&&O.providersResolver(O)}let v=!1,b=!1,C=Cd(i,s,d.length,null);for(let S=0;S<d.length;S++){const O=d[S];o.mergedAttrs=pc(o.mergedAttrs,O.hostAttrs),vy(i,o,s,C,O),VE(C,O,m),null!==O.contentQueries&&(o.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(o.flags|=128);const P=O.type.prototype;!v&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),v=!0),!b&&(P.ngOnChanges||P.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),b=!0),C++}!function(i,s){const u=s.directiveEnd,l=i.data,d=s.attrs,m=[];let v=null,b=null;for(let C=s.directiveStart;C<u;C++){const S=l[C],O=S.inputs,P=null===d||vE(s)?null:jE(O,d);m.push(P),v=kE(O,C,v),b=kE(S.outputs,C,b)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=b}(i,o)}m&&function(i,s,o){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const d=o[s[l+1]];if(null==d)throw new De("301",`Export of name '${s[l+1]}' not found!`);u.push(s[l],d)}}}(o,u,m)}return o.mergedAttrs=pc(o.mergedAttrs,o.attrs),l}function LE(i,s,o,u,l,d){const m=d.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const b=~s.index;(function(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(v)!=b&&v.push(b),v.push(u,l,m)}}function Td(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Yv(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function VE(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;yi(s)&&(o[""]=i)}}function _y(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function vy(i,s,o,u,l){i.data[u]=l;const d=l.factory||(l.factory=Fr(l.type)),m=new Ta(d,yi(l),null);i.blueprint[u]=m,o[u]=m,LE(i,s,0,u,Cd(i,o,l.hostVars,At),l)}function UE(i,s,o){const u=ii(s,i),l=rg(o),d=i[10],m=ja(i,Wc(i,l,null,o.onPush?64:16,u,s,d,d.createRenderer(u,o),null,null));i[s.index]=m}function zo(i,s,o,u,l,d){const m=ii(i,s);!function(i,s,o,u,l,d,m){if(null==d)Zt(i)?i.removeAttribute(s,l,o):s.removeAttribute(l);else{const v=null==m?Le(d):m(d,u||"",l);Zt(i)?i.setAttribute(s,l,v,o):o?s.setAttributeNS(o,l,v):s.setAttribute(l,v)}}(s[11],m,d,i.value,o,u,l)}function BE(i,s,o,u,l,d){const m=d[s];if(null!==m){const v=u.setInput;for(let b=0;b<m.length;){const C=m[b++],S=m[b++],O=m[b++];null!==v?u.setInput(o,O,C,S):o[S]=O}}}function jE(i,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function og(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function $E(i,s){const o=er(s,i);if(cu(o)){const u=o[1];80&o[2]?mf(u,o,u.template,o[8]):o[5]>0&&Qc(o)}}function Qc(i){for(let u=te(i);null!==u;u=Re(u))for(let l=10;l<u.length;l++){const d=u[l];if(1024&d[2]){const m=d[1];mf(m,d,m.template,d[8])}else d[5]>0&&Qc(d)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=er(o[u],i);cu(l)&&l[5]>0&&Qc(l)}}function Ad(i,s){const o=er(s,i),u=o[1];(function(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),Ba(u,o,o[8])}function ja(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function wy(i){for(;i;){i[2]|=64;const s=T(i);if(Sl(i)&&!s)return i;i=s}return null}function Ey(i,s,o){const u=s[10];u.begin&&u.begin();try{mf(i,s,i.template,o)}catch(l){throw Xv(s,l),l}finally{u.end&&u.end()}}function wf(i){!function(i){for(let s=0;s<i.components.length;s++){const o=i.components[s],u=Bp(o),l=u[1];xE(l,u,l.template,o)}}(i[8])}function Qn(i,s,o){uc(0),s(i,o)}const Iy=(()=>Promise.resolve(null))();function GE(i){return i[7]||(i[7]=[])}function Cy(i){return i.cleanup||(i.cleanup=[])}function Xv(i,s){const o=i[9],u=o?o.get(Pa,null):null;u&&u.handleError(s)}function ew(i,s,o,u,l){for(let d=0;d<o.length;){const m=o[d++],v=o[d++],b=s[m],C=i.data[m];null!==C.setInput?C.setInput(b,l,u,v):b[v]=l}}function Ts(i,s,o){const u=ls(s,i);!function(i,s,o){Zt(i)?i.setValue(s,o):s.textContent=o}(i[11],u,o)}function $a(i,s,o){let u=o?i.styles:null,l=o?i.classes:null,d=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?d=v:1==d?l=de(l,v):2==d&&(u=de(u,v+": "+s[++m]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=l:i.classesWithoutHost=l}const Ha=new dn("INJECTOR",-1);class Dy{get(s,o=Ci){if(o===Ci){const u=new Error(`NullInjectorError: No provider for ${Y(s)}!`);throw u.name="NullInjectorError",u}return o}}const ag=new dn("Set Injector scope."),kn={},Yt={};let Ty;function tw(){return void 0===Ty&&(Ty=new Dy),Ty}function KE(i,s=null,o=null,u){return new co(i,o,s||tw(),u)}class co{constructor(s,o,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&Ii(o,v=>this.processProvider(v,s,o)),Ii([s],v=>this.processInjectorType(v,[],d)),this.records.set(Ha,bf(void 0,this));const m=this.records.get(ag);this.scope=null!=m?m.value:null,this.source=l||("object"==typeof s?null:Y(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,o=Ci,u=Je.Default){this.assertNotDestroyed();const l=Qs(this),d=pi(void 0);try{if(!(u&Je.SkipSelf)){let v=this.records.get(s);if(void 0===v){const b=("function"==typeof(i=s)||"object"==typeof i&&i instanceof dn)&&qn(s);v=b&&this.injectableDefInScope(b)?bf(nw(s),kn):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&Je.Self?tw():this.parent).get(s,o=u&Je.Optional&&o===Ci?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[es]=m[es]||[]).unshift(Y(s)),l)throw m;return Ic(m,s,"R3InjectorError",this.source)}throw m}finally{pi(d),Qs(l)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(Y(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,o,u){if(!(s=fe(s)))return!1;let l=Ln(s);const d=null==l&&s.ngModule||void 0,m=void 0===d?s:d,v=-1!==u.indexOf(m);if(void 0!==d&&(l=Ln(d)),null==l)return!1;if(null!=l.imports&&!v){let S;u.push(m);try{Ii(l.imports,O=>{this.processInjectorType(O,o,u)&&(void 0===S&&(S=[]),S.push(O))})}finally{}if(void 0!==S)for(let O=0;O<S.length;O++){const{ngModule:P,providers:B}=S[O];Ii(B,W=>this.processProvider(W,P,B||me))}}this.injectorDefTypes.add(m);const b=Fr(m)||(()=>new m);this.records.set(m,bf(b,kn));const C=l.providers;if(null!=C&&!v){const S=s;Ii(C,O=>this.processProvider(O,S,C))}return void 0!==d&&void 0!==s.providers}processProvider(s,o,u){let l=Ga(s=fe(s))?s:fe(s&&s.provide);const d=sn(i=s)?bf(void 0,i.useValue):bf(ZE(i),kn);var i;if(Ga(s)||!0!==s.multi)this.records.get(l);else{let m=this.records.get(l);m||(m=bf(void 0,kn,!0),m.factory=()=>bs(m.multi),this.records.set(l,m)),l=s,m.multi.push(s)}this.records.set(l,d)}hydrate(s,o){return o.value===kn&&(o.value=Yt,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(i=o.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const o=fe(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function nw(i){const s=qn(i),o=null!==s?s.factory:Fr(i);if(null!==o)return o;if(i instanceof dn)throw new Error(`Token ${Y(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?");throw new Error(`Can't resolve all parameters for ${Y(i)}: (${u.join(", ")}).`)}const o=function(i){const s=i&&(i[un]||i[wo]);if(s){const o=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Error("unreachable")}function ZE(i,s,o){let u;if(Ga(i)){const l=fe(i);return Fr(l)||nw(l)}if(sn(i))u=()=>fe(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...bs(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>Zn(fe(i.useExisting));else{const l=fe(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Fr(l)||nw(l);u=()=>new l(...bs(i.deps))}return u}function bf(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function sn(i){return null!==i&&"object"==typeof i&&ko in i}function Ga(i){return"function"==typeof i}const iw=function(i,s,o){return function(i,s=null,o=null,u){const l=KE(i,s,o,u);return l._resolveInjectorDefTypes(),l}({name:o},s,i,o)};let Sn=(()=>{class i{static create(o,u){return Array.isArray(o)?iw(o,u,""):iw(o.providers,o.parent,o.name||"")}}return i.THROW_IF_NOT_FOUND=Ci,i.NULL=new Dy,i.\u0275prov=gt({token:i,providedIn:"any",factory:()=>Zn(Ha)}),i.__NG_ELEMENT_ID__=-1,i})();function BA(i,s){Da(Bp(i)[1],_n())}function gw(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let l;if(yi(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");l=s.\u0275dir}if(l){if(o){u.push(l);const m=i;m.inputs=mw(i.inputs),m.declaredInputs=mw(i.declaredInputs),m.outputs=mw(i.outputs);const v=l.hostBindings;v&&GA(i,v);const b=l.viewQuery,C=l.contentQueries;if(b&&$A(i,b),C&&HA(i,C),J(i.inputs,l.inputs),J(i.declaredInputs,l.declaredInputs),J(i.outputs,l.outputs),yi(l)&&l.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(l.data.animation)}}const d=l.features;if(d)for(let m=0;m<d.length;m++){const v=d[m];v&&v.ngInherit&&v(i),v===gw&&(o=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const l=i[u];l.hostVars=s+=l.hostVars,l.hostAttrs=pc(l.hostAttrs,o=pc(o,l.hostAttrs))}}(u)}function mw(i){return i===X?{}:i===me?[]:i}function $A(i,s){const o=i.viewQuery;i.viewQuery=o?(u,l)=>{s(u,l),o(u,l)}:s}function HA(i,s){const o=i.contentQueries;i.contentQueries=o?(u,l,d)=>{s(u,l,d),o(u,l,d)}:s}function GA(i,s){const o=i.hostBindings;i.hostBindings=o?(u,l)=>{s(u,l),o(u,l)}:s}let My=null;function Df(){if(!My){const i=H.Symbol;if(i&&i.iterator)My=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(My=u)}}}return My}function Tf(i){return!!Oy(i)&&(Array.isArray(i)||!(i instanceof Map)&&Df()in i)}function Oy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function In(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function _w(i,s,o,u){const l=Ee();return In(l,qs(),s)&&(Bt(),zo(bn(),l,i,s,o,u)),_w}function Py(i,s,o,u,l,d,m,v){const b=Ee(),C=Bt(),S=i+20,O=C.firstCreatePass?function(i,s,o,u,l,d,m,v,b){const C=s.consts,S=Yn(s,i,4,m||null,Qi(C,v));Yc(s,o,S,Qi(C,b)),Da(s,S);const O=S.tViews=ig(2,S,u,l,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,S),O.queries=s.queries.embeddedTView(S)),S}(S,C,b,s,o,u,l,d,m):C.data[S];_i(O,!1);const P=b[11].createComment("");Go(C,b,P,O),$r(P,b),ja(b,b[S]=og(P,b,P,O)),us(O)&&Dd(C,b,O),null!=m&&yf(b,O,v)}function Nf(i,s=Je.Default){const o=Ee();return null===o?Zn(i,s):wi(_n(),o,fe(i),s)}function Nw(i,s,o){const u=Ee();return In(u,qs(),s)&&Ds(Bt(),bn(),u,i,s,u[11],o,!1),Nw}function By(i,s,o,u,l){const m=l?"class":"style";ew(i,o,s.inputs[m],m,u)}function vg(i,s,o,u){const l=Ee(),d=Bt(),m=20+i,v=l[11],b=l[m]=xu(v,s,dt.lFrame.currentNamespace),C=d.firstCreatePass?function(i,s,o,u,l,d,m){const v=s.consts,C=Yn(s,i,2,l,Qi(v,d));return Yc(s,o,C,Qi(v,m)),null!==C.attrs&&$a(C,C.attrs,!1),null!==C.mergedAttrs&&$a(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,d,l,0,s,o,u):d.data[m];_i(C,!0);const S=C.mergedAttrs;null!==S&&mu(v,b,S);const O=C.classes;null!==O&&Ce(v,b,O);const P=C.styles;null!==P&&he(v,b,P),64!=(64&C.flags)&&Go(d,l,b,C),0===dt.lFrame.elementDepthCount&&$r(b,l),dt.lFrame.elementDepthCount++,us(C)&&(Dd(d,l,C),function(i,s,o){if(Xu(s)){const l=s.directiveEnd;for(let d=s.directiveStart;d<l;d++){const m=i.data[d];m.contentQueries&&m.contentQueries(1,o[d],d)}}}(d,C,l)),null!==u&&yf(l,C)}function Ld(){let i=_n();wa()?dt.lFrame.isParent=!1:(i=i.parent,_i(i,!1));const s=i;dt.lFrame.elementDepthCount--;const o=Bt();o.firstCreatePass&&(Da(o,i),Xu(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&By(o,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&By(o,s,Ee(),s.stylesWithoutHost,!1)}function wg(i,s,o,u){vg(i,s,o,u),Ld()}function Ow(){return Ee()}function $y(i){return!!i&&"function"==typeof i.then}function Hy(i){return!!i&&"function"==typeof i.subscribe}const Pw=Hy;function Gy(i,s,o,u){const l=Ee(),d=Bt(),m=_n();return function(i,s,o,u,l,d,m,v){const b=us(u),S=i.firstCreatePass&&Cy(i),O=s[8],P=GE(s);let B=!0;if(3&u.type||v){const Z=ii(u,s),Te=v?v(Z):Z,_e=P.length,st=v?_t=>v(Pt(_t[u.index])):u.index;if(Zt(o)){let _t=null;if(!v&&b&&(_t=function(i,s,o,u){const l=i.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const m=l[d];if(m===o&&l[d+1]===u){const v=s[7],b=l[d+2];return v.length>b?v[b]:null}"string"==typeof m&&(d+=2)}return null}(i,s,l,u.index)),null!==_t)(_t.__ngLastListenerFn__||_t).__ngNextListenerFn__=d,_t.__ngLastListenerFn__=d,B=!1;else{d=cl(u,s,O,d,!1);const $t=o.listen(Te,l,d);P.push(d,$t),S&&S.push(l,st,_e,_e+1)}}else d=cl(u,s,O,d,!0),Te.addEventListener(l,d,m),P.push(d),S&&S.push(l,st,_e,m)}else d=cl(u,s,O,d,!1);const W=u.outputs;let ue;if(B&&null!==W&&(ue=W[l])){const Z=ue.length;if(Z)for(let Te=0;Te<Z;Te+=2){const mr=s[ue[Te]][ue[Te+1]].subscribe(d),Fs=P.length;P.push(d,mr),S&&S.push(l,u.index,Fs,-(Fs+1))}}}(d,l,l[11],m,i,s,!!o,u),Gy}function Vd(i,s,o,u){try{return!1!==o(u)}catch(l){return Xv(i,l),!1}}function cl(i,s,o,u,l){return function d(m){if(m===Function)return u;const v=2&i.flags?er(i.index,s):s;0==(32&s[2])&&wy(v);let b=Vd(s,0,u,m),C=d.__ngNextListenerFn__;for(;C;)b=Vd(s,0,C,m)&&b,C=C.__ngNextListenerFn__;return l&&!1===b&&(m.preventDefault(),m.returnValue=!1),b}}function qy(i=1){return function(i){return(dt.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,dt.lFrame.contextLView))[8]}(i)}function NI(i,s,o,u,l){const d=i[o+1],m=null===s;let v=u?Rt(d):Nu(d),b=!1;for(;0!==v&&(!1===b||m);){const S=i[v+1];lS(i[v],s)&&(b=!0,i[v+1]=u?Fa(S):Uc(S)),v=u?Rt(S):Nu(S)}b&&(i[o+1]=u?Uc(d):Fa(d))}function lS(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&R(i,s)>=0}function Qy(i,s){return function(i,s,o,u){const l=Ee(),d=Bt(),m=function(i){const s=dt.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}(2);d.firstUpdatePass&&function(i,s,o,u){const l=i.data;if(null===l[o+1]){const d=l[Vr()],m=function(i,s){return s>=i.expandoStartIndex}(i,o);(function(i,s){return 0!=(i.flags&(s?16:32))})(d,u)&&null===s&&!m&&(s=!1),s=function(i,s,o,u){const l=function(i){const s=dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let d=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=dl(o=Tg(null,i,s,o,u),s.attrs,u),d=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==l)if(o=Tg(l,i,s,o,u),null===d){let b=function(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Nu(u))return i[Rt(u)]}(i,s,u);void 0!==b&&Array.isArray(b)&&(b=Tg(null,i,s,b[1],u),b=dl(b,s.attrs,u),function(i,s,o,u){i[Rt(o?s.classBindings:s.styleBindings)]=u}(i,s,u,b))}else d=function(i,s,o){let u;const l=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<l;d++)u=dl(u,i[d].hostAttrs,o);return dl(u,s.attrs,o)}(i,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(l,d,s,u),function(i,s,o,u,l,d){let m=d?s.classBindings:s.styleBindings,v=Rt(m),b=Nu(m);i[u]=o;let S,C=!1;if(Array.isArray(o)){const O=o;S=O[1],(null===S||R(O,S)>0)&&(C=!0)}else S=o;if(l)if(0!==b){const P=Rt(i[v+1]);i[u+1]=Vc(P,v),0!==P&&(i[P+1]=ar(i[P+1],u)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],u)}else i[u+1]=Vc(v,0),0!==v&&(i[v+1]=ar(i[v+1],u)),v=u;else i[u+1]=Vc(b,0),0===v?v=u:i[b+1]=ar(i[b+1],u),b=u;C&&(i[u+1]=Uc(i[u+1])),NI(i,S,u,!0),NI(i,S,u,!1),function(i,s,o,u,l){const d=l?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof s&&R(d,s)>=0&&(o[u+1]=Fa(o[u+1]))}(s,S,i,u,d),m=Vc(v,b),d?s.classBindings=m:s.styleBindings=m}(l,d,s,o,m,u)}}(d,i,m,u),s!==At&&In(l,m,s)&&function(i,s,o,u,l,d,m,v){if(!(3&s.type))return;const b=i.data,C=b[v+1];ea(function(i){return 1==(1&i)}(C)?e_(b,s,o,l,Nu(C),m):void 0)||(ea(d)||function(i){return 2==(2&i)}(C)&&(d=e_(b,null,o,l,v,m)),function(i,s,o,u,l){const d=Zt(i);if(s)l?d?i.addClass(o,u):o.classList.add(u):d?i.removeClass(o,u):o.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:io.DashCase;if(null==l)d?i.removeStyle(o,u,m):o.style.removeProperty(u);else{const v="string"==typeof l&&l.endsWith("!important");v&&(l=l.slice(0,-10),m|=io.Important),d?i.setStyle(o,u,l,m):o.style.setProperty(u,l,v?"important":"")}}}(u,m,ls(Vr(),o),l,d))}(d,d.data[Vr()],l,l[11],i,l[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Y(Vo(i)))),i}(s,o),u,m)}(i,s,null,!0),Qy}function Tg(i,s,o,u,l){let d=null;const m=o.directiveEnd;let v=o.directiveStylingLast;for(-1===v?v=o.directiveStart:v++;v<m&&(d=s[v],u=dl(u,d.hostAttrs,l),d!==i);)v++;return null!==i&&(o.directiveStylingLast=v),u}function dl(i,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let d=0;d<s.length;d++){const m=s[d];"number"==typeof m?l=m:l===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),I(i,m,!!o||s[++d]))}return void 0===i?null:i}function e_(i,s,o,u,l,d){const m=null===s;let v;for(;l>0;){const b=i[l],C=Array.isArray(b),S=C?b[1]:b,O=null===S;let P=o[l+1];P===At&&(P=O?me:void 0);let B=O?A(P,u):S===u?P:void 0;if(C&&!ea(B)&&(B=A(b,u)),ea(B)&&(v=B,m))return v;const W=i[l+1];l=m?Rt(W):Nu(W)}if(null!==s){let b=d?s.residualClasses:s.residualStyles;null!=b&&(v=A(b,u))}return v}function ea(i){return void 0!==i}function t_(i,s=""){const o=Ee(),u=Bt(),l=i+20,d=u.firstCreatePass?Yn(u,l,1,s,null):u.data[l],m=o[l]=function(i,s){return Zt(i)?i.createText(s):i.createTextNode(s)}(o[11],s);Go(u,o,m,d),_i(d,!1)}function $w(i){return Sg("",i,""),$w}function Sg(i,s,o){const u=Ee(),l=function(i,s,o,u){return In(i,qs(),o)?s+Le(o)+u:At}(u,i,s,o);return l!==At&&Ts(u,Vr(),l),Sg}function Ng(i,s,o){const u=Ee();return In(u,qs(),s)&&Ds(Bt(),bn(),u,i,s,u[11],o,!0),Ng}const Hd=void 0;var e0=["en",[["a","p"],["AM","PM"],Hd],[["AM","PM"],Hd,Hd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hd,"{1} 'at' {0}",Hd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===o?1:5}];let Of={};function t0(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=r0(s);if(o)return o;const u=s.split("-")[0];if(o=r0(u),o)return o;if("en"===u)return e0;throw new Error(`Missing locale data for the locale "${i}".`)}function n0(i){return t0(i)[ht.PluralCase]}function r0(i){return i in Of||(Of[i]=H.ng&&H.ng.common&&H.ng.common.locales&&H.ng.common.locales[i]),Of[i]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const Pf="en-US";let c_=Pf;function l_(i){pn(i,"Expected localeId to be defined"),"string"==typeof i&&(c_=i.toLowerCase().replace(/_/g,"-"))}function Gt(i,s,o,u,l){if(i=fe(i),Array.isArray(i))for(let d=0;d<i.length;d++)Gt(i[d],s,o,u,l);else{const d=Bt(),m=Ee();let v=Ga(i)?i:fe(i.provide),b=ZE(i);const C=_n(),S=1048575&C.providerIndexes,O=C.directiveStart,P=C.providerIndexes>>20;if(Ga(i)||!i.multi){const B=new Ta(b,l,Nf),W=Wd(v,s,l?S:S+P,O);-1===W?(Mo(en(C,m),d,v),b_(d,i,s.length),s.push(v),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(B),m.push(B)):(o[W]=B,m[W]=B)}else{const B=Wd(v,s,S+P,O),W=Wd(v,s,S,S+P),ue=B>=0&&o[B],Z=W>=0&&o[W];if(l&&!Z||!l&&!ue){Mo(en(C,m),d,v);const Te=function(i,s,o,u,l){const d=new Ta(i,o,Nf);return d.multi=[],d.index=s,d.componentProviders=0,S0(d,l,u&&!o),d}(l?xn:BS,o.length,l,u,b);!l&&Z&&(o[W].providerFactory=Te),b_(d,i,s.length,0),s.push(v),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(Te),m.push(Te)}else b_(d,i,B>-1?B:W,S0(o[l?W:B],b,!l&&u));!l&&u&&Z&&o[W].componentProviders++}}}function b_(i,s,o,u){const l=Ga(s);if(l||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const v=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const b=v.indexOf(o);-1===b?v.push(o,[u,m]):v[b+1].push(u,m)}else v.push(o,m)}}}function S0(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function Wd(i,s,o,u){for(let l=o;l<u;l++)if(s[l]===i)return l;return-1}function BS(i,s,o,u){return Kr(this.multi,[])}function xn(i,s,o,u){const l=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=gs(o,o[1],this.providerFactory.index,u);d=v.slice(0,m),Kr(l,d);for(let b=m;b<v.length;b++)d.push(v[b])}else d=[],Kr(l,d);return d}function Kr(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function x0(i,s=[]){return o=>{o.providersResolver=(u,l)=>function(i,s,o){const u=Bt();if(u.firstCreatePass){const l=yi(i);Gt(o,u.data,u.blueprint,l,!0),Gt(s,u.data,u.blueprint,l,!1)}}(u,l?l(i):i,s)}}class kg{}const R0="ngComponent";class M0{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${Y(i)}. Did you add it to @NgModule.entryComponents?`);return s[R0]=i,s}(s)}}let Vf=(()=>{class i{}return i.NULL=new M0,i})();function O0(...i){}function Nn(i,s){return new ta(ii(i,s))}const $S=function(){return Nn(_n(),Ee())};let ta=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=$S,i})();function vC(i){return i instanceof ta?i.nativeElement:i}class E_{}let HS=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>GS(),i})();const GS=function(){const i=Ee(),o=er(_n().index,i);return function(i){return i[11]}(Ki(o)?o:i)};let bC=(()=>{class i{}return i.\u0275prov=gt({token:i,providedIn:"root",factory:()=>null}),i})();class na{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Lu=new na("12.2.16");class Fg{constructor(){}supports(s){return Tf(s)}create(s){return new EC(s)}}const qS=(i,s)=>s;class EC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||qS}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,d=null;for(;o||u;){const m=!u||o&&o.currentIndex<fl(u,l,d)?o:u,v=fl(m,l,d),b=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{d||(d=[]);const C=v-l,S=b-l;if(C!=S){for(let P=0;P<C;P++){const B=P<d.length?d[P]:d[P]=0,W=B+P;S<=W&&W<C&&(d[P]=B+1)}d[m.previousIndex]=S-C}}v!==b&&s(m,v,b)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Tf(s))throw new Error(`Error trying to diff '${Y(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,d,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)d=s[v],m=this._trackByFn(v,d),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,d,m,v)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,m,v),u=!0),o=o._next}else l=0,function(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[Df()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{m=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,l)):s=this._addAfter(new IC(o,u),d,l),s}_verifyReinsertion(s,o,u,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,d=s._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new CC),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CC),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class IC{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class I_{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class CC{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new I_,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fl(i,s,o){const u=i.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class Lg{constructor(){}supports(s){return s instanceof Map||Oy(s)}create(){return new Vg}}class Vg{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Oy(s)))throw new Error(`Error trying to diff '${Y(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const d=l._prev,m=l._next;return d&&(d._next=m),m&&(m._prev=d),l._next=null,l._prev=null,l}const u=new DC(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class DC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function C_(){return new D_([new Fg])}let D_=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||C_()),deps:[[i,new Xs,new Js]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(i){return i.name||typeof i}(o)}'`)}}return i.\u0275prov=gt({token:i,providedIn:"root",factory:C_}),i})();function TC(){return new Uf([new Lg])}let Uf=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||TC()),deps:[[i,new Xs,new Js]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return i.\u0275prov=gt({token:i,providedIn:"root",factory:TC}),i})();function Bf(i,s,o,u,l=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(Pt(d)),An(d))for(let v=10;v<d.length;v++){const b=d[v],C=b[1].firstChild;null!==C&&Bf(b[1],b,C,u)}const m=o.type;if(8&m)Bf(i,s,o.child,u);else if(32&m){const v=f(o,s);let b;for(;b=v();)u.push(b)}else if(16&m){const v=yE(s,o);if(Array.isArray(v))u.push(...v);else{const b=T(s[16]);Bf(b[1],b,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class jf{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Bf(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(An(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(md(s,u),Ys(o,u))}this._attachedToViewContainer=!1}yd(this._lView[1],this._lView)}onDestroy(s){OE(this._lView[1],this._lView,null,s)}markForCheck(){wy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ey(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,o){Ji(!0);try{Ey(i,s,o)}finally{Ji(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Ed(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class zd extends jf{constructor(s){super(s),this._view=s}detectChanges(){wf(this._view)}checkNoChanges(){!function(i){Ji(!0);try{wf(i)}finally{Ji(!1)}}(this._view)}get context(){return null}}const P0=function(i){return function(i,s,o){if(ec(i)&&!o){const u=er(i.index,s);return new jf(u,u)}return 47&i.type?new jf(s[16],s):null}(_n(),Ee(),16==(16&i))};let k0=(()=>{class i{}return i.__NG_ELEMENT_ID__=P0,i})();const A_=[new Lg],Ug=new D_([new Fg]),ZS=new Uf(A_),Vu=function(){return Bg(_n(),Ee())};let Uu=(()=>{class i{}return i.__NG_ELEMENT_ID__=Vu,i})();const pl=Uu,YS=class extends pl{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s){const o=this._declarationTContainer.tViews,u=Wc(this._declarationLView,o,s,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),Ba(o,u,s),new jf(u)}};function Bg(i,s){return 4&i.type?new YS(s,i,Nn(i,s)):null}class ra{}class Bu{}const JS=function(){return MC(_n(),Ee())};let x_=(()=>{class i{}return i.__NG_ELEMENT_ID__=JS,i})();const XS=x_,RC=class extends XS{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return Nn(this._hostTNode,this._hostLView)}get injector(){return new xa(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ws(this._hostTNode,this._hostLView);if(Aa(s)){const o=yu(s,this._hostLView),u=Ui(s);return new xa(o[1].data[u+8],o)}return new xa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=F0(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){const l=s.createEmbeddedView(o||{});return this.insert(l,u),l}createComponent(s,o,u,l,d){const m=u||this.parentInjector;if(!d&&null==s.ngModule&&m){const b=m.get(ra,null);b&&(d=b)}const v=s.create(m,l,void 0,d);return this.insert(v.hostView,o),v}insert(s,o){const u=s._lView,l=u[1];if(An(u[3])){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const O=u[3],P=new RC(O,O[6],O[3]);P.detach(P.indexOf(s))}}const d=this._adjustIndex(o),m=this._lContainer;!function(i,s,o,u){const l=10+u,d=o.length;u>0&&(o[l-1][4]=s),u<d-10?(s[4]=o[l],ui(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(l,u,m,d);const v=ke(d,m),b=u[11],C=Jp(b,m[7]);return null!==C&&function(i,s,o,u,l,d){u[0]=l,u[6]=s,Ed(i,u,o,1,l,d)}(l,m[6],b,u,C,v),s.attachToViewContainerRef(),ui(L0(m),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=F0(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=md(this._lContainer,o);u&&(Ys(L0(this._lContainer),o),yd(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=md(this._lContainer,o);return u&&null!=Ys(L0(this._lContainer),o)?new jf(u):null}_adjustIndex(s,o=0){return null==s?this.length+o:s}};function F0(i){return i[8]}function L0(i){return i[8]||(i[8]=[])}function MC(i,s){let o;const u=s[i.index];if(An(u))o=u;else{let l;if(8&i.type)l=Pt(u);else{const d=s[11];l=d.createComment("");const m=ii(i,s);vd(d,Jp(d,m),l,function(i,s){return Zt(i)?i.nextSibling(s):s.nextSibling}(d,m),!1)}s[i.index]=o=og(u,s,l,i),ja(s,o)}return new RC(o,i,s)}const Qg={};class eb extends Vf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=Mn(s);return new Jg(o,this.ngModule)}}function QC(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}const Yr=new dn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ay});class Jg extends kg{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=s.selectors.map(bE).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return QC(this.componentDef.inputs)}get outputs(){return QC(this.componentDef.outputs)}create(s,o,u,l){const d=(l=l||this.ngModule)?function(i,s){return{get:(o,u,l)=>{const d=i.get(o,Qg,l);return d!==Qg||u===Qg?d:s.get(o,u,l)}}}(s,l.injector):s,m=d.get(E_,cs),v=d.get(bC,null),b=m.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function(i,s,o){if(Zt(i))return i.selectRootElement(s,o===It.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(b,u,this.componentDef.encapsulation):xu(m.createRenderer(null,this.componentDef),C,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(C)),O=this.componentDef.onPush?576:528,P=function(i,s){return{components:[],scheduler:i||ay,clean:Iy,playerHandler:s||null,flags:0}}(),B=ig(0,null,null,1,0,null,null,null,null,null),W=Wc(null,B,P,O,null,null,m,b,v,d);let ue,Z;No(W);try{const Te=function(i,s,o,u,l,d){const m=o[1];o[20]=i;const b=Yn(m,20,2,"#host",null),C=b.mergedAttrs=s.hostAttrs;null!==C&&($a(b,C,!0),null!==i&&(mu(l,i,C),null!==b.classes&&Ce(l,i,b.classes),null!==b.styles&&he(l,i,b.styles)));const S=u.createRenderer(i,s),O=Wc(o,rg(s),null,s.onPush?64:16,o[20],b,u,S,d||null,null);return m.firstCreatePass&&(Mo(en(b,o),m,s.type),Yv(m,b),_y(b,o.length,1)),ja(o,O),o[20]=O}(S,this.componentDef,W,m,b);if(S)if(u)mu(b,S,["ng-version",Lu.full]);else{const{attrs:_e,classes:st}=function(i){const s=[],o=[];let u=1,l=2;for(;u<i.length;){let d=i[u];if("string"==typeof d)2===l?""!==d&&s.push(d,i[++u]):8===l&&o.push(d);else{if(!oo(l))break;l=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);_e&&mu(b,S,_e),st&&st.length>0&&Ce(b,S,st.join(" "))}if(Z=ds(B,20),void 0!==o){const _e=Z.projection=[];for(let st=0;st<this.ngContentSelectors.length;st++){const _t=o[st];_e.push(null!=_t?Array.from(_t):null)}}ue=function(i,s,o,u,l){const d=o[1],m=function(i,s,o){const u=_n();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),vy(i,u,s,Cd(i,s,1,null),o));const l=gs(s,i,u.directiveStart,u);$r(l,s);const d=ii(u,s);return d&&$r(d,s),l}(d,o,s);if(u.components.push(m),i[8]=m,l&&l.forEach(b=>b(m,s)),s.contentQueries){const b=_n();s.contentQueries(1,m,b.directiveStart)}const v=_n();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(si(v.index),LE(o[1],v,0,v.directiveStart,v.directiveEnd,s),Td(s,m)),m}(Te,this.componentDef,W,P,[BA]),Ba(B,W,null)}finally{lc()}return new Tx(this.componentType,ue,Nn(Z,W),W,Z)}}class Tx extends class{}{constructor(s,o,u,l,d){super(),this.location=u,this._rootLView=l,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new zd(l),this.componentType=s}get injector(){return new xa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Xd=new Map;class L_ extends ra{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eb(this);const u=Wn(s),l=s[St]||null;l&&l_(l),this._bootstrapComponents=Is(u.bootstrap),this._r3Injector=KE(s,o,[{provide:ra,useValue:this},{provide:Vf,useValue:this.componentFactoryResolver}],Y(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,o=Sn.THROW_IF_NOT_FOUND,u=Je.Default){return s===Sn||s===ra||s===Ha?this:this._r3Injector.get(s,o,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class V_ extends Bu{constructor(s){super(),this.moduleType=s,null!==Wn(s)&&function(i){const s=new Set;!function o(u){const l=Wn(u,!0),d=l.id;null!==d&&(function(i,s,o){if(s&&s!==o)throw new Error(`Duplicate module registered for ${i} - ${Y(s)} vs ${Y(s.name)}`)}(d,Xd.get(d),u),Xd.set(d,u));const m=Is(l.imports);for(const v of m)s.has(v)||(s.add(v),o(v))}(i)}(s)}create(s){return new L_(this.moduleType,s)}}function Xg(i,s,o,u,l){return function(i,s,o,u,l,d,m){const v=s+o;return function(i,s,o,u){const l=In(i,s,o);return In(i,s+1,u)||l}(i,v,l,d)?function(i,s,o){return i[s]=o}(i,v+2,m?u.call(m,l,d):u(l,d)):function(i,s){const o=i[s];return o===At?void 0:o}(i,v+2)}(Ee(),function(){const i=dt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),i,s,o,u,l)}function U_(i){return s=>{setTimeout(i,void 0,s)}}const za=class extends g.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){var l,d,m;let v=s,b=o||(()=>null),C=u;if(s&&"object"==typeof s){const O=s;v=null===(l=O.next)||void 0===l?void 0:l.bind(O),b=null===(d=O.error)||void 0===d?void 0:d.bind(O),C=null===(m=O.complete)||void 0===m?void 0:m.bind(O)}this.__isAsync&&(b=U_(b),v&&(v=U_(v)),C&&(C=U_(C)));const S=super.subscribe({next:v,error:b,complete:C});return s instanceof ee.w&&s.add(S),S}};function lb(){return this._results[Df()]()}class nm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Df(),u=nm.prototype;u[o]||(u[o]=lb)}get changes(){return this._changes||(this._changes=new za)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const l=ai(s);(this._changesDetected=!function(i,s,o){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],d=s[u];if(o&&(l=o(l),d=o(d)),d!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class hb{constructor(s){this.queryList=s,this.matches=null}clone(){return new hb(this.queryList)}setDirty(){this.queryList.setDirty()}}class fb{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,l=[];for(let d=0;d<u;d++){const m=o.getByIndex(d);l.push(this.queries[m.indexInDeclarationView].clone())}return new fb(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==hD(s,o).matches&&this.queries[o].setDirty()}}class rm{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class im{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,l);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new im(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class sm{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new sm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const d=u[l];this.matchTNodeWithReadOption(s,o,pb(o,d)),this.matchTNodeWithReadOption(s,o,Qe(o,s,d,!1,!1))}else u===Uu?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Qe(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===ta||l===x_||l===Uu&&4&o.type)this.addMatch(o.index,-2);else{const d=Qe(o,s,l,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function pb(i,s){const o=i.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function Lx(i,s,o,u){return-1===o?function(i,s){return 11&i.type?Nn(i,s):4&i.type?Bg(i,s):null}(s,i):-2===o?function(i,s,o){return o===ta?Nn(s,i):o===Uu?Bg(s,i):o===x_?MC(s,i):void 0}(i,s,u):gs(i,i[1],o,s)}function om(i,s,o,u){const l=s[19].queries[u];if(null===l.matches){const d=i.data,m=o.matches,v=[];for(let b=0;b<m.length;b+=2){const C=m[b];v.push(C<0?null:Lx(s,d[C],m[b+1],o.metadata.read))}l.matches=v}return l.matches}function gb(i,s,o,u){const l=i.queries.getByIndex(o),d=l.matches;if(null!==d){const m=om(i,s,l,o);for(let v=0;v<d.length;v+=2){const b=d[v];if(b>0)u.push(m[v/2]);else{const C=d[v+1],S=s[-b];for(let O=10;O<S.length;O++){const P=S[O];P[17]===P[3]&&gb(P[1],P,C,u)}if(null!==S[9]){const O=S[9];for(let P=0;P<O.length;P++){const B=O[P];gb(B[1],B,C,u)}}}}}return u}function aD(i){const s=Ee(),o=Bt(),u=Nh();uc(u+1);const l=hD(o,u);if(i.dirty&&br(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const d=l.crossesNgTemplate?gb(o,s,u,[]):om(o,s,l,u);i.reset(d,vC),i.notifyOnChanges()}return!0}return!1}function uD(i,s,o,u){const l=Bt();if(l.firstCreatePass){const d=_n();(function(i,s,o){null===i.queries&&(i.queries=new im),i.queries.track(new sm(s,o))})(l,new rm(s,o,u),d.index),function(i,s){const o=i.contentQueries||(i.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(i.queries.length-1,s)}(l,i),2==(2&o)&&(l.staticContentQueries=!0)}!function(i,s,o){const u=new nm(4==(4&o));OE(i,s,u,u.destroy),null===s[19]&&(s[19]=new fb),s[19].queries.push(new hb(u))}(l,Ee(),o)}function cD(){return i=Ee(),s=Nh(),i[19].queries[s].queryList;var i,s}function hD(i,s){return i.queries.getByIndex(s)}const G_=new dn("Application Initializer");let ep=(()=>{class i{constructor(o){this.appInits=o,this.resolve=O0,this.reject=O0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const d=this.appInits[l]();if($y(d))o.push(d);else if(Pw(d)){const m=new Promise((v,b)=>{d.subscribe({complete:v,error:b})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(Zn(G_,8))},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})();const vl=new dn("AppId"),_N={provide:vl,useFactory:function(){return`${li()}${li()}${li()}`},deps:[]};function li(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tp=new dn("Platform Initializer"),q_=new dn("Platform ID"),AD=new dn("appBootstrapListener");let SD=(()=>{class i{log(o){console.log(o)}warn(o){console.warn(o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})();const xi=new dn("LocaleId"),xD=new dn("DefaultCurrencyCode");class RD{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}const Ab=function(i){return new V_(i)},vN=Ab,MD=function(i){return Promise.resolve(Ab(i))},OD=function(i){const s=Ab(i),u=Is(Wn(i).declarations).reduce((l,d)=>{const m=Mn(d);return m&&l.push(new Jg(m)),l},[]);return new RD(s,u)},bN=OD,PD=function(i){return Promise.resolve(OD(i))};let Lt=(()=>{class i{constructor(){this.compileModuleSync=vN,this.compileModuleAsync=MD,this.compileModuleAndAllComponentsSync=bN,this.compileModuleAndAllComponentsAsync=PD}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})();const kD=(()=>Promise.resolve(0))();function am(i){"undefined"==typeof Zone?kD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ps{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new za(!1),this.onMicrotaskEmpty=new za(!1),this.onStable=new za(!1),this.onError=new za(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let i=H.requestAnimationFrame,s=H.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(H,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,W_(i),i.isCheckStableRunning=!0,po(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),W_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,d,m,v)=>{try{return DN(i),o.invokeTask(l,d,m,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&s(),Qr(i)}},onInvoke:(o,u,l,d,m,v,b)=>{try{return DN(i),o.invoke(l,d,m,v,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),Qr(i)}},onHasTask:(o,u,l,d)=>{o.hasTask(l,d),u===l&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,W_(i),po(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,l,d)=>(o.handleError(l,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ps.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ps.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+l,s,CN,O0,O0);try{return d.runTask(m,o,u)}finally{d.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const CN={};function po(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function W_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function DN(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Qr(i){i._nesting--,po(i)}class Za{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new za,this.onMicrotaskEmpty=new za,this.onStable=new za,this.onError=new za}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}let VD=(()=>{class i{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ps.assertNotInAngularZone(),am(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())am(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,l){return[]}}return i.\u0275fac=function(o){return new(o||i)(Zn(Ps))},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})(),UD=(()=>{class i{constructor(){this._applications=new Map,Sb.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Sb.findTestabilityInTree(this,o,u)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})();class BD{addToWindow(s){}findTestabilityInTree(s,o,u){return null}}function jD(i){Sb=i}let Sb=new BD,xb=!0,$D=!1;function z_(){return $D=!0,xb}function HD(){if($D)throw new Error("Cannot enable prod mode after platform setup.");xb=!1}let ss;const cm=new dn("AllowMultipleToken");class lm{constructor(s,o){this.name=s,this.token=o}}function dm(i,s,o=[]){const u=`Platform: ${s}`,l=new dn(u);return(d=[])=>{let m=hm();if(!m||m.injector.get(cm,!1))if(i)i(o.concat(d).concat({provide:l,useValue:!0}));else{const v=o.concat(d).concat({provide:l,useValue:!0},{provide:ag,useValue:"platform"});!function(i){if(ss&&!ss.destroyed&&!ss.injector.get(cm,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ss=i.get(Rb);const s=i.get(tp,null);s&&s.forEach(o=>o())}(Sn.create({providers:v,name:u}))}return function(i){const s=hm();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(l)}}function hm(){return ss&&!ss.destroyed?ss:null}let Rb=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const v=function(i,s){let o;return o="noop"===i?new Za:("zone.js"===i?void 0:i)||new Ps({enableLongStackTrace:z_(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),b=[{provide:Ps,useValue:v}];return v.run(()=>{const C=Sn.create({providers:b,parent:this.injector,name:o.moduleType.name}),S=o.create(C),O=S.injector.get(Pa,null);if(!O)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const P=v.onError.subscribe({next:B=>{O.handleError(B)}});S.onDestroy(()=>{rp(this._modules,S),P.unsubscribe()})}),function(i,s,o){try{const u=o();return $y(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(O,v,()=>{const P=S.injector.get(ep);return P.runInitializers(),P.donePromise.then(()=>(l_(S.injector.get(xi,Pf)||Pf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const l=zD({},u);return function(i,s,o){const u=new V_(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(o){const u=o.injector.get(fm);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${Y(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(Zn(Sn))},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})();function zD(i,s){return Array.isArray(s)?s.reduce(zD,i):Object.assign(Object.assign({},i),s)}let fm=(()=>{class i{constructor(o,u,l,d,m){this._zone=o,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new F.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Ps.assertNotInAngularZone(),am(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Ps.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),O.unsubscribe()}});this.isStable=(0,ce.T)(v,b.pipe(i=>(0,le.x)()(function(i,s){return function(u){let l;l="function"==typeof i?i:function(){return i};const d=Object.create(u,se.N);return d.source=u,d.subjectFactory=l,d}}(ne)(i))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=o instanceof kg?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(l.componentType);const d=function(i){return i.isBoundToModule}(l)?void 0:this._injector.get(ra),v=l.create(Sn.NULL,[],u||l.selector,d),b=v.location.nativeElement,C=v.injector.get(VD,null),S=C&&v.injector.get(UD);return C&&S&&S.registerApplication(b,C),v.onDestroy(()=>{this.detachView(v.hostView),rp(this.components,v),S&&S.unregisterApplication(b)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;rp(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(AD,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(o){return new(o||i)(Zn(Ps),Zn(Sn),Zn(Pa),Zn(Vf),Zn(ep))},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})();function rp(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}class MN{}class pm{}const ZD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let YD=(()=>{class i{constructor(o,u){this._compiler=o,this._config=u||ZD}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,l]=o.split("#");return void 0===l&&(l="default"),k(8255)(u).then(d=>d[l]).then(d=>QD(d,u,l)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,l]=o.split("#"),d="NgFactory";return void 0===l&&(l="default",d=""),k(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[l+d]).then(m=>QD(m,u,l))}}return i.\u0275fac=function(o){return new(o||i)(Zn(Lt),Zn(pm,8))},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})();function QD(i,s,o){if(!i)throw new Error(`Cannot find '${o}' in '${s}'`);return i}const rT=function(i){return null},UN=dm(null,"core",[{provide:q_,useValue:"unknown"},{provide:Rb,deps:[Sn]},{provide:UD,deps:[]},{provide:SD,deps:[]}]),$N=[{provide:fm,useClass:fm,deps:[Ps,Sn,Pa,Vf,ep]},{provide:Yr,deps:[Ps],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(o){s.push(o)}}},{provide:ep,useClass:ep,deps:[[new Js,G_]]},{provide:Lt,useClass:Lt,deps:[]},_N,{provide:D_,useFactory:function(){return Ug},deps:[]},{provide:Uf,useFactory:function(){return ZS},deps:[]},{provide:xi,useFactory:function(i){return l_(i=i||"undefined"!=typeof $localize&&$localize.locale||Pf),i},deps:[[new Cc(xi),new Js,new Xs]]},{provide:xD,useValue:"USD"}];let HN=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(Zn(fm))},i.\u0275mod=gi({type:i}),i.\u0275inj=qi({providers:$N}),i})()},8939:(We,ye,k)=>{"use strict";k.d(ye,{hO:()=>Y,xv:()=>ne,Dh:()=>le,GT:()=>oe,cc:()=>de,on:()=>L,pX:()=>se});var g=k(3018),ee=k(7841),F=k(9845);We=k.hmd(We);const ce=["ngOnDestroy"],se=(Ae,Ne,De,He={})=>new Proxy(Ae,{get:(at,Le)=>De.runOutsideAngular(()=>{var Ot;if(Ae[Le])return(null===(Ot=null==He?void 0:He.spy)||void 0===Ot?void 0:Ot.get)&&He.spy.get(Le,Ae[Le]),Ae[Le];if(ce.indexOf(Le)>-1)return()=>{};const wt=Ne.toPromise().then(Pe=>{const Oe=Pe&&Pe[Le];return"function"==typeof Oe?Oe.bind(Pe):Oe&&Oe.then?Oe.then(Ve=>De.run(()=>Ve)):De.run(()=>Oe)});return new Proxy(()=>{},{get:(Pe,Oe)=>wt[Oe],apply:(Pe,Oe,Ve)=>wt.then(et=>{var nt;const bt=et&&et(...Ve);return(null===(nt=null==He?void 0:He.spy)||void 0===nt?void 0:nt.apply)&&He.spy.apply(Le,Ve,bt),bt})})})}),oe=(Ae,Ne)=>{Ne.forEach(De=>{Object.getOwnPropertyNames(De.prototype||De).forEach(He=>{Object.defineProperty(Ae.prototype,He,Object.getOwnPropertyDescriptor(De.prototype||De,He))})})};class ve{constructor(Ne){return Ne}}const le=new g.OlP("angularfire2.app.options"),ne=new g.OlP("angularfire2.app.name");function L(Ae,Ne,De){const at="object"==typeof De&&De||{};at.name=at.name||"string"==typeof De&&De||"[DEFAULT]";const Ot=ee.Z.apps.filter(wt=>wt&&wt.name===at.name)[0]||Ne.runOutsideAngular(()=>ee.Z.initializeApp(Ae,at));try{JSON.stringify(Ae)!==JSON.stringify(Ot.options)&&V("error",`${Ot.name} Firebase App already initialized with different options${We.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(wt){}return new ve(Ot)}const V=(Ae,...Ne)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Ne)},J={provide:ve,useFactory:L,deps:[le,g.R0b,[new g.FiY,ne]]};let Y=(()=>{class Ae{constructor(De){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",g.q4F.full,De.toString())}static initializeApp(De,He){return{ngModule:Ae,providers:[{provide:le,useValue:De},{provide:ne,useValue:He}]}}}return Ae.\u0275fac=function(De){return new(De||Ae)(g.LFG(g.Lbi))},Ae.\u0275mod=g.oAB({type:Ae}),Ae.\u0275inj=g.cJS({providers:[J]}),Ae})();function de(Ae,Ne,De,He,at){const[,Le,Ot]=globalThis.\u0275AngularfireInstanceCache.find(wt=>wt[0]===Ae)||[];if(Le)return function(Ae,Ne){try{return Ae.toString()===Ne.toString()}catch(De){return Ae===Ne}}(at,Ot)||(fe("error",`${Ne} was already initialized on the ${De} Firebase App with different settings.${ge?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:at,was:Ot})),Le;{const wt=He();return globalThis.\u0275AngularfireInstanceCache.push([Ae,wt,at]),wt}}const ge=!!We.hot,fe=(Ae,...Ne)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Ne)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},9845:(We,ye,k)=>{"use strict";k.d(ye,{q4:()=>_c,iC:()=>Hl,HU:()=>Ii,vb:()=>Eu,JM:()=>bc});var g=k(3018),ee=k(2329),F=k(8239),ce=k(8026),se=k(3854),oe=k(3910),ve=k(5422),le=k(5384);const ne="@firebase/installations",L="0.5.9",J=`w:${L}`,Y="FIS_v2",Ne=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function He({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function at(I){return{token:I.token,requestStatus:2,expiresIn:et(I.expiresIn),creationTime:Date.now()}}function Le(I,A){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,F.Z)(function*(I,A){const U=(yield A.json()).error;return Ne.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function wt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Pe(I,{refreshToken:A}){const R=wt(I);return R.append("Authorization",function(I){return`${Y} ${I}`}(A)),R}function Oe(I){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,F.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function et(I){return Number(I.replace("s","000"))}function bt(I,A){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:R}){const U=He(I),Q=wt(I),re=A.getImmediate({optional:!0});if(re){const ut=yield re.getHeartbeatsHeader();ut&&Q.append("x-firebase-client",ut)}const Ge={method:"POST",headers:Q,body:JSON.stringify({fid:R,authVersion:Y,appId:I.appId,sdkVersion:J})},lt=yield Oe(()=>fetch(U,Ge));if(lt.ok){const ut=yield lt.json();return{fid:ut.fid||R,registrationStatus:2,refreshToken:ut.refreshToken,authToken:at(ut.authToken)}}throw yield Le("Create Installation",lt)})).apply(this,arguments)}function Dn(I){return new Promise(A=>{setTimeout(A,I)})}const fi=/^[cdef][\w-]{21}$/;function ca(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return fi.test(R)?R:""}catch(I){return""}}function Oi(I){return`${I.appName}!${I.appId}`}const Gi=new Map;function vo(I,A){const R=Oi(I);yr(R,A),function(I,A){const R=(!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=I=>{yr(I.data.key,I.data.fid)}),ti);R&&R.postMessage({key:I,fid:A}),0===Gi.size&&ti&&(ti.close(),ti=null)}(R,A)}function yr(I,A){const R=Gi.get(I);if(R)for(const U of R)U(A)}let ti=null;const Mr="firebase-installations-store";let Se=null;function hr(){return Se||(Se=(0,le.X3)("firebase-installations-database",1,{upgrade:(I,A)=>{switch(A){case 0:I.createObjectStore(Mr)}}})),Se}function Ln(I,A){return un.apply(this,arguments)}function un(){return(un=(0,F.Z)(function*(I,A){const R=Oi(I),Q=(yield hr()).transaction(Mr,"readwrite"),re=Q.objectStore(Mr),Me=yield re.get(R);return yield re.put(A,R),yield Q.done,(!Me||Me.fid!==A.fid)&&vo(I,A.fid),A})).apply(this,arguments)}function cn(I){return wo.apply(this,arguments)}function wo(){return(wo=(0,F.Z)(function*(I){const A=Oi(I),U=(yield hr()).transaction(Mr,"readwrite");yield U.objectStore(Mr).delete(A),yield U.done})).apply(this,arguments)}function Pi(I,A){return Je.apply(this,arguments)}function Je(){return(Je=(0,F.Z)(function*(I,A){const R=Oi(I),Q=(yield hr()).transaction(Mr,"readwrite"),re=Q.objectStore(Mr),Me=yield re.get(R),Ge=A(Me);return void 0===Ge?yield re.delete(R):yield re.put(Ge,R),yield Q.done,Ge&&(!Me||Me.fid!==Ge.fid)&&vo(I,Ge.fid),Ge})).apply(this,arguments)}function Or(I){return ni.apply(this,arguments)}function ni(){return(ni=(0,F.Z)(function*(I){let A;const R=yield Pi(I.appConfig,U=>{const Q=pi(U),re=gn(I,Q);return A=re.registrationPromise,re.installationEntry});return""===R.fid?{installationEntry:yield A}:{installationEntry:R,registrationPromise:A}})).apply(this,arguments)}function pi(I){return It(I||{fid:ca(),registrationStatus:0})}function gn(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Ne.create("app-offline"))};const R={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:R,registrationPromise:function(I,A){return rt.apply(this,arguments)}(I,R)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Vn(I)}:{installationEntry:A}}function rt(){return(rt=(0,F.Z)(function*(I,A){try{const R=yield bt(I,A);return Ln(I.appConfig,R)}catch(R){throw De(R)&&409===R.customData.serverCode?yield cn(I.appConfig):yield Ln(I.appConfig,{fid:A.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Vn(I){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,F.Z)(function*(I){let A=yield ri(I.appConfig);for(;1===A.registrationStatus;)yield Dn(100),A=yield ri(I.appConfig);if(0===A.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Or(I);return U||R}return A})).apply(this,arguments)}function ri(I){return Pi(I,A=>{if(!A)throw Ne.create("installation-not-found");return It(A)})}function It(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Us(I,A){return q.apply(this,arguments)}function q(){return(q=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:A},R){const U=z(I,R),Q=Pe(I,R),re=A.getImmediate({optional:!0});if(re){const ut=yield re.getHeartbeatsHeader();ut&&Q.append("x-firebase-client",ut)}const Ge={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:J,appId:I.appId}})},lt=yield Oe(()=>fetch(U,Ge));if(lt.ok)return at(yield lt.json());throw yield Le("Generate Auth Token",lt)})).apply(this,arguments)}function z(I,{fid:A}){return`${He(I)}/${A}/authTokens:generate`}function H(I){return we.apply(this,arguments)}function we(){return(we=(0,F.Z)(function*(I,A=!1){let R;const U=yield Pi(I.appConfig,re=>{if(!Ct(re))throw Ne.create("not-registered");const Me=re.authToken;if(!A&&nn(Me))return re;if(1===Me.requestStatus)return R=G(I,A),re;{if(!navigator.onLine)throw Ne.create("app-offline");const Ge=Tn(re);return R=ze(I,Ge),Ge}});return R?yield R:U.authToken})).apply(this,arguments)}function G(I,A){return X.apply(this,arguments)}function X(){return(X=(0,F.Z)(function*(I,A){let R=yield me(I.appConfig);for(;1===R.authToken.requestStatus;)yield Dn(100),R=yield me(I.appConfig);const U=R.authToken;return 0===U.requestStatus?H(I,A):U})).apply(this,arguments)}function me(I){return Pi(I,A=>{if(!Ct(A))throw Ne.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function ze(I,A){return ft.apply(this,arguments)}function ft(){return(ft=(0,F.Z)(function*(I,A){try{const R=yield Us(I,A),U=Object.assign(Object.assign({},A),{authToken:R});return yield Ln(I.appConfig,U),R}catch(R){if(!De(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Ln(I.appConfig,U)}else yield cn(I.appConfig);throw R}})).apply(this,arguments)}function Ct(I){return void 0!==I&&2===I.registrationStatus}function nn(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function Tn(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function tu(){return(tu=(0,F.Z)(function*(I){const A=I,{installationEntry:R,registrationPromise:U}=yield Or(A);return U?U.catch(console.error):H(A).catch(console.error),R.fid})).apply(this,arguments)}function da(){return(da=(0,F.Z)(function*(I,A=!1){const R=I;return yield ha(R),(yield H(R,A)).token})).apply(this,arguments)}function ha(I){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,F.Z)(function*(I){const{registrationPromise:A}=yield Or(I);A&&(yield A)})).apply(this,arguments)}function Wn(I){return Ne.create("missing-app-config-values",{valueName:I})}const ph="installations";(0,ce._registerComponent)(new oe.wA(ph,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Wn("App Configuration");if(!I.name)throw Wn("App Name");const A=["projectId","apiKey","appId"];for(const R of A)if(!I.options[R])throw Wn(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ce._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new oe.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),R=(0,ce._getProvider)(A,ph).getImmediate();return{getId:()=>function(I){return tu.apply(this,arguments)}(R),getToken:Q=>function(I){return da.apply(this,arguments)}(R,Q)}},"PRIVATE")),(0,ce.registerVersion)(ne,L),(0,ce.registerVersion)(ne,L,"esm2017");const wn="@firebase/remote-config",mn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pp{constructor(A,R,U,Q){this.client=A,this.storage=R,this.storageCache=U,this.logger=Q}isCachedDataFresh(A,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,Q=U<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${Q}.`),Q}fetch(A){var R=this;return(0,F.Z)(function*(){const[U,Q]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Q&&R.isCachedDataFresh(A.cacheMaxAgeMillis,U))return Q;A.eTag=Q&&Q.eTag;const re=yield R.client.fetch(A),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Me),re})()}}function Ki(I=navigator){return I.languages&&I.languages[0]||I.language}class An{constructor(A,R,U,Q,re,Me){this.firebaseInstallations=A,this.sdkVersion=R,this.namespace=U,this.projectId=Q,this.apiKey=re,this.appId=Me}fetch(A){var R=this;return(0,F.Z)(function*(){const[U,Q]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},lt={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:Q,app_id:R.appId,language_code:Ki()},ut={method:"POST",headers:Ge,body:JSON.stringify(lt)},kt=fetch(Me,ut),pt=new Promise((vs,ws)=>{A.signal.addEventListener(()=>{const Hh=new Error("The operation was aborted.");Hh.name="AbortError",ws(Hh)})});let nr;try{yield Promise.race([kt,pt]),nr=yield kt}catch(vs){let ws="fetch-client-network";throw"AbortError"===vs.name&&(ws="fetch-timeout"),mn.create(ws,{originalErrorMessage:vs.message})}let Kn=nr.status;const Ci=nr.headers.get("ETag")||void 0;let Na,es;if(200===nr.status){let vs;try{vs=yield nr.json()}catch(ws){throw mn.create("fetch-client-parse",{originalErrorMessage:ws.message})}Na=vs.entries,es=vs.state}if("INSTANCE_STATE_UNSPECIFIED"===es?Kn=500:"NO_CHANGE"===es?Kn=304:("NO_TEMPLATE"===es||"EMPTY_CONFIG"===es)&&(Na={}),304!==Kn&&200!==Kn)throw mn.create("fetch-status",{httpStatus:Kn});return{status:Kn,eTag:Ci,config:Na}})()}}class us{constructor(A,R){this.client=A,this.storage=R}fetch(A){var R=this;return(0,F.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(A,U)})()}attemptFetch(A,{throttleEndTimeMillis:R,backoffCount:U}){var Q=this;return(0,F.Z)(function*(){yield function(I,A){return new Promise((R,U)=>{const Q=Math.max(A-Date.now(),0),re=setTimeout(R,Q);I.addEventListener(()=>{clearTimeout(re),U(mn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,R);try{const re=yield Q.client.fetch(A);return yield Q.storage.deleteThrottleMetadata(),re}catch(re){if(!function(I){if(!(I instanceof se.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(re))throw re;const Me={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield Q.storage.setThrottleMetadata(Me),Q.attemptFetch(A,Me)}})()}}class gp{constructor(A,R,U,Q,re){this.app=A,this._client=R,this._storageCache=U,this._storage=Q,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ya(I,A){const R=I.target.error||void 0;return mn.create(A,{originalErrorMessage:R&&R.message})}const Eo="app_namespace_store";class xl{constructor(A,R,U,Q=function(){return new Promise((I,A)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{A(ya(U,"storage-open"))},R.onsuccess=U=>{I(U.target.result)},R.onupgradeneeded=U=>{const Q=U.target.result;switch(U.oldVersion){case 0:Q.createObjectStore(Eo,{keyPath:"compositeKey"})}}}catch(R){A(mn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=A,this.appName=R,this.namespace=U,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var R=this;return(0,F.Z)(function*(){const U=yield R.openDbPromise;return new Promise((Q,re)=>{const Ge=U.transaction([Eo],"readonly").objectStore(Eo),lt=R.createCompositeKey(A);try{const ut=Ge.get(lt);ut.onerror=kt=>{re(ya(kt,"storage-get"))},ut.onsuccess=kt=>{const pt=kt.target.result;Q(pt?pt.value:void 0)}}catch(ut){re(mn.create("storage-get",{originalErrorMessage:ut&&ut.message}))}})})()}set(A,R){var U=this;return(0,F.Z)(function*(){const Q=yield U.openDbPromise;return new Promise((re,Me)=>{const lt=Q.transaction([Eo],"readwrite").objectStore(Eo),ut=U.createCompositeKey(A);try{const kt=lt.put({compositeKey:ut,value:R});kt.onerror=pt=>{Me(ya(pt,"storage-set"))},kt.onsuccess=()=>{re()}}catch(kt){Me(mn.create("storage-set",{originalErrorMessage:kt&&kt.message}))}})})()}delete(A){var R=this;return(0,F.Z)(function*(){const U=yield R.openDbPromise;return new Promise((Q,re)=>{const Ge=U.transaction([Eo],"readwrite").objectStore(Eo),lt=R.createCompositeKey(A);try{const ut=Ge.delete(lt);ut.onerror=kt=>{re(ya(kt,"storage-delete"))},ut.onsuccess=()=>{Q()}}catch(ut){re(mn.create("storage-delete",{originalErrorMessage:ut&&ut.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class yh{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,F.Z)(function*(){const R=A.storage.getLastFetchStatus(),U=A.storage.getLastSuccessfulFetchTimestampMillis(),Q=A.storage.getActiveConfig(),re=yield R;re&&(A.lastFetchStatus=re);const Me=yield U;Me&&(A.lastSuccessfulFetchTimestampMillis=Me);const Ge=yield Q;Ge&&(A.activeConfig=Ge)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Nl(){return vh.apply(this,arguments)}function vh(){return(vh=(0,F.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new oe.wA("remote-config",function(A,{instanceIdentifier:R}){const U=A.getProvider("app").getImmediate(),Q=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw mn.create("registration-window");if(!(0,se.hl)())throw mn.create("indexed-db-unavailable");const{projectId:re,apiKey:Me,appId:Ge}=U.options;if(!re)throw mn.create("registration-project-id");if(!Me)throw mn.create("registration-api-key");if(!Ge)throw mn.create("registration-app-id");const lt=new xl(Ge,U.name,R=R||"firebase"),ut=new yh(lt),kt=new ve.Yd(wn);kt.logLevel=ve.in.ERROR;const pt=new An(Q,ce.SDK_VERSION,R,re,Me,Ge),nr=new us(pt,lt),Kn=new pp(nr,lt,ut,kt),Ci=new gp(U,Kn,ut,lt,kt);return function(I){const A=(0,se.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Ci),Ci},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(wn,"0.3.8"),(0,ce.registerVersion)(wn,"0.3.8","esm2017");const wh="/firebase-messaging-sw.js",Lm="/firebase-cloud-messaging-push-scope",iu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",su="google.c.a.c_id",Eh="google.c.a.c_l",Ih="google.c.a.ts",ou="google.c.a.e";var Fr=(()=>{return(I=Fr||(Fr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Fr;var I})();function Zi(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fi(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),Q=new Uint8Array(U.length);for(let re=0;re<U.length;++re)Q[re]=U.charCodeAt(re);return Q}const au="fcm_token_details_db",yp="fcm_token_object_Store";function Rl(I){return uu.apply(this,arguments)}function uu(){return(uu=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(au))return null;let A=null;return(yield(0,le.X3)(au,5,{upgrade:(U=(0,F.Z)(function*(Q,re,Me,Ge){var lt;if(re<2||!Q.objectStoreNames.contains(yp))return;const ut=Ge.objectStore(yp),kt=yield ut.index("fcmSenderId").get(I);if(yield ut.clear(),kt)if(2===re){const pt=kt;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;A={token:pt.fcmToken,createTime:null!==(lt=pt.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:Zi(pt.vapidKey)}}}else if(3===re){const pt=kt;A={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:Zi(pt.auth),p256dh:Zi(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:Zi(pt.vapidKey)}}}else if(4===re){const pt=kt;A={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:Zi(pt.auth),p256dh:Zi(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:Zi(pt.vapidKey)}}}}),function(re,Me,Ge,lt){return U.apply(this,arguments)})})).close(),yield(0,le.Lj)(au),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),Ml(A)?A:null;var U})).apply(this,arguments)}function Ml(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Bn="firebase-messaging-store";let Yi=null;function nc(){return Yi||(Yi=(0,le.X3)("firebase-messaging-database",1,{upgrade:(I,A)=>{switch(A){case 0:I.createObjectStore(Bn)}}})),Yi}function _a(I){return Li.apply(this,arguments)}function Li(){return(Li=(0,F.Z)(function*(I){const A=cs(I),U=yield(yield nc()).transaction(Bn).objectStore(Bn).get(A);if(U)return U;{const Q=yield Rl(I.appConfig.senderId);if(Q)return yield rc(I,Q),Q}})).apply(this,arguments)}function rc(I,A){return Co.apply(this,arguments)}function Co(){return(Co=(0,F.Z)(function*(I,A){const R=cs(I),Q=(yield nc()).transaction(Bn,"readwrite");return yield Q.objectStore(Bn).put(A,R),yield Q.done,A})).apply(this,arguments)}function Zt(I){return $s.apply(this,arguments)}function $s(){return($s=(0,F.Z)(function*(I){const A=cs(I),U=(yield nc()).transaction(Bn,"readwrite");yield U.objectStore(Bn).delete(A),yield U.done})).apply(this,arguments)}function cs({appConfig:I}){return I.appId}const Pt=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Th(I,A){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,F.Z)(function*(I,A){const R=yield er(I),U=cu(A),Q={method:"POST",headers:R,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(Hs(I.appConfig),Q)).json()}catch(Me){throw Pt.create("token-subscribe-failed",{errorInfo:Me})}if(re.error)throw Pt.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw Pt.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function ls(I,A){return ii.apply(this,arguments)}function ii(){return(ii=(0,F.Z)(function*(I,A){const R=yield er(I),U=cu(A.subscriptionOptions),Q={method:"PATCH",headers:R,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(`${Hs(I.appConfig)}/${A.token}`,Q)).json()}catch(Me){throw Pt.create("token-update-failed",{errorInfo:Me})}if(re.error)throw Pt.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw Pt.create("token-update-no-token");return re.token})).apply(this,arguments)}function ic(I,A){return ds.apply(this,arguments)}function ds(){return(ds=(0,F.Z)(function*(I,A){const U={method:"DELETE",headers:yield er(I)};try{const re=yield(yield fetch(`${Hs(I.appConfig)}/${A}`,U)).json();if(re.error)throw Pt.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Q){throw Pt.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function Hs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function er(I){return br.apply(this,arguments)}function br(){return(br=(0,F.Z)(function*({appConfig:I,installations:A}){const R=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function cu({p256dh:I,auth:A,endpoint:R,vapidKey:U}){const Q={web:{endpoint:R,auth:A,p256dh:I}};return U!==iu&&(Q.web.applicationPubKey=U),Q}const Sh=6048e5;function Qi(I){return Do.apply(this,arguments)}function Do(){return(Do=(0,F.Z)(function*(I){const A=yield va(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:Zi(A.getKey("auth")),p256dh:Zi(A.getKey("p256dh"))},U=yield _a(I.firebaseDependencies);if(U){if(Ol(U.subscriptionOptions,R))return Date.now()>=U.createTime+Sh?Vm(I,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield ic(I.firebaseDependencies,U.token)}catch(Q){console.warn(Q)}return To(I.firebaseDependencies,R)}return To(I.firebaseDependencies,R)})).apply(this,arguments)}function lu(I){return dt.apply(this,arguments)}function dt(){return(dt=(0,F.Z)(function*(I){const A=yield _a(I.firebaseDependencies);A&&(yield ic(I.firebaseDependencies,A.token),yield Zt(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Vm(I,A){return hs.apply(this,arguments)}function hs(){return(hs=(0,F.Z)(function*(I,A){try{const R=yield ls(I.firebaseDependencies,A),U=Object.assign(Object.assign({},A),{token:R,createTime:Date.now()});return yield rc(I.firebaseDependencies,U),R}catch(R){throw yield lu(I),R}})).apply(this,arguments)}function To(I,A){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,F.Z)(function*(I,A){const U={token:yield Th(I,A),createTime:Date.now(),subscriptionOptions:A};return yield rc(I,U),U.token})).apply(this,arguments)}function va(I,A){return fs.apply(this,arguments)}function fs(){return(fs=(0,F.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fi(A)})})).apply(this,arguments)}function Ol(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ee(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const R=A.notification.title;R&&(I.notification.title=R);const U=A.notification.body;U&&(I.notification.body=U);const Q=A.notification.image;Q&&(I.notification.image=Q)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const R=A.fcmOptions.link;R&&(I.fcmOptions.link=R);const U=A.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(A,I),A}function sc(I){return"object"==typeof I&&!!I&&su in I}function So(I,A){const R=[];for(let U=0;U<I.length;U++)R.push(I.charAt(U)),U<A.length&&R.push(A.charAt(U));return R.join("")}function wa(I){return Pt.create("missing-app-config-values",{valueName:I})}So("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),So("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gs{constructor(A,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function(I){if(!I||!I.options)throw wa("App Configuration Object");if(!I.name)throw wa("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const U of A)if(!R[U])throw wa(U);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:Q,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function xh(I){return oc.apply(this,arguments)}function oc(){return(oc=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(wh,{scope:Lm}),I.swRegistration.update().catch(()=>{})}catch(A){throw Pt.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function ba(I,A){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,F.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield xh(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Pt.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function tr(I,A){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,F.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=iu)})).apply(this,arguments)}function qs(){return(qs=(0,F.Z)(function*(I,A){if(!navigator)throw Pt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pt.create("permission-blocked");return yield tr(I,null==A?void 0:A.vapidKey),yield ba(I,null==A?void 0:A.serviceWorkerRegistration),Qi(I)})).apply(this,arguments)}function Vi(I,A,R){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,F.Z)(function*(I,A,R){const U=ac(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[su],message_name:R[Eh],message_time:R[Ih],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ac(I){switch(I){case Fr.NOTIFICATION_CLICKED:return"notification_open";case Fr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ea(){return(Ea=(0,F.Z)(function*(I,A){const R=A.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Fr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ee(R)):I.onMessageHandler.next(Ee(R)));const U=R.data;sc(U)&&"1"===U[ou]&&(yield Vi(I,R.messageType,U))})).apply(this,arguments)}const hu="@firebase/messaging";function cc(){return No.apply(this,arguments)}function No(){return(No=(0,F.Z)(function*(){try{yield(0,se.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new oe.wA("messaging",I=>{const A=new Gs(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function(I,A){return Ea.apply(this,arguments)}(A,R)),A},"PUBLIC")),(0,ce._registerComponent)(new oe.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,A){return qs.apply(this,arguments)}(A,U)}},"PRIVATE")),(0,ce.registerVersion)(hu,"0.9.13"),(0,ce.registerVersion)(hu,"0.9.13","esm2017");const si="analytics",bn="firebase_id",pu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oh="https://www.googletagmanager.com/gtag/js",jn=new ve.Yd("@firebase/analytics");function Ph(I){return Promise.all(I.map(A=>A.catch(R=>R)))}function Da(I,A){const R=document.createElement("script");R.src=`${Oh}?l=${I}&id=${A}`,R.async=!0,document.head.appendChild(R)}function Ll(I,A,R,U,Q,re){return gu.apply(this,arguments)}function gu(){return(gu=(0,F.Z)(function*(I,A,R,U,Q,re){const Me=U[Q];try{if(Me)yield A[Me];else{const lt=(yield Ph(R)).find(ut=>ut.measurementId===Q);lt&&(yield A[lt.appId])}}catch(Ge){jn.error(Ge)}I("config",Q,re)})).apply(this,arguments)}function hc(I,A,R,U,Q){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,F.Z)(function*(I,A,R,U,Q){try{let re=[];if(Q&&Q.send_to){let Me=Q.send_to;Array.isArray(Me)||(Me=[Me]);const Ge=yield Ph(R);for(const lt of Me){const ut=Ge.find(pt=>pt.measurementId===lt),kt=ut&&A[ut.appId];if(!kt){re=[];break}re.push(kt)}}0===re.length&&(re=Object.values(A)),yield Promise.all(re),I("event",U,Q||{})}catch(re){jn.error(re)}})).apply(this,arguments)}function Bm(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(Oh))return A;return null}const pr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),jm=new class{constructor(A={},R=1e3){this.throttleMetadata=A,this.intervalMillis=R}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,R){this.throttleMetadata[A]=R}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Av(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function mu(I){return fc.apply(this,arguments)}function fc(){return(fc=(0,F.Z)(function*(I){var A;const{appId:R,apiKey:U}=I,Q={method:"GET",headers:Av(U)},re=pu.replace("{app-id}",R),Me=yield fetch(re,Q);if(200!==Me.status&&304!==Me.status){let Ge="";try{const lt=yield Me.json();(null===(A=lt.error)||void 0===A?void 0:A.message)&&(Ge=lt.error.message)}catch(lt){}throw pr.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Ge})}return Me.json()})).apply(this,arguments)}function Cp(I){return pc.apply(this,arguments)}function pc(){return(pc=(0,F.Z)(function*(I,A=jm,R){const{appId:U,apiKey:Q,measurementId:re}=I.options;if(!U)throw pr.create("no-app-id");if(!Q){if(re)return{measurementId:re,appId:U};throw pr.create("no-api-key")}const Me=A.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new yu;return setTimeout((0,F.Z)(function*(){Ge.abort()}),void 0!==R?R:6e4),Dp({appId:U,apiKey:Q,measurementId:re},Me,Ge,A)})).apply(this,arguments)}function Dp(I,A,R){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,F.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:R},U,Q=jm){const{appId:re,measurementId:Me}=I;try{yield Ui(U,A)}catch(Ge){if(Me)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:re,measurementId:Me};throw Ge}try{const Ge=yield mu(I);return Q.deleteThrottleMetadata(re),Ge}catch(Ge){if(!Ul(Ge)){if(Q.deleteThrottleMetadata(re),Me)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:re,measurementId:Me};throw Ge}const lt=503===Number(Ge.customData.httpStatus)?(0,se.$s)(R,Q.intervalMillis,30):(0,se.$s)(R,Q.intervalMillis),ut={throttleEndTimeMillis:Date.now()+lt,backoffCount:R+1};return Q.setThrottleMetadata(re,ut),jn.debug(`Calling attemptFetch again in ${lt} millis`),Dp(I,ut,U,Q)}})).apply(this,arguments)}function Ui(I,A){return new Promise((R,U)=>{const Q=Math.max(A-Date.now(),0),re=setTimeout(R,Q);I.addEventListener(()=>{clearTimeout(re),U(pr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Ul(I){if(!(I instanceof se.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class yu{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Fh(){return _u.apply(this,arguments)}function _u(){return(_u=(0,F.Z)(function*(){if(!(0,se.hl)())return jn.warn(pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(I){return jn.warn(pr.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function vu(){return(vu=(0,F.Z)(function*(I,A,R,U,Q,re,Me){var Ge;const lt=Cp(I);lt.then(Kn=>{R[Kn.measurementId]=Kn.appId,I.options.measurementId&&Kn.measurementId!==I.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kn=>jn.error(Kn)),A.push(lt);const ut=Fh().then(Kn=>{if(Kn)return U.getId()}),[kt,pt]=yield Promise.all([lt,ut]);Bm()||Da(re,kt.measurementId),Q("js",new Date);const nr=null!==(Ge=null==Me?void 0:Me.config)&&void 0!==Ge?Ge:{};return nr.origin="firebase",nr.update=!0,null!=pt&&(nr[bn]=pt),Q("config",kt.measurementId,nr),kt.measurementId})).apply(this,arguments)}class Ur{constructor(A){this.app=A}_delete(){return delete ps[this.app.options.appId],Promise.resolve()}}let ps={},Er=[];const en={};let Ws,Mo,ot="dataLayer",zs=!1;function wi(I,A,R){!function(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((U,Q)=>`(${Q+1}) ${U}`).join(" "),R=pr.create("invalid-analytics-context",{errorInfo:A});jn.warn(R.message)}}();const U=I.options.appId;if(!U)throw pr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw pr.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ps[U])throw pr.create("already-exists",{id:U});if(!zs){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(ot);const{wrappedGtag:re,gtagCore:Me}=function(I,A,R,U,Q){let re=function(...Me){window[U].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(re=window[Q]),window[Q]=function(I,A,R,U){function re(){return(re=(0,F.Z)(function*(Me,Ge,lt){try{"event"===Me?yield hc(I,A,R,Ge,lt):"config"===Me?yield Ll(I,A,R,U,Ge,lt):I("set",Ge)}catch(ut){jn.error(ut)}})).apply(this,arguments)}return function(Me,Ge,lt){return re.apply(this,arguments)}}(re,I,A,R),{gtagCore:re,wrappedGtag:window[Q]}}(ps,Er,en,ot,"gtag");Mo=re,Ws=Me,zs=!0}return ps[U]=function(I,A,R,U,Q,re,Me){return vu.apply(this,arguments)}(I,Er,en,A,Ws,ot,R),new Ur(I)}function Oo(){return(Oo=(0,F.Z)(function*(I,A,R,U,Q){if(Q&&Q.global)I("event",R,U);else{const re=yield A;I("event",R,Object.assign(Object.assign({},U),{send_to:re}))}})).apply(this,arguments)}function ms(){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,F.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(I){return!1}})).apply(this,arguments)}const mt="@firebase/analytics";(0,ce._registerComponent)(new oe.wA(si,(A,{options:R})=>wi(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new oe.wA("analytics-internal",function(A){try{const R=A.getProvider(si).getImmediate();return{logEvent:(U,Q,re)=>function(I,A,R,U){I=(0,se.m9)(I),function(I,A,R,U,Q){return Oo.apply(this,arguments)}(Mo,ps[I.app.options.appId],A,R,U).catch(Q=>jn.error(Q))}(R,U,Q,re)}}catch(R){throw pr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(mt,"0.7.9"),(0,ce.registerVersion)(mt,"0.7.9","esm2017");var qe=k(7771),dn=k(3637),vt=k(3342),yc=k(3101),Po=k(309);const _c=new g.GfV("7.3.0"),Uh="__angularfire_symbol__analyticsIsSupportedValue",vc="__angularfire_symbol__analyticsIsSupported",wc="__angularfire_symbol__remoteConfigIsSupportedValue",Bh="__angularfire_symbol__remoteConfigIsSupported",jl="__angularfire_symbol__messagingIsSupportedValue",$n="__angularfire_symbol__messagingIsSupported";function bc(I,A,R){if(A){if(1===A.length)return A[0];const re=A.filter(Me=>Me.app===R);if(1===re.length)return re[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[vc]||(globalThis[vc]=ms().then(I=>globalThis[Uh]=I).catch(()=>globalThis[Uh]=!1)),globalThis[$n]||(globalThis[$n]=cc().then(I=>globalThis[jl]=I).catch(()=>globalThis[jl]=!1)),globalThis[Bh]||(globalThis[Bh]=Nl().then(I=>globalThis[wc]=I).catch(()=>globalThis[wc]=!1));const Eu=(I,A)=>{const R=A?[A]:(0,ee.C6)(),U=[];return R.forEach(Q=>{Q.container.getProvider(I).instances.forEach(Me=>{U.includes(Me)||U.push(Me)})}),U};function Zs(){}class jh{constructor(A,R=qe.N){this.zone=A,this.delegate=R}now(){return this.delegate.now()}schedule(A,R,U){const Q=this.zone;return this.delegate.schedule(function(Me){Q.runGuarded(()=>{A.apply(this,[Me])})},R,U)}}class ai{constructor(A){this.zone=A,this.task=null}call(A,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zs,{},Zs,Zs)),R.pipe((0,vt.b)({next:U,complete:U,error:U})).subscribe(A).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ii=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new jh(Zone.current)),this.insideAngular=R.run(()=>new jh(Zone.current,dn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(g.LFG(g.R0b))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ui(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Hl(I){return ui(),function(I){return function(R){return(R=R.lift(new ai(I.ngZone))).pipe((0,yc.R)(I.outsideAngular),(0,Po.QV)(I.insideAngular))}}(ui())(I)}},3854:(We,ye,k)=>{"use strict";k.d(ye,{BH:()=>Y,LL:()=>Ue,ZR:()=>bt,zI:()=>Ve,US:()=>oe,tV:()=>ne,L:()=>le,$s:()=>ri,r3:()=>pn,Sg:()=>de,ne:()=>Se,vZ:()=>ti,ZB:()=>V,pd:()=>qn,m9:()=>Us,z$:()=>be,jU:()=>Ae,ru:()=>Ne,d:()=>He,xb:()=>yr,w1:()=>at,hl:()=>Pe,uI:()=>ge,UG:()=>fe,b$:()=>De,G6:()=>wt,Mn:()=>Le,xO:()=>Rn,zd:()=>qi,eu:()=>Oe});const ce=function(q){const z=[];let H=0;for(let we=0;we<q.length;we++){let G=q.charCodeAt(we);G<128?z[H++]=G:G<2048?(z[H++]=G>>6|192,z[H++]=63&G|128):55296==(64512&G)&&we+1<q.length&&56320==(64512&q.charCodeAt(we+1))?(G=65536+((1023&G)<<10)+(1023&q.charCodeAt(++we)),z[H++]=G>>18|240,z[H++]=G>>12&63|128,z[H++]=G>>6&63|128,z[H++]=63&G|128):(z[H++]=G>>12|224,z[H++]=G>>6&63|128,z[H++]=63&G|128)}return z},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,z){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let G=0;G<q.length;G+=3){const X=q[G],me=G+1<q.length,ze=me?q[G+1]:0,ft=G+2<q.length,Ct=ft?q[G+2]:0;let Tn=(15&ze)<<2|Ct>>6,_r=63&Ct;ft||(_r=64,me||(Tn=64)),we.push(H[X>>2],H[(3&X)<<4|ze>>4],H[Tn],H[_r])}return we.join("")},encodeString(q,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(q):this.encodeByteArray(ce(q),z)},decodeString(q,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(q):function(q){const z=[];let H=0,we=0;for(;H<q.length;){const G=q[H++];if(G<128)z[we++]=String.fromCharCode(G);else if(G>191&&G<224){const X=q[H++];z[we++]=String.fromCharCode((31&G)<<6|63&X)}else if(G>239&&G<365){const ft=((7&G)<<18|(63&q[H++])<<12|(63&q[H++])<<6|63&q[H++])-65536;z[we++]=String.fromCharCode(55296+(ft>>10)),z[we++]=String.fromCharCode(56320+(1023&ft))}else{const X=q[H++],me=q[H++];z[we++]=String.fromCharCode((15&G)<<12|(63&X)<<6|63&me)}}return z.join("")}(this.decodeStringToByteArray(q,z))},decodeStringToByteArray(q,z){this.init_();const H=z?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let G=0;G<q.length;){const X=H[q.charAt(G++)],ze=G<q.length?H[q.charAt(G)]:0;++G;const Ct=G<q.length?H[q.charAt(G)]:64;++G;const St=G<q.length?H[q.charAt(G)]:64;if(++G,null==X||null==ze||null==Ct||null==St)throw Error();we.push(X<<2|ze>>4),64!==Ct&&(we.push(ze<<4&240|Ct>>2),64!==St&&we.push(Ct<<6&192|St))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},le=function(q){return function(q){const z=ce(q);return oe.encodeByteArray(z,!0)}(q).replace(/\./g,"")},ne=function(q){try{return oe.decodeString(q,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function V(q,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return z}for(const H in z)!z.hasOwnProperty(H)||!J(H)||(q[H]=V(q[H],z[H]));return q}function J(q){return"__proto__"!==q}class Y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,H)=>{this.resolve=z,this.reject=H})}wrapCallback(z){return(H,we)=>{H?this.reject(H):this.resolve(we),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(H):z(H,we))}}}function de(q,z){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=z||"demo-project",G=q.iat||0,X=q.sub||q.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:G,exp:G+3600,auth_time:G,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},q);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(me)),""].join(".")}function be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function Ae(){return"object"==typeof self&&self.self===self}function Ne(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function He(){return be().indexOf("Electron/")>=0}function at(){const q=be();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Le(){return be().indexOf("MSAppHost/")>=0}function wt(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pe(){return"object"==typeof indexedDB}function Oe(){return new Promise((q,z)=>{try{let H=!0;const we="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(we);G.onsuccess=()=>{G.result.close(),H||self.indexedDB.deleteDatabase(we),q(!0)},G.onupgradeneeded=()=>{H=!1},G.onerror=()=>{var X;z((null===(X=G.error)||void 0===X?void 0:X.message)||"")}}catch(H){z(H)}})}function Ve(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class bt extends Error{constructor(z,H,we){super(H),this.code=z,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor(z,H,we){this.service=z,this.serviceName=H,this.errors=we}create(z,...H){const we=H[0]||{},G=`${this.service}/${z}`,X=this.errors[z],me=X?function(q,z){return q.replace(ei,(H,we)=>{const G=z[we];return null!=G?String(G):`<${we}?>`})}(X,we):"Error";return new bt(G,`${this.serviceName}: ${me} (${G}).`,we)}}const ei=/\{\$([^}]+)}/g;function pn(q,z){return Object.prototype.hasOwnProperty.call(q,z)}function yr(q){for(const z in q)if(Object.prototype.hasOwnProperty.call(q,z))return!1;return!0}function ti(q,z){if(q===z)return!0;const H=Object.keys(q),we=Object.keys(z);for(const G of H){if(!we.includes(G))return!1;const X=q[G],me=z[G];if(gt(X)&&gt(me)){if(!ti(X,me))return!1}else if(X!==me)return!1}for(const G of we)if(!H.includes(G))return!1;return!0}function gt(q){return null!==q&&"object"==typeof q}function Rn(q){const z=[];for(const[H,we]of Object.entries(q))Array.isArray(we)?we.forEach(G=>{z.push(encodeURIComponent(H)+"="+encodeURIComponent(G))}):z.push(encodeURIComponent(H)+"="+encodeURIComponent(we));return z.length?"&"+z.join("&"):""}function qi(q){const z={};return q.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[G,X]=we.split("=");z[decodeURIComponent(G)]=decodeURIComponent(X)}}),z}function qn(q){const z=q.indexOf("?");if(!z)return"";const H=q.indexOf("#",z);return q.substring(z,H>0?H:void 0)}function Se(q,z){const H=new hr(q,z);return H.subscribe.bind(H)}class hr{constructor(z,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{z(this)}).catch(we=>{this.error(we)})}next(z){this.forEachObserver(H=>{H.next(z)})}error(z){this.forEachObserver(H=>{H.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,H,we){let G;if(void 0===z&&void 0===H&&void 0===we)throw new Error("Missing Observer.");G=function(q,z){if("object"!=typeof q||null===q)return!1;for(const H of["next","error","complete"])if(H in q&&"function"==typeof q[H])return!0;return!1}(z)?z:{next:z,error:H,complete:we},void 0===G.next&&(G.next=cn),void 0===G.error&&(G.error=cn),void 0===G.complete&&(G.complete=cn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(me){}}),this.observers.push(G),X}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,z)}sendOne(z,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{H(this.observers[z])}catch(we){"undefined"!=typeof console&&console.error&&console.error(we)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cn(){}function ri(q,z=1e3,H=2){const we=z*Math.pow(H,q),G=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+G)}function Us(q){return q&&q._delegate?q._delegate:q}},2329:(We,ye,k)=>{"use strict";k.d(ye,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=k(8026);(0,g.registerVersion)("firebase","9.8.2","app")},7841:(We,ye,k)=>{"use strict";k.d(ye,{Z:()=>g.Z});var g=k(3394);g.Z.registerVersion("firebase","9.8.2","app-compat")},2385:(We,ye,k)=>{"use strict";k.r(ye);var g=k(8239),ee=k(3394),F=k(3854),ce=k(8026);function le(_,f){var p={};for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&f.indexOf(w)<0&&(p[w]=_[w]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(w=Object.getOwnPropertySymbols(_);T<w.length;T++)f.indexOf(w[T])<0&&Object.prototype.propertyIsEnumerable.call(_,w[T])&&(p[w[T]]=_[w[T]])}return p}var Ue=k(5422),Dn=k(3910);const vo=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},pn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ht=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),la=new Ue.Yd("@firebase/auth");function ti(_,...f){la.logLevel<=Ue.in.ERROR&&la.error(`Auth (${ce.SDK_VERSION}): ${_}`,...f)}function gt(_,...f){throw Mr(_,...f)}function Rn(_,...f){return Mr(_,...f)}function qi(_,f,p){const w=Object.assign(Object.assign({},pn()),{[f]:p});return new F.LL("auth","Firebase",w).create(f,{appName:_.name})}function qn(_,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&gt(_,"argument-error"),qi(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mr(_,...f){if("string"!=typeof _){const p=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(p,...w)}return Ht.create(_,...f)}function Se(_,f,...p){if(!_)throw Mr(f,...p)}function hr(_){const f="INTERNAL ASSERTION FAILED: "+_;throw ti(f),new Error(f)}function Ln(_,f){_||hr(f)}const un=new Map;function cn(_){Ln(_ instanceof Function,"Expected a class definition");let f=un.get(_);return f?(Ln(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,un.set(_,f),f)}function Je(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Or(){return"http:"===ni()||"https:"===ni()}function ni(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class tt{constructor(f,p){this.shortDelay=f,this.longDelay=p,Ln(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Or()||(0,F.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function rt(_,f){Ln(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class Vn{static initialize(f,p,w){this.fetchImpl=f,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ri=new tt(3e4,6e4);function It(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function qt(_,f,p,w){return Us.apply(this,arguments)}function Us(){return(Us=(0,g.Z)(function*(_,f,p,w,T={}){return q(_,T,(0,g.Z)(function*(){let x={},j={};w&&("GET"===f?j=w:x={body:JSON.stringify(w)});const te=(0,F.xO)(Object.assign({key:_.config.apiKey},j)).slice(1),Re=yield _._getAdditionalHeaders();return Re["Content-Type"]="application/json",_.languageCode&&(Re["X-Firebase-Locale"]=_.languageCode),Vn.fetch()(G(_,_.config.apiHost,p,te),Object.assign({method:f,headers:Re,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function q(_,f,p){return z.apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(_,f,p){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},Wi),f);try{const T=new X(_),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const j=yield x.json();if("needConfirmation"in j)throw me(_,"account-exists-with-different-credential",j);if(x.ok&&!("errorMessage"in j))return j;{const te=x.ok?j.errorMessage:j.error.message,[Re,Ie]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw me(_,"credential-already-in-use",j);if("EMAIL_EXISTS"===Re)throw me(_,"email-already-in-use",j);if("USER_DISABLED"===Re)throw me(_,"user-disabled",j);const Ke=w[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw qi(_,Ke,Ie);gt(_,Ke)}}catch(T){if(T instanceof F.ZR)throw T;gt(_,"network-request-failed")}})).apply(this,arguments)}function H(_,f,p,w){return we.apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(_,f,p,w,T={}){const x=yield qt(_,f,p,w,T);return"mfaPendingCredential"in x&&gt(_,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function G(_,f,p,w){const T=`${f}${p}?${w}`;return _.config.emulator?rt(_.config,T):`${_.config.apiScheme}://${T}`}class X{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(Rn(this.auth,"network-request-failed")),ri.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function me(_,f,p){const w={appName:_.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const T=Rn(_,f,w);return T.customData._tokenResponse=p,T}function ft(){return(ft=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ct(_,f){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function St(_,f){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function _r(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Il(){return(Il=(0,g.Z)(function*(_,f=!1){const p=(0,F.m9)(_),w=yield p.getIdToken(f),T=ha(w);Se(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,j=null==x?void 0:x.sign_in_provider;return{claims:T,token:w,authTime:_r(da(T.auth_time)),issuedAtTime:_r(da(T.iat)),expirationTime:_r(da(T.exp)),signInProvider:j||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function da(_){return 1e3*Number(_)}function ha(_){const[f,p,w]=_.split(".");if(void 0===f||void 0===p||void 0===w)return ti("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,F.tV)(p);return T?JSON.parse(T):(ti("Failed to decode base64 JWT payload"),null)}catch(T){return ti("Caught error parsing JWT payload as JSON",T),null}}function gi(_,f){return as.apply(this,arguments)}function as(){return(as=(0,g.Z)(function*(_,f,p=!1){if(p)return f;try{return yield f}catch(w){throw w instanceof F.ZR&&fa(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function fa({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class fp{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),w)}iteration(){var f=this;return(0,g.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&f.schedule(!0))}f.schedule()})()}}class nu{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Mn(_){return zi.apply(this,arguments)}function zi(){return(zi=(0,g.Z)(function*(_){var f;const p=_.auth,w=yield _.getIdToken(),T=yield gi(_,St(p,{idToken:w}));Se(null==T?void 0:T.users.length,p,"internal-error");const x=T.users[0];_._notifyReloadListener(x);const j=(null===(f=x.providerUserInfo)||void 0===f?void 0:f.length)?mi(x.providerUserInfo):[],te=ph(_.providerData,j),Ke=!!_.isAnonymous&&!(_.email&&x.passwordHash||(null==te?void 0:te.length)),Ze={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:te,metadata:new nu(x.createdAt,x.lastLoginAt),isAnonymous:Ke};Object.assign(_,Ze)})).apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(_){const f=(0,F.m9)(_);yield Mn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ph(_,f){return[..._.filter(w=>!f.some(T=>T.providerId===w.providerId)),...f]}function mi(_){return _.map(f=>{var{providerId:p}=f,w=le(f,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Dt(){return(Dt=(0,g.Z)(function*(_,f){const p=yield q(_,{},(0,g.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:x}=_.config,j=G(_,T,"/v1/token",`key=${x}`),te=yield _._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",Vn.fetch()(j,{method:"POST",headers:te,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Se(f.idToken,"internal-error"),Se(void 0!==f.idToken,"internal-error"),Se(void 0!==f.refreshToken,"internal-error");const p="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(_){const f=ha(_);return Se(f,"internal-error"),Se(void 0!==f.exp,"internal-error"),Se(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var w=this;return(0,g.Z)(function*(){return Se(!w.accessToken||w.refreshToken,f,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var w=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:j}=yield function(_,f){return Dt.apply(this,arguments)}(f,p);w.updateTokensAndExpiration(T,x,Number(j))})()}updateTokensAndExpiration(f,p,w){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,p){const{refreshToken:w,accessToken:T,expirationTime:x}=p,j=new Jt;return w&&(Se("string"==typeof w,"internal-error",{appName:f}),j.refreshToken=w),T&&(Se("string"==typeof T,"internal-error",{appName:f}),j.accessToken=T),x&&(Se("number"==typeof x,"internal-error",{appName:f}),j.expirationTime=x),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Jt,this.toJSON())}_performRefresh(){return hr("not implemented")}}function wn(_,f){Se("string"==typeof _||void 0===_,"internal-error",{appName:f})}class Pr{constructor(f){var{uid:p,auth:w,stsTokenManager:T}=f,x=le(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new nu(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,g.Z)(function*(){const w=yield gi(p,p.stsTokenManager.getToken(p.auth,f));return Se(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(f){return function(_){return Il.apply(this,arguments)}(this,f)}reload(){return function(_){return Wn.apply(this,arguments)}(this)}_assign(f){this!==f&&(Se(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Pr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var w=this;return(0,g.Z)(function*(){let T=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield Mn(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,g.Z)(function*(){const p=yield f.getIdToken();return yield gi(f,function(_,f){return ft.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var w,T,x,j,te,Re,Ie,Ke;const Ze=null!==(w=p.displayName)&&void 0!==w?w:void 0,jt=null!==(T=p.email)&&void 0!==T?T:void 0,Hn=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,so=null!==(j=p.photoURL)&&void 0!==j?j:void 0,xu=null!==(te=p.tenantId)&&void 0!==te?te:void 0,Fc=null!==(Re=p._redirectEventId)&&void 0!==Re?Re:void 0,Kp=null!==(Ie=p.createdAt)&&void 0!==Ie?Ie:void 0,Zp=null!==(Ke=p.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:Ho,emailVerified:Yp,isAnonymous:Qp,providerData:gd,stsTokenManager:md}=p;Se(Ho&&md,f,"internal-error");const yd=Jt.fromJSON(this.name,md);Se("string"==typeof Ho,f,"internal-error"),wn(Ze,f.name),wn(jt,f.name),Se("boolean"==typeof Yp,f,"internal-error"),Se("boolean"==typeof Qp,f,"internal-error"),wn(Hn,f.name),wn(so,f.name),wn(xu,f.name),wn(Fc,f.name),wn(Kp,f.name),wn(Zp,f.name);const Cr=new Pr({uid:Ho,auth:f,email:jt,emailVerified:Yp,displayName:Ze,isAnonymous:Qp,photoURL:so,phoneNumber:Hn,tenantId:xu,stsTokenManager:yd,createdAt:Kp,lastLoginAt:Zp});return gd&&Array.isArray(gd)&&(Cr.providerData=gd.map(uy=>Object.assign({},uy))),Fc&&(Cr._redirectEventId=Fc),Cr}static _fromIdTokenResponse(f,p,w=!1){return(0,g.Z)(function*(){const T=new Jt;T.updateFromServerResponse(p);const x=new Pr({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:w});return yield Mn(x),x})()}}const fr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,w){var T=this;return(0,g.Z)(function*(){T.storage[p]=w})()}_get(p){var w=this;return(0,g.Z)(function*(){const T=w.storage[p];return void 0===T?null:T})()}_remove(p){var w=this;return(0,g.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return _.type="NONE",_})();function Xt(_,f,p){return`firebase:${_}:${f}:${p}`}class mn{constructor(f,p,w){this.persistence=f,this.auth=p,this.userKey=w;const{config:T,name:x}=this.auth;this.fullUserKey=Xt(this.userKey,T.apiKey,x),this.fullPersistenceKey=Xt("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,g.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Pr._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,g.Z)(function*(){if(p.persistence===f)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,w="authUser"){return(0,g.Z)(function*(){if(!p.length)return new mn(cn(fr),f,w);const T=(yield Promise.all(p.map(function(){var Ie=(0,g.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let x=T[0]||cn(fr);const j=Xt(w,f.config.apiKey,f.name);let te=null;for(const Ie of p)try{const Ke=yield Ie._get(j);if(Ke){const Ze=Pr._fromJSON(f,Ke);Ie!==x&&(te=Ze),x=Ie;break}}catch(Ke){}const Re=T.filter(Ie=>Ie._shouldAllowMigration);return x._shouldAllowMigration&&Re.length?(x=Re[0],te&&(yield x._set(j,te.toJSON())),yield Promise.all(p.map(function(){var Ie=(0,g.Z)(function*(Ke){if(Ke!==x)try{yield Ke._remove(j)}catch(Ze){}});return function(Ke){return Ie.apply(this,arguments)}}())),new mn(x,f,w)):new mn(x,f,w)})()}}function pa(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ju(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Tt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(vr(f))return"Blackberry";if(ma(f))return"Webos";if(ga(f))return"Safari";if((f.includes("chrome/")||Bs(f))&&!f.includes("edge/"))return"Chrome";if(kr(f))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Tt(_=(0,F.z$)()){return/firefox\//i.test(_)}function ga(_=(0,F.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Bs(_=(0,F.z$)()){return/crios\//i.test(_)}function Ju(_=(0,F.z$)()){return/iemobile/i.test(_)}function kr(_=(0,F.z$)()){return/android/i.test(_)}function vr(_=(0,F.z$)()){return/blackberry/i.test(_)}function ma(_=(0,F.z$)()){return/webos/i.test(_)}function wr(_=(0,F.z$)()){return/iphone|ipad|ipod/i.test(_)}function Cl(_=(0,F.z$)()){return wr(_)||kr(_)||ma(_)||vr(_)||/windows phone/i.test(_)||Ju(_)}function Tl(_,f=[]){let p;switch(_){case"Browser":p=pa((0,F.z$)());break;case"Worker":p=`${pa((0,F.z$)())}-${_}`;break;default:p=_}const w=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${ce.SDK_VERSION}/${w}`}class Al{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const w=x=>new Promise((j,te)=>{try{j(f(x))}catch(Re){te(Re)}});w.onAbort=p,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===f)return;const w=[];try{for(const T of p.queue)yield T(f),T.onAbort&&w.push(T.onAbort)}catch(T){w.reverse();for(const x of w)try{x()}catch(j){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class js{constructor(f,p,w){this.app=f,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xn(this),this.idTokenSubscription=new Xn(this),this.beforeStateQueue=new Al(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ht,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,p){var w=this;return p&&(this._popupRedirectResolver=cn(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,x;if(!w._deleted&&(w.persistenceManager=yield mn.create(w,f),!w._deleted)){if(null===(T=w._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(j){}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(x=w.currentUser)||void 0===x?void 0:x.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,g.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,g.Z)(function*(){var w;const T=yield p.assertedPersistence.getCurrentUser();let x=T,j=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const te=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Re=null==x?void 0:x._redirectEventId,Ie=yield p.tryRedirectSignIn(f);(!te||te===Re)&&(null==Ie?void 0:Ie.user)&&(x=Ie.user,j=!0)}if(!x)return p.directlySetCurrentUser(null);if(!x._redirectEventId){if(j)try{yield p.beforeStateQueue.runMiddleware(x)}catch(te){x=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(te))}return x?p.reloadAndSetCurrentUserOrClear(x):p.directlySetCurrentUser(null)}return Se(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===x._redirectEventId?p.directlySetCurrentUser(x):p.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var p=this;return(0,g.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch(T){yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,g.Z)(function*(){try{yield Mn(f)}catch(w){if("auth/network-request-failed"!==w.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,g.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,g.Z)(function*(){const w=f?(0,F.m9)(f):null;return w&&Se(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(f,p=!1){var w=this;return(0,g.Z)(function*(){if(!w._deleted)return f&&Se(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,g.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,g.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(cn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,p,w){return this.registerStateListener(this.authStateSubscription,f,p,w)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,w){return this.registerStateListener(this.idTokenSubscription,f,p,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var w=this;return(0,g.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const w=f&&cn(f)||p._popupRedirectResolver;Se(w,p,"argument-error"),p.redirectPersistenceManager=yield mn.create(p,[cn(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,g.Z)(function*(){var w,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,g.Z)(function*(){if(f===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,w,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(j,this,"internal-error"),j.then(()=>x(this.currentUser)),"function"==typeof p?f.addObserver(p,w,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==f&&(p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh()),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Tl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,g.Z)(function*(){var p;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(w["X-Firebase-Client"]=T),w})()}}function yn(_){return(0,F.m9)(_)}class Xn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(p=>this.observer=p)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ki(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Xu(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class us{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return hr("not implemented")}_getIdTokenResponse(f){return hr("not implemented")}_linkToIdToken(f,p){return hr("not implemented")}_getReauthenticationResolver(f){return hr("not implemented")}}function yi(_,f){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:resetPassword",It(_,f))})).apply(this,arguments)}function gp(_,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Eo(_,f){return gh.apply(this,arguments)}function gh(){return(gh=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:update",It(_,f))})).apply(this,arguments)}function mh(){return(mh=(0,g.Z)(function*(_,f){return H(_,"POST","/v1/accounts:signInWithPassword",It(_,f))})).apply(this,arguments)}function xl(_,f){return yh.apply(this,arguments)}function yh(){return(yh=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:sendOobCode",It(_,f))})).apply(this,arguments)}function Fm(_,f){return mp.apply(this,arguments)}function mp(){return(mp=(0,g.Z)(function*(_,f){return xl(_,f)})).apply(this,arguments)}function _h(_,f){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,g.Z)(function*(_,f){return xl(_,f)})).apply(this,arguments)}function vh(_,f){return wh.apply(this,arguments)}function wh(){return(wh=(0,g.Z)(function*(_,f){return xl(_,f)})).apply(this,arguments)}function Lm(_,f){return iu.apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(_,f){return xl(_,f)})).apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(_,f){return H(_,"POST","/v1/accounts:signInWithEmailLink",It(_,f))})).apply(this,arguments)}function Ih(){return(Ih=(0,g.Z)(function*(_,f){return H(_,"POST","/v1/accounts:signInWithEmailLink",It(_,f))})).apply(this,arguments)}class ou extends us{constructor(f,p,w,T=null){super("password",w),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new ou(f,p,"password")}static _fromEmailAndCode(f,p,w=null){return new ou(f,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function(_,f){return mh.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function(_,f){return su.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:gt(f,"internal-error")}})()}_linkToIdToken(f,p){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return gp(f,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(_,f){return Ih.apply(this,arguments)}(f,{idToken:p,email:w._email,oobCode:w._password});default:gt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Io(_,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(function*(_,f){return H(_,"POST","/v1/accounts:signInWithIdp",It(_,f))})).apply(this,arguments)}class Fi extends us{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new Fi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):gt("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T}=p,x=le(p,["providerId","signInMethod"]);if(!w||!T)return null;const j=new Fi(w,T);return j.idToken=x.idToken||void 0,j.accessToken=x.accessToken||void 0,j.secret=x.secret,j.nonce=x.nonce,j.pendingToken=x.pendingToken||null,j}_getIdTokenResponse(f){return Io(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,Io(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Io(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,F.xO)(p)}return f}}function au(_,f){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:sendVerificationCode",It(_,f))})).apply(this,arguments)}function Rl(){return(Rl=(0,g.Z)(function*(_,f){return H(_,"POST","/v1/accounts:signInWithPhoneNumber",It(_,f))})).apply(this,arguments)}function Ml(){return(Ml=(0,g.Z)(function*(_,f){const p=yield H(_,"POST","/v1/accounts:signInWithPhoneNumber",It(_,f));if(p.temporaryProof)throw me(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const tc={USER_NOT_FOUND:"user-not-found"};function Bn(){return(Bn=(0,g.Z)(function*(_,f){return H(_,"POST","/v1/accounts:signInWithPhoneNumber",It(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),tc)})).apply(this,arguments)}class Yi extends us{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new Yi({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new Yi({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function(_,f){return Rl.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function(_,f){return Ml.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(_,f){return Bn.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:w,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:w,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:w,phoneNumber:T,temporaryProof:x}=f;return w||p||T||x?new Yi({verificationId:p,verificationCode:w,phoneNumber:T,temporaryProof:x}):null}}class Li{constructor(f){var p,w,T,x,j,te;const Re=(0,F.zd)((0,F.pd)(f)),Ie=null!==(p=Re.apiKey)&&void 0!==p?p:null,Ke=null!==(w=Re.oobCode)&&void 0!==w?w:null,Ze=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Re.mode)&&void 0!==T?T:null);Se(Ie&&Ke&&Ze,"argument-error"),this.apiKey=Ie,this.operation=Ze,this.code=Ke,this.continueUrl=null!==(x=Re.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(j=Re.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(te=Re.tenantId)&&void 0!==te?te:null}static parseLink(f){const p=function(_){const f=(0,F.zd)((0,F.pd)(_)).link,p=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(_)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||p||f||_}(f);try{return new Li(p)}catch(w){return null}}}let Co=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,w){return ou._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const T=Li.parseLink(w);return Se(T,"argument-error"),ou._fromEmailAndCode(p,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Zt{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class $s extends Zt{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class cs extends $s{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return Se("providerId"in p&&"signInMethod"in p,"argument-error"),Fi._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Se(f.idToken||f.accessToken,"argument-error"),Fi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return cs.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return cs.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:x,nonce:j,providerId:te}=f;if(!w&&!T&&!p&&!x||!te)return null;try{return new cs(te)._credential({idToken:p,accessToken:w,nonce:j,pendingToken:x})}catch(Re){return null}}}let Dh=(()=>{class _ extends $s{constructor(){super("facebook.com")}static credential(p){return Fi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Pt=(()=>{class _ extends $s{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return Fi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:T}=p;if(!w&&!T)return null;try{return _.credential(w,T)}catch(x){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Th=(()=>{class _ extends $s{constructor(){super("github.com")}static credential(p){return Fi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class ls extends us{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return Io(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,Io(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Io(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T,pendingToken:x}=p;return w&&T&&x&&w===T?new ls(w,x):null}static _create(f,p){return new ls(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ic extends Zt{constructor(f){Se(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ic.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ic.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=ls.fromJSON(f);return Se(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:w}=f;if(!p||!w)return null;try{return ls._create(w,p)}catch(T){return null}}}let ds=(()=>{class _ extends $s{constructor(){super("twitter.com")}static credential(p,w){return Fi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=p;if(!w||!T)return null;try{return _.credential(w,T)}catch(x){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Hs(_,f){return er.apply(this,arguments)}function er(){return(er=(0,g.Z)(function*(_,f){return H(_,"POST","/v1/accounts:signUp",It(_,f))})).apply(this,arguments)}class br{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,w,T=!1){return(0,g.Z)(function*(){const x=yield Pr._fromIdTokenResponse(f,w,T),j=cu(w);return new br({user:x,providerId:j,_tokenResponse:w,operationType:p})})()}static _forOperation(f,p,w){return(0,g.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const T=cu(w);return new br({user:f,providerId:T,_tokenResponse:w,operationType:p})})()}}function cu(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Qi(){return(Qi=(0,g.Z)(function*(_){var f;const p=yn(_);if(yield p._initializationPromise,null===(f=p.currentUser)||void 0===f?void 0:f.isAnonymous)return new br({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield Hs(p,{returnSecureToken:!0}),T=yield br._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Do extends F.ZR{constructor(f,p,w,T){var x;super(p.code,p.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,Do.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,p,w,T){return new Do(f,p,w,T)}}function lu(_,f,p,w){return("reauthenticate"===f?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Do._fromErrorAndOperation(_,x,f,w):x})}function dt(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function hs(){return(hs=(0,g.Z)(function*(_,f){const p=(0,F.m9)(_);yield va(!0,p,f);const{providerUserInfo:w}=yield Ct(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=dt(w||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function To(_,f){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(_,f,p=!1){const w=yield gi(_,f._linkToIdToken(_.auth,yield _.getIdToken()),p);return br._forOperation(_,"link",w)})).apply(this,arguments)}function va(_,f,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(_,f,p){yield Mn(f);const T=!1===_?"provider-already-linked":"no-such-provider";Se(dt(f.providerData).has(p)===_,f.auth,T)})).apply(this,arguments)}function Ol(_,f){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(_,f,p=!1){const{auth:w}=_,T="reauthenticate";try{const x=yield gi(_,lu(w,T,f,_),p);Se(x.idToken,w,"internal-error");const j=ha(x.idToken);Se(j,w,"internal-error");const{sub:te}=j;return Se(_.uid===te,w,"user-mismatch"),br._forOperation(_,T,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&gt(w,"user-mismatch"),x}})).apply(this,arguments)}function Bt(_,f){return du.apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(_,f,p=!1){const w="signIn",T=yield lu(_,w,f),x=yield br._fromIdTokenResponse(_,w,T);return p||(yield _._updateCurrentUser(x.user)),x})).apply(this,arguments)}function _n(_,f){return sc.apply(this,arguments)}function sc(){return(sc=(0,g.Z)(function*(_,f){return Bt(yn(_),f)})).apply(this,arguments)}function So(_,f){return _i.apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(_,f){const p=(0,F.m9)(_);return yield va(!1,p,f.providerId),To(p,f)})).apply(this,arguments)}function wa(_,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,g.Z)(function*(_,f){return Ol((0,F.m9)(_),f)})).apply(this,arguments)}function xh(_,f){return oc.apply(this,arguments)}function oc(){return(oc=(0,g.Z)(function*(_,f){return H(_,"POST","/v1/accounts:signInWithCustomToken",It(_,f))})).apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(_,f){const p=yn(_),w=yield xh(p,{token:f,returnSecureToken:!0}),T=yield br._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class tr{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?Lr._fromServerResponse(f,p):gt(f,"internal-error")}}class Lr extends tr{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new Lr(p)}}function xo(_,f,p){var w;Se((null===(w=p.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),Se(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Se(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(Se(p.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function Vi(){return(Vi=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_),T={requestType:"PASSWORD_RESET",email:f};p&&xo(w,T,p),yield _h(w,T)})).apply(this,arguments)}function ac(){return(ac=(0,g.Z)(function*(_,f,p){yield yi((0,F.m9)(_),{oobCode:f,newPassword:p})})).apply(this,arguments)}function Ea(){return(Ea=(0,g.Z)(function*(_,f){yield Eo((0,F.m9)(_),{oobCode:f})})).apply(this,arguments)}function hu(_,f){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,g.Z)(function*(_,f){const p=(0,F.m9)(_),w=yield yi(p,{oobCode:f}),T=w.requestType;switch(Se(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(w.mfaInfo,p,"internal-error");default:Se(w.email,p,"internal-error")}let x=null;return w.mfaInfo&&(x=tr._fromServerResponse(yn(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function uc(){return(uc=(0,g.Z)(function*(_,f){const{data:p}=yield hu((0,F.m9)(_),f);return p.email})).apply(this,arguments)}function cc(){return(cc=(0,g.Z)(function*(_,f,p){const w=yn(_),T=yield Hs(w,{returnSecureToken:!0,email:f,password:p}),x=yield br._fromIdTokenResponse(w,"signIn",T);return yield w._updateCurrentUser(x.user),x})).apply(this,arguments)}function Ca(){return(Ca=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};Se(p.handleCodeInApp,w,"argument-error"),p&&xo(w,T,p),yield vh(w,T)})).apply(this,arguments)}function lc(){return(lc=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_),T=Co.credentialWithLink(f,p||Je());return Se(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),_n(w,T)})).apply(this,arguments)}function Mh(_,f){return wp.apply(this,arguments)}function wp(){return(wp=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:createAuthUri",It(_,f))})).apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(_,f){const w={identifier:f,continueUri:Or()?Je():"http://localhost"},{signinMethods:T}=yield Mh((0,F.m9)(_),w);return T||[]})).apply(this,arguments)}function fu(){return(fu=(0,g.Z)(function*(_,f){const p=(0,F.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&xo(p.auth,T,f);const{email:x}=yield Fm(p.auth,T);x!==_.email&&(yield _.reload())})).apply(this,arguments)}function pu(){return(pu=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};p&&xo(w.auth,x,p);const{email:j}=yield Lm(w.auth,x);j!==_.email&&(yield _.reload())})).apply(this,arguments)}function Oh(_,f){return jn.apply(this,arguments)}function jn(){return(jn=(0,g.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Da(){return(Da=(0,g.Z)(function*(_,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const w=(0,F.m9)(_),x={idToken:yield w.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},j=yield gi(w,Oh(w.auth,x));w.displayName=j.displayName||null,w.photoURL=j.photoUrl||null;const te=w.providerData.find(({providerId:Re})=>"password"===Re);te&&(te.displayName=w.displayName,te.photoURL=w.photoURL),yield w._updateTokensIfNecessary(j)})).apply(this,arguments)}function gu(_,f,p){return hc.apply(this,arguments)}function hc(){return(hc=(0,g.Z)(function*(_,f,p){const{auth:w}=_,x={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(x.email=f),p&&(x.password=p);const j=yield gi(_,gp(w,x));yield _._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class oi{constructor(f,p,w={}){this.isNewUser=f,this.providerId=p,this.profile=w}}class Ta extends oi{constructor(f,p,w,T){super(f,p,w),this.username=T}}class Bm extends oi{constructor(f,p){super(f,"facebook.com",p)}}class Ep extends Ta{constructor(f,p){super(f,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class pr extends oi{constructor(f,p){super(f,"google.com",p)}}class kh extends Ta{constructor(f,p,w){super(f,"twitter.com",p,w)}}function Ip(_){const{user:f,_tokenResponse:p}=_;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function(_){var f,p;if(!_)return null;const{providerId:w}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},x=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const j=null===(p=null===(f=ha(_.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(j)return new oi(x,"anonymous"!==j&&"custom"!==j?j:null)}if(!w)return null;switch(w){case"facebook.com":return new Bm(x,T);case"github.com":return new Ep(x,T);case"google.com":return new pr(x,T);case"twitter.com":return new kh(x,T,_.screenName||null);case"custom":case"anonymous":return new oi(x,null);default:return new oi(x,w,T)}}(p)}class Ui{constructor(f,p){this.type=f,this.credential=p}static _fromIdtoken(f){return new Ui("enroll",f)}static _fromMfaPendingCredential(f){return new Ui("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,w;if(null==f?void 0:f.multiFactorSession){if(null===(p=f.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Ui._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return Ui._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ul{constructor(f,p,w){this.session=f,this.hints=p,this.signInResolver=w}static _fromError(f,p){const w=yn(f),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(te=>tr._fromServerResponse(w,te));Se(T.mfaPendingCredential,w,"internal-error");const j=Ui._fromMfaPendingCredential(T.mfaPendingCredential);return new Ul(j,x,function(){var te=(0,g.Z)(function*(Re){const Ie=yield Re._process(w,j);delete T.mfaInfo,delete T.mfaPendingCredential;const Ke=Object.assign(Object.assign({},T),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(p.operationType){case"signIn":const Ze=yield br._fromIdTokenResponse(w,p.operationType,Ke);return yield w._updateCurrentUser(Ze.user),Ze;case"reauthenticate":return Se(p.user,w,"internal-error"),br._forOperation(p.user,p.operationType,Ke);default:gt(w,"internal-error")}});return function(Re){return te.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,g.Z)(function*(){return p.signInResolver(f)})()}}function Fh(_,f){return qt(_,"POST","/v2/accounts/mfaEnrollment:start",It(_,f))}class vu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>tr._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new vu(f)}getSession(){var f=this;return(0,g.Z)(function*(){return Ui._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,p){var w=this;return(0,g.Z)(function*(){const T=f,x=yield w.getSession(),j=yield gi(w.user,T._process(w.user.auth,x,p));return yield w.user._updateTokensIfNecessary(j),w.user.reload()})()}unenroll(f){var p=this;return(0,g.Z)(function*(){const w="string"==typeof f?f:f.uid,T=yield p.user.getIdToken(),x=yield gi(p.user,function(_,f){return qt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",It(_,f))}(p.user.auth,{idToken:T,mfaEnrollmentId:w}));p.enrolledFactors=p.enrolledFactors.filter(({uid:j})=>j!==w),yield p.user._updateTokensIfNecessary(x);try{yield p.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const Ur=new WeakMap,Er="__sak";class en{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Er,"1"),this.storage.removeItem(Er),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const zs=(()=>{class _ extends en{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,F.z$)();return ga(_)||wr(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Cl(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),x=this.localCache[w];T!==x&&p(w,x,T)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((te,Re,Ie)=>{this.notifyListeners(te,Ie)});const T=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(T);if(p.newValue!==te)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!w)return}const x=()=>{const te=this.storage.getItem(T);!w&&this.localCache[T]===te||this.notifyListeners(T,te)},j=this.storage.getItem(T);(0,F.w1)()&&10===document.documentMode&&j!==p.newValue&&p.newValue!==p.oldValue?setTimeout(x,10):x()}notifyListeners(p,w){this.localCache[p]=w;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var T=()=>super._set,x=this;return(0,g.Z)(function*(){yield T().call(x,p,w),x.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,T=this;return(0,g.Z)(function*(){const x=yield w().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var w=()=>super._remove,T=this;return(0,g.Z)(function*(){yield w().call(T,p),delete T.localCache[p]})()}}return _.type="LOCAL",_})(),vi=(()=>{class _ extends en{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return _.type="SESSION",_})();let gc=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(x=>x.isListeningto(p));if(w)return w;const T=new _(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,g.Z)(function*(){const T=p,{eventId:x,eventType:j,data:te}=T.data,Re=w.handlersMap[j];if(!(null==Re?void 0:Re.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:j});const Ie=Array.from(Re).map(function(){var Ze=(0,g.Z)(function*(jt){return jt(T.origin,te)});return function(jt){return Ze.apply(this,arguments)}}()),Ke=yield function(_){return Promise.all(_.map(function(){var f=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return f.apply(this,arguments)}}()))}(Ie);T.ports[0].postMessage({status:"done",eventId:x,eventType:j,response:Ke})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Oo(_="",f=10){let p="";for(let w=0;w<f;w++)p+=Math.floor(10*Math.random());return _+p}class Ap{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,w=50){var T=this;return(0,g.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let j,te;return new Promise((Re,Ie)=>{const Ke=Oo("",20);x.port1.start();const Ze=setTimeout(()=>{Ie(new Error("unsupported_event"))},w);te={messageChannel:x,onMessage(jt){const Hn=jt;if(Hn.data.eventId===Ke)switch(Hn.data.status){case"ack":clearTimeout(Ze),j=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Re(Hn.data.response);break;default:clearTimeout(Ze),clearTimeout(j),Ie(new Error("invalid_response"))}}},T.handlers.add(te),x.port1.addEventListener("message",te.onMessage),T.target.postMessage({eventType:f,eventId:Ke,data:p},[x.port2])}).finally(()=>{te&&T.removeMessageHandler(te)})})()}}function Qe(){return window}function wu(){return void 0!==Qe().WorkerGlobalScope&&"function"==typeof Qe().importScripts}function Sa(){return(Sa=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Bi="firebaseLocalStorageDb",ms="firebaseLocalStorage",Ks="fbase_key";class ys{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function pe(_,f){return _.transaction([ms],f?"readwrite":"readonly").objectStore(ms)}function bi(){const _=indexedDB.open(Bi,1);return new Promise((f,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(ms,{keyPath:Ks})}catch(T){p(T)}}),_.addEventListener("success",(0,g.Z)(function*(){const w=_.result;w.objectStoreNames.contains(ms)?f(w):(w.close(),yield function(){const _=indexedDB.deleteDatabase(Bi);return new ys(_).toPromise()}(),f(yield bi()))}))})}function Ei(_,f,p){return mt.apply(this,arguments)}function mt(){return(mt=(0,g.Z)(function*(_,f,p){const w=pe(_,!0).put({[Ks]:f,value:p});return new ys(w).toPromise()})).apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(_,f){const p=pe(_,!1).get(f),w=yield new ys(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function qe(_,f){const p=pe(_,!0).delete(f);return new ys(p).toPromise()}const Po=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield bi()),p.db})()}_withRetries(p){var w=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const x=yield w._openDb();return yield p(x)}catch(x){if(T++>3)throw x;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return wu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=gc._getInstance(wu()?self:null),p.receiver._subscribe("keyChanged",function(){var w=(0,g.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,g.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var w,T;if(p.activeServiceWorker=yield function(){return Sa.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Ap(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);!x||(null===(w=x[0])||void 0===w?void 0:w.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,g.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield bi();return yield Ei(p,Er,"1"),yield qe(p,Er),!0}catch(p){}return!1})()}_withPendingWrite(p){var w=this;return(0,g.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(x=>Ei(x,p,w)),T.localCache[p]=w,T.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,g.Z)(function*(){const T=yield w._withRetries(x=>function(_,f){return Xi.apply(this,arguments)}(x,p));return w.localCache[p]=T,T})()}_remove(p){var w=this;return(0,g.Z)(function*(){return w._withPendingWrite((0,g.Z)(function*(){return yield w._withRetries(T=>qe(T,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const w=yield p._withRetries(j=>{const te=pe(j,!1).getAll();return new ys(te).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:j,value:te}of w)x.add(j),JSON.stringify(p.localCache[j])!==JSON.stringify(te)&&(p.notifyListeners(j,te),T.push(j));for(const j of Object.keys(p.localCache))p.localCache[j]&&!x.has(j)&&(p.notifyListeners(j,null),T.push(j));return T})()}notifyListeners(p,w){this.localCache[p]=w;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function _c(_,f){return qt(_,"POST","/v2/accounts/mfaSignIn:start",It(_,f))}function wc(){return(wc=(0,g.Z)(function*(_){return(yield qt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function jl(_){return new Promise((f,p)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=f,w.onerror=T=>{const x=Rn("internal-error");x.customData=T,p(x)},w.type="text/javascript",w.charset="UTF-8",function(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(w)})}function $n(_){return`__${_}${Math.floor(1e6*Math.random())}`}const _s=1e12;class zn{constructor(f){this.auth=f,this.counter=_s,this._widgets=new Map}render(f,p){const w=this.counter;return this._widgets.set(w,new bc(f,this.auth.name,p||{})),this.counter++,w}reset(f){var p;const w=f||_s;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(f){var p;return(null===(p=this._widgets.get(f||_s))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,g.Z)(function*(){var w;return null===(w=p._widgets.get(f||_s))||void 0===w||w.execute(),""})()}}class bc{constructor(f,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;Se(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}();const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zs=$n("rcb"),jh=new tt(3e4,6e4);class Ii{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Qe().grecaptcha}load(f,p=""){return Se((_=p).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Qe().grecaptcha):new Promise((w,T)=>{const x=Qe().setTimeout(()=>{T(Rn(f,"network-request-failed"))},jh.get());Qe()[Zs]=()=>{Qe().clearTimeout(x),delete Qe()[Zs];const te=Qe().grecaptcha;if(!te)return void T(Rn(f,"internal-error"));const Re=te.render;te.render=(Ie,Ke)=>{const Ze=Re(Ie,Ke);return this.counter++,Ze},this.hostLanguage=p,w(te)},jl(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Zs,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(Rn(f,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Qe().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ys{load(f){return(0,g.Z)(function*(){return new zn(f)})()}clearedOneInstance(){}}const Qt="recaptcha",$l={theme:"light",type:"image"};class Br{constructor(f,p=Object.assign({},$l),w){this.parameters=p,this.type=Qt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(w),this.isInvisible="invisible"===this.parameters.size,Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;Se(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ys:new Ii,this.validateStartingState()}verify(){var f=this;return(0,g.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(p)||new Promise(x=>{const j=te=>{!te||(f.tokenChangeListeners.delete(j),x(te))};f.tokenChangeListeners.add(j),f.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof f)f(p);else if("string"==typeof f){const w=Qe()[f];"function"==typeof w&&w(p)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,g.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,g.Z)(function*(){Se(Or()&&!wu(),f.auth,"internal-error"),yield function(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function(_){return wc.apply(this,arguments)}(f.auth);Se(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gl{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=Yi._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function Ec(){return(Ec=(0,g.Z)(function*(_,f,p){const w=yn(_),T=yield Q(w,f,(0,F.m9)(p));return new Gl(T,x=>_n(w,x))})).apply(this,arguments)}function A(){return(A=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_);yield va(!1,w,"phone");const T=yield Q(w.auth,f,(0,F.m9)(p));return new Gl(T,x=>So(w,x))})).apply(this,arguments)}function U(){return(U=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_),T=yield Q(w.auth,f,(0,F.m9)(p));return new Gl(T,x=>wa(w,x))})).apply(this,arguments)}function Q(_,f,p){return re.apply(this,arguments)}function re(){return(re=(0,g.Z)(function*(_,f,p){var w;const T=yield p.verify();try{let x;if(Se("string"==typeof T,_,"argument-error"),Se(p.type===Qt,_,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const j=x.session;if("phoneNumber"in x)return Se("enroll"===j.type,_,"internal-error"),(yield Fh(_,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Se("signin"===j.type,_,"internal-error");const te=(null===(w=x.multiFactorHint)||void 0===w?void 0:w.uid)||x.multiFactorUid;return Se(te,_,"missing-multi-factor-info"),(yield _c(_,{mfaPendingCredential:j.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield au(_,{phoneNumber:x.phoneNumber,recaptchaToken:T});return j}}finally{p._reset()}})).apply(this,arguments)}function Ge(){return(Ge=(0,g.Z)(function*(_,f){yield To((0,F.m9)(_),f)})).apply(this,arguments)}let lt=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=yn(p)}verifyPhoneNumber(p,w){return Q(this.auth,p,(0,F.m9)(w))}static credential(p,w){return Yi._fromVerification(p,w)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:T}=p;return w&&T?Yi._fromTokenResponse(w,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function ut(_,f){return f?cn(f):(Se(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class kt extends us{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Io(f,this._buildIdpRequest())}_linkToIdToken(f,p){return Io(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return Io(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function pt(_){return Bt(_.auth,new kt(_),_.bypassAuthState)}function nr(_){const{auth:f,user:p}=_;return Se(p,f,"internal-error"),Ol(p,new kt(_),_.bypassAuthState)}function Kn(_){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,g.Z)(function*(_){const{auth:f,user:p}=_;return Se(p,f,"internal-error"),To(p,new kt(_),_.bypassAuthState)})).apply(this,arguments)}class Na{constructor(f,p,w,T,x=!1){this.auth=f,this.resolver=w,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,g.Z)(function*(w,T){f.pendingPromise={resolve:w,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(w,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,g.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:x,tenantId:j,error:te,type:Re}=f;if(te)return void p.reject(te);const Ie={auth:p.auth,requestUri:w,sessionId:T,tenantId:j||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Re)(Ie))}catch(Ke){p.reject(Ke)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return pt;case"linkViaPopup":case"linkViaRedirect":return Kn;case"reauthViaPopup":case"reauthViaRedirect":return nr;default:gt(this.auth,"internal-error")}}resolve(f){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const es=new tt(2e3,1e4);function ws(){return(ws=(0,g.Z)(function*(_,f,p){const w=yn(_);qn(_,f,Zt);const T=ut(w,p);return new Iu(w,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function ql(){return(ql=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_);qn(w.auth,f,Zt);const T=ut(w.auth,p);return new Iu(w.auth,"reauthViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}function ko(){return(ko=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_);qn(w.auth,f,Zt);const T=ut(w.auth,p);return new Iu(w.auth,"linkViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}let Iu=(()=>{class _ extends Na{constructor(p,w,T,x,j){super(p,w,x,j),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const w=yield p.execute();return Se(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,g.Z)(function*(){Ln(1===p.filter.length,"Popup operations only handle one event");const w=Oo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(Rn(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,T;this.pollId=(null===(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,es.get())};p()}}return _.currentPopupAction=null,_})();const Wl=new Map;class Zn extends Na{constructor(f,p,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,g.Z)(function*(){let w=Wl.get(p.auth._key());if(!w){try{const x=(yield function(_,f){return Kl.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;w=()=>Promise.resolve(x)}catch(T){w=()=>Promise.reject(T)}Wl.set(p.auth._key(),w)}return p.bypassAuthState||Wl.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,w=this;return(0,g.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(w,f);if("unknown"!==f.type){if(f.eventId){const T=yield w.auth._redirectUserForId(f.eventId);if(T)return w.user=T,p().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Kl(){return(Kl=(0,g.Z)(function*(_,f){const p=Hm(f),w=Gh(_);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(p));return yield w._remove(p),T})).apply(this,arguments)}function bs(_,f){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(_,f){return Gh(_)._set(Hm(f),"true")})).apply(this,arguments)}function Ic(_,f){Wl.set(_._key(),f)}function Gh(_){return cn(_._redirectPersistence)}function Hm(_){return Xt("pendingRedirect",_.config.apiKey,_.name)}function Cu(){return(Cu=(0,g.Z)(function*(_,f,p){const w=yn(_);qn(_,f,Zt);const T=ut(w,p);return yield bs(T,w),T._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function qh(){return(qh=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_);qn(w.auth,f,Zt);const T=ut(w.auth,p);yield bs(T,w.auth);const x=yield qm(w);return T._openRedirect(w.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(_,f,p){const w=(0,F.m9)(_);qn(w.auth,f,Zt);const T=ut(w.auth,p);yield va(!1,w,f.providerId),yield bs(T,w.auth);const x=yield qm(w);return T._openRedirect(w.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function rr(){return(rr=(0,g.Z)(function*(_,f){return yield yn(_)._initializationPromise,ts(_,f,!1)})).apply(this,arguments)}function ts(_,f){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,g.Z)(function*(_,f,p=!1){const w=yn(_),T=ut(w,f),j=yield new Zn(w,T,p).execute();return j&&!p&&(delete j.user._redirectEventId,yield w._persistUserIfCurrent(j.user),yield w._setRedirectUser(null,f)),j})).apply(this,arguments)}function qm(_){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,g.Z)(function*(_){const f=Oo(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class zm{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(p=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wh(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var w;if(f.error&&!Wh(f)){const T=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(Rn(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const w=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sv(f))}saveEventToCache(f){this.cachedEventUids.add(Sv(f)),this.lastProcessedEventTime=Date.now()}}function Sv(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Wh({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Km(_){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,g.Z)(function*(_,f={}){return qt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const zh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ac=/^https?/;function Yl(){return(Yl=(0,g.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Km(_);for(const p of f)try{if(Zm(p))return}catch(w){}gt(_,"unauthorized-domain")})).apply(this,arguments)}function Zm(_){const f=Je(),{protocol:p,hostname:w}=new URL(f);if(_.startsWith("chrome-extension://")){const j=new URL(_);return""===j.hostname&&""===w?"chrome-extension:"===p&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&j.hostname===w}if(!Ac.test(p))return!1;if(zh.test(_))return w===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const Ql=new tt(3e4,6e4);function Zh(){const _=Qe().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let xc=null;function Rp(_){return xc=xc||function(_){return new Promise((f,p)=>{var w,T,x;function j(){Zh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Zh(),p(Rn(_,"network-request-failed"))},timeout:Ql.get()})}if(null===(T=null===(w=Qe().gapi)||void 0===w?void 0:w.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(x=Qe().gapi)||void 0===x?void 0:x.load)){const te=$n("iframefcb");return Qe()[te]=()=>{gapi.load?j():p(Rn(_,"network-request-failed"))},jl(`https://apis.google.com/js/api.js?onload=${te}`).catch(Re=>p(Re))}j()}}).catch(f=>{throw xc=null,f})}(_),xc}const Ma=new tt(5e3,15e3),Nv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rv(_){const f=_.config;Se(f.authDomain,_,"auth-domain-config-required");const p=f.emulator?rt(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:_.name,v:ce.SDK_VERSION},T=Nc.get(_.config.apiHost);T&&(w.eid=T);const x=_._getFrameworks();return x.length&&(w.fw=x.join(",")),`${p}?${(0,F.xO)(w).slice(1)}`}function Di(){return(Di=(0,g.Z)(function*(_){const f=yield Rp(_),p=Qe().gapi;return Se(p,_,"internal-error"),f.open({where:document.body,url:Rv(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nv,dontclear:!0},w=>new Promise(function(){var T=(0,g.Z)(function*(x,j){yield w.restyle({setHideOnLeave:!1});const te=Rn(_,"network-request-failed"),Re=Qe().setTimeout(()=>{j(te)},Ma.get());function Ie(){Qe().clearTimeout(Re),x(w)}w.ping(Ie).then(Ie,()=>{j(te)})});return function(x,j){return T.apply(this,arguments)}}()))})).apply(this,arguments)}const Mp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jr{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ed(_,f,p,w,T,x){Se(_.config.authDomain,_,"auth-domain-config-required"),Se(_.config.apiKey,_,"invalid-api-key");const j={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:w,v:ce.SDK_VERSION,eventId:T};if(f instanceof Zt){f.setDefaultLanguage(_.languageCode),j.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Re,Ie]of Object.entries(x||{}))j[Re]=Ie}if(f instanceof $s){const Re=f.getScopes().filter(Ie=>""!==Ie);Re.length>0&&(j.scopes=Re.join(","))}_.tenantId&&(j.tid=_.tenantId);const te=j;for(const Re of Object.keys(te))void 0===te[Re]&&delete te[Re];return`${function({config:_}){return _.emulator?rt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,F.xO)(te).slice(1)}`}const Xh="webStorageSupport";class Bo extends class{constructor(f){this.factorId=f}_process(f,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,w);case"signin":return this._finalizeSignIn(f,p.credential);default:return hr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Bo(f)}_finalizeEnroll(f,p,w){return function(_,f){return qt(_,"POST","/v2/accounts/mfaEnrollment:finalize",It(_,f))}(f,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function(_,f){return qt(_,"POST","/v2/accounts/mfaSignIn:finalize",It(_,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nd=(()=>{class _{constructor(){}static assertion(p){return Bo._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var _,Du="@firebase/auth";class hE{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(w=>{var T;f((null===(T=w)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function eo(){return window}function ey(){return(ey=(0,g.Z)(function*(_,f,p){var w;const{BuildInfo:T}=eo();Ln(f.sessionId,"AuthEvent did not contain a session ID");const x=yield af(f.sessionId),j={};return wr()?j.ibi=T.packageName:kr()?j.apn=T.packageName:gt(_,"operation-not-supported-in-this-environment"),T.displayName&&(j.appDisplayName=T.displayName),j.sessionId=x,ed(_,p,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,j)})).apply(this,arguments)}function rf(){return(rf=(0,g.Z)(function*(_){const{BuildInfo:f}=eo(),p={};wr()?p.iosBundleId=f.packageName:kr()?p.androidPackageName=f.packageName:gt(_,"operation-not-supported-in-this-environment"),yield Km(_,p)})).apply(this,arguments)}function jo(){return(jo=(0,g.Z)(function*(_,f,p){const{cordova:w}=eo();let T=()=>{};try{yield new Promise((x,j)=>{let te=null;function Re(){var Ze;x();const jt=null===(Ze=w.plugins.browsertab)||void 0===Ze?void 0:Ze.close;"function"==typeof jt&&jt(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ie(){te||(te=window.setTimeout(()=>{j(Rn(_,"redirect-cancelled-by-user"))},2e3))}function Ke(){"visible"===(null==document?void 0:document.visibilityState)&&Ie()}f.addPassiveListener(Re),document.addEventListener("resume",Ie,!1),kr()&&document.addEventListener("visibilitychange",Ke,!1),T=()=>{f.removePassiveListener(Re),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",Ke,!1),te&&window.clearTimeout(te)}})}finally{T()}})).apply(this,arguments)}function af(_){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,g.Z)(function*(_){const f=Oa(_),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Oa(_){if(Ln(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),p=new Uint8Array(f);for(let w=0;w<_.length;w++)p[w]=_.charCodeAt(w);return p}_="Browser",(0,ce._registerComponent)(new Dn.wA("auth",(f,{options:p})=>{const w=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:x,authDomain:j}=w.options;return((te,Re)=>{Se(x&&!x.includes(":"),"invalid-api-key",{appName:te.name}),Se(!(null==j?void 0:j.includes(":")),"argument-error",{appName:te.name});const Ie={apiKey:x,authDomain:j,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tl(_)},Ke=new js(te,Re,Ie);return function(_,f){const p=(null==f?void 0:f.persistence)||[],w=(Array.isArray(p)?p:[p]).map(cn);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(Ke,p),Ke})(w,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,w)=>{f.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new Dn.wA("auth-internal",f=>{const p=yn(f.getProvider("auth").getImmediate());return new hE(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Du,"0.20.2",void 0),(0,ce.registerVersion)(Du,"0.20.2","esm2017");class on extends zm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,g.Z)(function*(){yield f.initPromise})()}}function to(_){return rs.apply(this,arguments)}function rs(){return(rs=(0,g.Z)(function*(_){const f=yield Oc()._get(lf(_));return f&&(yield Oc()._remove(lf(_))),f})).apply(this,arguments)}function cf(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*f.length);_.push(f.charAt(w))}return _.join("")}function Oc(){return cn(zs)}function lf(_){return Xt("authEvent",_.config.apiKey,_.name)}function Lp(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...p]=_.split("?");return(0,F.zd)(p.join("?"))}function Vp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rn("no-auth-event")}}function od(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function no(_=(0,F.z$)()){return!("file:"!==od()&&"ionic:"!==od()&&"capacitor:"!==od()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function iy(){try{const _=self.localStorage,f=Oo();if(_)return _.setItem(f,"1"),_.removeItem(f),!function(_=(0,F.z$)()){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,F.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,F.hl)()}catch(_){return $p()&&(0,F.hl)()}return!1}function $p(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function df(){return("http:"===od()||"https:"===od()||(0,F.ru)()||no())&&!((0,F.b$)()||(0,F.UG)())&&iy()&&!$p()}function Hp(){return no()&&"undefined"!=typeof document}function ud(){return(ud=(0,g.Z)(function*(){return!!Hp()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},Su=Se,Pc="persistence";function Wp(_){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,g.Z)(function*(_){yield _._initializationPromise;const f=cd(),p=Xt(Pc,_.config.apiKey,_.name);f&&f.setItem(p,_._getPersistence())})).apply(this,arguments)}function cd(){var _;try{return(null===(_="undefined"!=typeof window?window:null)||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const ld=Se;class Es{constructor(){this.browserResolver=cn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vi,this._completeRedirectFn=ts,this._overrideRedirectResult=Ic}_openPopup(f,p,w,T){var x=this;return(0,g.Z)(function*(){var j;Ln(null===(j=x.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const te=ed(f,p,w,Je(),T);return function(_,f,p,w=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),j=Math.max((window.screen.availWidth-w)/2,0).toString();let te="";const Re=Object.assign(Object.assign({},Mp),{width:w.toString(),height:T.toString(),top:x,left:j}),Ie=(0,F.z$)().toLowerCase();p&&(te=Bs(Ie)?"_blank":p),Tt(Ie)&&(f=f||"http://localhost",Re.scrollbars="yes");const Ke=Object.entries(Re).reduce((jt,[Hn,so])=>`${jt}${Hn}=${so},`,"");if(function(_=(0,F.z$)()){var f;return wr(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ie)&&"_self"!==te)return function(_,f){const p=document.createElement("a");p.href=_,p.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(f||"",te),new jr(null);const Ze=window.open(f||"",te,Ke);Se(Ze,_,"popup-blocked");try{Ze.focus()}catch(jt){}return new jr(Ze)}(f,te,Oo())})()}_openRedirect(f,p,w,T){var x=this;return(0,g.Z)(function*(){return yield x._originValidation(f),_=ed(f,p,w,Je(),T),Qe().location.href=_,new Promise(()=>{});var _})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(Ln(x,"If manager is not set, promise should be"),x)}const w=this.initAndGetManager(f);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(f){var p=this;return(0,g.Z)(function*(){const w=yield function(_){return Di.apply(this,arguments)}(f),T=new zm(f);return w.register("authEvent",x=>(Se(null==x?void 0:x.authEvent,f,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=w,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Xh,{type:Xh},T=>{var x;const j=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[Xh];void 0!==j&&p(!!j),gt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return Yl.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Cl()||ga()||wr()}}),this.cordovaResolver=cn(class{constructor(){this._redirectPersistence=vi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ts,this._overrideRedirectResult=Ic}_initialize(f){var p=this;return(0,g.Z)(function*(){const w=f._key();let T=p.eventManagers.get(w);return T||(T=new on(f),p.eventManagers.set(w,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){gt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,w,T){var x=this;return(0,g.Z)(function*(){!function(_){var f,p,w,T,x,j,te,Re,Ie,Ke;const Ze=eo();Se("function"==typeof(null===(f=null==Ze?void 0:Ze.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Se(void 0!==(null===(p=null==Ze?void 0:Ze.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Se("function"==typeof(null===(x=null===(T=null===(w=null==Ze?void 0:Ze.cordova)||void 0===w?void 0:w.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(Re=null===(te=null===(j=null==Ze?void 0:Ze.cordova)||void 0===j?void 0:j.plugins)||void 0===te?void 0:te.browsertab)||void 0===Re?void 0:Re.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(Ke=null===(Ie=null==Ze?void 0:Ze.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===Ke?void 0:Ke.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield x._initialize(f);yield j.initialized(),j.resetRedirect(),Wl.clear(),yield x._originValidation(f);const te=function(_,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:cf(),postBody:null,tenantId:_.tenantId,error:Rn(_,"no-auth-event")}}(f,w,T);yield function(_,f){return Oc()._set(lf(_),f)}(f,te);const Re=yield function(_,f,p){return ey.apply(this,arguments)}(f,te,p),Ie=yield function(_){const{cordova:f}=eo();return new Promise(p=>{f.plugins.browsertab.isAvailable(w=>{let T=null;w?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function(_=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(T)})})}(Re);return function(_,f,p){return jo.apply(this,arguments)}(f,j,Ie)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return rf.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:w,handleOpenURL:T,BuildInfo:x}=eo(),j=setTimeout((0,g.Z)(function*(){yield to(f),p.onEvent(Vp())}),500),te=function(){var Ke=(0,g.Z)(function*(Ze){clearTimeout(j);const jt=yield to(f);let Hn=null;jt&&(null==Ze?void 0:Ze.url)&&(Hn=function(_,f){var p,w;const T=function(_){const f=Lp(_),p=f.link?decodeURIComponent(f.link):void 0,w=Lp(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Lp(T).link||T||w||p||_}(f);if(T.includes("/__/auth/callback")){const x=Lp(T),j=x.firebaseError?function(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(x.firebaseError)):null,te=null===(w=null===(p=null==j?void 0:j.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Re=te?Rn(te):null;return Re?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(jt,Ze.url)),p.onEvent(Hn||Vp())});return function(jt){return Ke.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,te);const Re=T,Ie=`${x.packageName.toLowerCase()}://`;eo().handleOpenURL=function(){var Ke=(0,g.Z)(function*(Ze){if(Ze.toLowerCase().startsWith(Ie)&&te({url:Ze}),"function"==typeof Re)try{Re(Ze)}catch(jt){console.error(jt)}});return function(Ze){return Ke.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=vi,this._completeRedirectFn=ts,this._overrideRedirectResult=Ic}_initialize(f){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,w,T){var x=this;return(0,g.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,p,w,T)})()}_openRedirect(f,p,w,T){var x=this;return(0,g.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,p,w,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Hp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ld(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,g.Z)(function*(){if(f.underlyingResolver)return;const p=yield function(){return ud.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function ff(_){return _.unwrap()}function Hr(_){return sy(_)}function sy(_){const{_tokenResponse:f}=_ instanceof F.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return lt.credentialFromResult(_);const p=f.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=Pt;break;case"facebook.com":w=Dh;break;case"github.com":w=Th;break;case"twitter.com":w=ds;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:j,pendingToken:te,nonce:Re}=f;return x||j||T||te?te?p.startsWith("saml.")?ls._create(p,te):Fi._fromParams({providerId:p,signInMethod:p,pendingToken:te,idToken:T,accessToken:x}):new cs(p).credential({idToken:T,accessToken:x,rawNonce:Re}):null}return _ instanceof F.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function zt(_,f){return f.catch(p=>{throw p instanceof F.ZR&&function(_,f){var p;const w=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new ay(_,function(_,f){var p;const w=(0,F.m9)(_),T=f;return Se(f.customData.operationType,w,"argument-error"),Se(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),Ul._fromError(w,T)}(_,f));else if(w){const T=sy(f),x=f;T&&(x.credential=T,x.tenantId=w.tenantId||void 0,x.email=w.email||void 0,x.phoneNumber=w.phoneNumber||void 0)}}(_,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Hr(p),additionalUserInfo:Ip(p),user:$o.getOrCreate(T)}})}function hd(_,f){return oy.apply(this,arguments)}function oy(){return(oy=(0,g.Z)(function*(_,f){const p=yield f;return{verificationId:p.verificationId,confirm:w=>zt(_,p.confirm(w))}})).apply(this,arguments)}class ay{constructor(f,p){this.resolver=p,this.auth=function(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return zt(ff(this.auth),this.resolver.resolveSignIn(f))}}class $o{constructor(f){this._delegate=f,this.multiFactor=function(_){const f=(0,F.m9)(_);return Ur.has(f)||Ur.set(f,vu._fromUser(f)),Ur.get(f)}(f)}static getOrCreate(f){return $o.USER_MAP.has(f)||$o.USER_MAP.set(f,new $o(f)),$o.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,g.Z)(function*(){return zt(p.auth,So(p._delegate,f))})()}linkWithPhoneNumber(f,p){var w=this;return(0,g.Z)(function*(){return hd(w.auth,function(_,f,p){return A.apply(this,arguments)}(w._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,g.Z)(function*(){return zt(p.auth,function(_,f,p){return ko.apply(this,arguments)}(p._delegate,f,Es))})()}linkWithRedirect(f){var p=this;return(0,g.Z)(function*(){return yield Wp(yn(p.auth)),function(_,f,p){return function(_,f,p){return Tc.apply(this,arguments)}(_,f,p)}(p._delegate,f,Es)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,g.Z)(function*(){return zt(p.auth,wa(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return hd(this.auth,function(_,f,p){return U.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return zt(this.auth,function(_,f,p){return ql.apply(this,arguments)}(this._delegate,f,Es))}reauthenticateWithRedirect(f){var p=this;return(0,g.Z)(function*(){return yield Wp(yn(p.auth)),function(_,f,p){return function(_,f,p){return qh.apply(this,arguments)}(_,f,p)}(p._delegate,f,Es)})()}sendEmailVerification(f){return function(_,f){return fu.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,g.Z)(function*(){return yield function(_,f){return hs.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function(_,f){return gu((0,F.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function(_,f){return gu((0,F.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(_,f){return Ge.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(_,f){return Da.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function(_,f,p){return pu.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$o.USER_MAP=new WeakMap;const fd=Se;let zp=(()=>{class _{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;fd(T,"invalid-api-key",{appName:p.name}),fd(T,"invalid-api-key",{appName:p.name});const x="undefined"!=typeof window?Es:void 0;this._delegate=w.initialize({options:{persistence:Is(T,p.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(vo),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$o.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function(_,f,p){const w=yn(_);Se(w._canInitEmulator,w,"emulator-config-failed"),Se(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),x=Ki(f),{host:j,port:te}=function(_){const f=Ki(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const x=T[1];return{host:x,port:Xu(w.substr(x.length+1))}}{const[x,j]=w.split(":");return{host:x,port:Xu(j)}}}(f);w.config.emulator={url:`${x}//${j}${null===te?"":`:${te}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:j,port:te,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function(){function _(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,w)}applyActionCode(p){return function(_,f){return Ea.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return hu(this._delegate,p)}confirmPasswordReset(p,w){return function(_,f,p){return ac.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var T=this;return(0,g.Z)(function*(){return zt(T._delegate,function(_,f,p){return cc.apply(this,arguments)}(T._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function(_,f){return si.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function(_,f){const p=Li.parseLink(f);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){fd(df(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function(_,f){return rr.apply(this,arguments)}(p._delegate,Es);return w?zt(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function(_,f){yn(_)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,w,T){const{next:x,error:j,complete:te}=ka(p,w,T);return this._delegate.onAuthStateChanged(x,j,te)}onIdTokenChanged(p,w,T){const{next:x,error:j,complete:te}=ka(p,w,T);return this._delegate.onIdTokenChanged(x,j,te)}sendSignInLinkToEmail(p,w){return function(_,f,p){return Ca.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function(_,f,p){return Vi.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,g.Z)(function*(){let T;switch(function(_,f){Su(Object.values(Ti).includes(f),_,"invalid-persistence-type"),(0,F.b$)()?Su(f!==Ti.SESSION,_,"unsupported-persistence-type"):(0,F.UG)()?Su(f===Ti.NONE,_,"unsupported-persistence-type"):$p()?Su(f===Ti.NONE||f===Ti.LOCAL&&(0,F.hl)(),_,"unsupported-persistence-type"):Su(f===Ti.NONE||iy(),_,"unsupported-persistence-type")}(w._delegate,p),p){case Ti.SESSION:T=vi;break;case Ti.LOCAL:T=(yield cn(Po)._isAvailable())?Po:zs;break;case Ti.NONE:T=fr;break;default:return gt("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return zt(this._delegate,function(_){return Qi.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return zt(this._delegate,_n(this._delegate,p))}signInWithCustomToken(p){return zt(this._delegate,function(_,f){return Ji.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return zt(this._delegate,function(_,f,p){return _n((0,F.m9)(_),Co.credential(f,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return zt(this._delegate,function(_,f,p){return lc.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return hd(this._delegate,function(_,f,p){return Ec.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,g.Z)(function*(){return fd(df(),w._delegate,"operation-not-supported-in-this-environment"),zt(w._delegate,function(_,f,p){return ws.apply(this,arguments)}(w._delegate,p,Es))})()}signInWithRedirect(p){var w=this;return(0,g.Z)(function*(){return fd(df(),w._delegate,"operation-not-supported-in-this-environment"),yield Wp(w._delegate),function(_,f,p){return function(_,f,p){return Cu.apply(this,arguments)}(_,f,p)}(w._delegate,p,Es)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function(_,f){return uc.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Ti,_})();function ka(_,f,p){let w=_;"function"!=typeof _&&({next:w,error:f,complete:p}=_);const T=w;return{next:j=>T(j&&$o.getOrCreate(j)),error:f,complete:p}}function Is(_,f){const p=function(_,f){const p=cd();if(!p)return[];const w=Xt(Pc,_,f);switch(p.getItem(w)){case Ti.NONE:return[fr];case Ti.LOCAL:return[Po,vi];case Ti.SESSION:return[vi];default:return[]}}(_,f);if("undefined"!=typeof self&&!p.includes(Po)&&p.push(Po),"undefined"!=typeof window)for(const w of[zs,vi])p.includes(w)||p.push(w);return p.includes(fr)||p.push(fr),p}class pd{constructor(){this.providerId="phone",this._delegate=new lt(ff(ee.Z.auth()))}static credential(f,p){return lt.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}pd.PHONE_SIGN_IN_METHOD=lt.PHONE_SIGN_IN_METHOD,pd.PROVIDER_ID=lt.PROVIDER_ID;const Fv=Se;class ro{constructor(f,p,w=ee.Z.app()){var T;Fv(null===(T=w.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Br(f,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new Dn.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new zp(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Co,FacebookAuthProvider:Dh,GithubAuthProvider:Th,GoogleAuthProvider:Pt,OAuthProvider:cs,SAMLAuthProvider:ic,PhoneAuthProvider:pd,PhoneMultiFactorGenerator:nd,RecaptchaVerifier:ro,TwitterAuthProvider:ds,Auth:zp,AuthCredential:us,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.15")}(ee.Z)},7574:(We,ye,k)=>{"use strict";k.d(ye,{y:()=>V});var g=k(7393),F=k(9181),ce=k(6490),oe=k(6554),ve=k(4487);var L=k(2494);let V=(()=>{class Y{constructor(be){this._isScalar=!1,be&&(this._subscribe=be)}lift(be){const ge=new Y;return ge.source=this,ge.operator=be,ge}subscribe(be,ge,fe){const{operator:Ae}=this,Ne=function(Y,de,be){if(Y){if(Y instanceof g.L)return Y;if(Y[F.b])return Y[F.b]()}return Y||de||be?new g.L(Y,de,be):new g.L(ce.c)}(be,ge,fe);if(Ne.add(Ae?Ae.call(Ne,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!Ne.syncErrorThrowable?this._subscribe(Ne):this._trySubscribe(Ne)),L.v.useDeprecatedSynchronousErrorHandling&&Ne.syncErrorThrowable&&(Ne.syncErrorThrowable=!1,Ne.syncErrorThrown))throw Ne.syncErrorValue;return Ne}_trySubscribe(be){try{return this._subscribe(be)}catch(ge){L.v.useDeprecatedSynchronousErrorHandling&&(be.syncErrorThrown=!0,be.syncErrorValue=ge),function(Y){for(;Y;){const{closed:de,destination:be,isStopped:ge}=Y;if(de||ge)return!1;Y=be&&be instanceof g.L?be:null}return!0}(be)?be.error(ge):console.warn(ge)}}forEach(be,ge){return new(ge=J(ge))((fe,Ae)=>{let Ne;Ne=this.subscribe(De=>{try{be(De)}catch(He){Ae(He),Ne&&Ne.unsubscribe()}},Ae,fe)})}_subscribe(be){const{source:ge}=this;return ge&&ge.subscribe(be)}[oe.L](){return this}pipe(...be){return 0===be.length?this:function(Y){return 0===Y.length?ve.y:1===Y.length?Y[0]:function(be){return Y.reduce((ge,fe)=>fe(ge),be)}}(be)(this)}toPromise(be){return new(be=J(be))((ge,fe)=>{let Ae;this.subscribe(Ne=>Ae=Ne,Ne=>fe(Ne),()=>ge(Ae))})}}return Y.create=de=>new Y(de),Y})();function J(Y){if(Y||(Y=L.v.Promise||Promise),!Y)throw new Error("no Promise impl found");return Y}},6490:(We,ye,k)=>{"use strict";k.d(ye,{c:()=>F});var g=k(2494),ee=k(4449);const F={closed:!0,next(ce){},error(ce){if(g.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,ee.z)(ce)},complete(){}}},9765:(We,ye,k)=>{"use strict";k.d(ye,{Yc:()=>ve,xQ:()=>le});var g=k(7574),ee=k(7393),F=k(5319),ce=k(7971),se=k(8858),oe=k(9181);class ve extends ee.L{constructor(V){super(V),this.destination=V}}let le=(()=>{class L extends g.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[oe.b](){return new ve(this)}lift(J){const Y=new ne(this,this);return Y.operator=J,Y}next(J){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:Y}=this,de=Y.length,be=Y.slice();for(let ge=0;ge<de;ge++)be[ge].next(J)}}error(J){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=J,this.isStopped=!0;const{observers:Y}=this,de=Y.length,be=Y.slice();for(let ge=0;ge<de;ge++)be[ge].error(J);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:J}=this,Y=J.length,de=J.slice();for(let be=0;be<Y;be++)de[be].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(J){if(this.closed)throw new ce.N;return super._trySubscribe(J)}_subscribe(J){if(this.closed)throw new ce.N;return this.hasError?(J.error(this.thrownError),F.w.EMPTY):this.isStopped?(J.complete(),F.w.EMPTY):(this.observers.push(J),new se.W(this,J))}asObservable(){const J=new g.y;return J.source=this,J}}return L.create=(V,J)=>new ne(V,J),L})();class ne extends le{constructor(V,J){super(),this.destination=V,this.source=J}next(V){const{destination:J}=this;J&&J.next&&J.next(V)}error(V){const{destination:J}=this;J&&J.error&&this.destination.error(V)}complete(){const{destination:V}=this;V&&V.complete&&this.destination.complete()}_subscribe(V){const{source:J}=this;return J?this.source.subscribe(V):F.w.EMPTY}}},8858:(We,ye,k)=>{"use strict";k.d(ye,{W:()=>ee});var g=k(5319);class ee extends g.w{constructor(ce,se){super(),this.subject=ce,this.subscriber=se,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,se=ce.observers;if(this.subject=null,!se||0===se.length||ce.isStopped||ce.closed)return;const oe=se.indexOf(this.subscriber);-1!==oe&&se.splice(oe,1)}}},7393:(We,ye,k)=>{"use strict";k.d(ye,{L:()=>ve});var g=k(9105),ee=k(6490),F=k(5319),ce=k(9181),se=k(2494),oe=k(4449);class ve extends F.w{constructor(L,V,J){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ee.c;break;case 1:if(!L){this.destination=ee.c;break}if("object"==typeof L){L instanceof ve?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new le(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new le(this,L,V,J)}}[ce.b](){return this}static create(L,V,J){const Y=new ve(L,V,J);return Y.syncErrorThrowable=!1,Y}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class le extends ve{constructor(L,V,J,Y){super(),this._parentSubscriber=L;let de,be=this;(0,g.m)(V)?de=V:V&&(de=V.next,J=V.error,Y=V.complete,V!==ee.c&&(be=Object.create(V),(0,g.m)(be.unsubscribe)&&this.add(be.unsubscribe.bind(be)),be.unsubscribe=this.unsubscribe.bind(this))),this._context=be,this._next=de,this._error=J,this._complete=Y}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:V}=this;se.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?this.__tryOrSetError(V,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:V}=this,{useDeprecatedSynchronousErrorHandling:J}=se.v;if(this._error)J&&V.syncErrorThrowable?(this.__tryOrSetError(V,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(V.syncErrorThrowable)J?(V.syncErrorValue=L,V.syncErrorThrown=!0):(0,oe.z)(L),this.unsubscribe();else{if(this.unsubscribe(),J)throw L;(0,oe.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const V=()=>this._complete.call(this._context);se.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,V),this.unsubscribe()):(this.__tryOrUnsub(V),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,V){try{L.call(this._context,V)}catch(J){if(this.unsubscribe(),se.v.useDeprecatedSynchronousErrorHandling)throw J;(0,oe.z)(J)}}__tryOrSetError(L,V,J){if(!se.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{V.call(this._context,J)}catch(Y){return se.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=Y,L.syncErrorThrown=!0,!0):((0,oe.z)(Y),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(We,ye,k)=>{"use strict";k.d(ye,{w:()=>oe});var g=k(9796),ee=k(1555),F=k(9105);const se=(()=>{function le(ne){return Error.call(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((L,V)=>`${V+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne,this}return le.prototype=Object.create(Error.prototype),le})();class oe{constructor(ne){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._ctorUnsubscribe=!0,this._unsubscribe=ne)}unsubscribe(){let ne;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:V,_unsubscribe:J,_subscriptions:Y}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof oe)L.remove(this);else if(null!==L)for(let de=0;de<L.length;++de)L[de].remove(this);if((0,F.m)(J)){V&&(this._unsubscribe=void 0);try{J.call(this)}catch(de){ne=de instanceof se?ve(de.errors):[de]}}if((0,g.k)(Y)){let de=-1,be=Y.length;for(;++de<be;){const ge=Y[de];if((0,ee.K)(ge))try{ge.unsubscribe()}catch(fe){ne=ne||[],fe instanceof se?ne=ne.concat(ve(fe.errors)):ne.push(fe)}}}if(ne)throw new se(ne)}add(ne){let L=ne;if(!ne)return oe.EMPTY;switch(typeof ne){case"function":L=new oe(ne);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof oe)){const Y=L;L=new oe,L._subscriptions=[Y]}break;default:throw new Error("unrecognized teardown "+ne+" added to Subscription.")}let{_parentOrParents:V}=L;if(null===V)L._parentOrParents=this;else if(V instanceof oe){if(V===this)return L;L._parentOrParents=[V,this]}else{if(-1!==V.indexOf(this))return L;V.push(this)}const J=this._subscriptions;return null===J?this._subscriptions=[L]:J.push(L),L}remove(ne){const L=this._subscriptions;if(L){const V=L.indexOf(ne);-1!==V&&L.splice(V,1)}}}var le;function ve(le){return le.reduce((ne,L)=>ne.concat(L instanceof se?L.errors:L),[])}oe.EMPTY=((le=new oe).closed=!0,le)},2494:(We,ye,k)=>{"use strict";k.d(ye,{v:()=>ee});let g=!1;const ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else g&&console.log("RxJS: Back to a better error behavior. Thank you. <3");g=F},get useDeprecatedSynchronousErrorHandling(){return g}}},5345:(We,ye,k)=>{"use strict";k.d(ye,{IY:()=>ce,Ds:()=>oe,ft:()=>le});var g=k(7393),ee=k(7574),F=k(7444);class ce extends g.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class oe extends g.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function le(ne,L){if(L.closed)return;if(ne instanceof ee.y)return ne.subscribe(L);let V;try{V=(0,F.s)(ne)(L)}catch(J){L.error(J)}return V}},2441:(We,ye,k)=>{"use strict";k.d(ye,{c:()=>se,N:()=>oe});var g=k(9765),ee=k(7574),F=k(5319),ce=k(1307);class se extends ee.y{constructor(V,J){super(),this.source=V,this.subjectFactory=J,this._refCount=0,this._isComplete=!1}_subscribe(V){return this.getSubject().subscribe(V)}getSubject(){const V=this._subject;return(!V||V.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let V=this._connection;return V||(this._isComplete=!1,V=this._connection=new F.w,V.add(this.source.subscribe(new ve(this.getSubject(),this))),V.closed&&(this._connection=null,V=F.w.EMPTY)),V}refCount(){return(0,ce.x)()(this)}}const oe=(()=>{const L=se.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class ve extends g.Yc{constructor(V,J){super(V),this.connectable=J}_error(V){this._unsubscribe(),super._error(V)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const V=this.connectable;if(V){this.connectable=null;const J=V._connection;V._refCount=0,V._subject=null,V._connection=null,J&&J.unsubscribe()}}}},9193:(We,ye,k)=>{"use strict";k.d(ye,{E:()=>ee,c:()=>F});var g=k(7574);const ee=new g.y(se=>se.complete());function F(se){return se?function(se){return new g.y(oe=>se.schedule(()=>oe.complete()))}(se):ee}},4402:(We,ye,k)=>{"use strict";k.d(ye,{D:()=>be});var g=k(7574),ee=k(7444),F=k(5319),ce=k(6554),ve=k(4087),le=k(377),V=k(4072),J=k(9489);function be(ge,fe){return fe?function(ge,fe){if(null!=ge){if(function(ge){return ge&&"function"==typeof ge[ce.L]}(ge))return function(ge,fe){return new g.y(Ae=>{const Ne=new F.w;return Ne.add(fe.schedule(()=>{const De=ge[ce.L]();Ne.add(De.subscribe({next(He){Ne.add(fe.schedule(()=>Ae.next(He)))},error(He){Ne.add(fe.schedule(()=>Ae.error(He)))},complete(){Ne.add(fe.schedule(()=>Ae.complete()))}}))})),Ne})}(ge,fe);if((0,V.t)(ge))return function(ge,fe){return new g.y(Ae=>{const Ne=new F.w;return Ne.add(fe.schedule(()=>ge.then(De=>{Ne.add(fe.schedule(()=>{Ae.next(De),Ne.add(fe.schedule(()=>Ae.complete()))}))},De=>{Ne.add(fe.schedule(()=>Ae.error(De)))}))),Ne})}(ge,fe);if((0,J.z)(ge))return(0,ve.r)(ge,fe);if(function(ge){return ge&&"function"==typeof ge[le.hZ]}(ge)||"string"==typeof ge)return function(ge,fe){if(!ge)throw new Error("Iterable cannot be null");return new g.y(Ae=>{const Ne=new F.w;let De;return Ne.add(()=>{De&&"function"==typeof De.return&&De.return()}),Ne.add(fe.schedule(()=>{De=ge[le.hZ](),Ne.add(fe.schedule(function(){if(Ae.closed)return;let He,at;try{const Le=De.next();He=Le.value,at=Le.done}catch(Le){return void Ae.error(Le)}at?Ae.complete():(Ae.next(He),this.schedule())}))})),Ne})}(ge,fe)}throw new TypeError((null!==ge&&typeof ge||ge)+" is not observable")}(ge,fe):ge instanceof g.y?ge:new g.y((0,ee.s)(ge))}},6693:(We,ye,k)=>{"use strict";k.d(ye,{n:()=>ce});var g=k(7574),ee=k(5015),F=k(4087);function ce(se,oe){return oe?(0,F.r)(se,oe):new g.y((0,ee.V)(se))}},6682:(We,ye,k)=>{"use strict";k.d(ye,{T:()=>se});var g=k(7574),ee=k(4869),F=k(3282),ce=k(6693);function se(...oe){let ve=Number.POSITIVE_INFINITY,le=null,ne=oe[oe.length-1];return(0,ee.K)(ne)?(le=oe.pop(),oe.length>1&&"number"==typeof oe[oe.length-1]&&(ve=oe.pop())):"number"==typeof ne&&(ve=oe.pop()),null===le&&1===oe.length&&oe[0]instanceof g.y?oe[0]:(0,F.J)(ve)((0,ce.n)(oe,le))}},5917:(We,ye,k)=>{"use strict";k.d(ye,{of:()=>ce});var g=k(4869),ee=k(6693),F=k(4087);function ce(...se){let oe=se[se.length-1];return(0,g.K)(oe)?(se.pop(),(0,F.r)(se,oe)):(0,ee.n)(se)}},8002:(We,ye,k)=>{"use strict";k.d(ye,{U:()=>ee});var g=k(7393);function ee(se,oe){return function(le){if("function"!=typeof se)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return le.lift(new F(se,oe))}}class F{constructor(oe,ve){this.project=oe,this.thisArg=ve}call(oe,ve){return ve.subscribe(new ce(oe,this.project,this.thisArg))}}class ce extends g.L{constructor(oe,ve,le){super(oe),this.project=ve,this.count=0,this.thisArg=le||this}_next(oe){let ve;try{ve=this.project.call(this.thisArg,oe,this.count++)}catch(le){return void this.destination.error(le)}this.destination.next(ve)}}},3282:(We,ye,k)=>{"use strict";k.d(ye,{J:()=>F});var g=k(9773),ee=k(4487);function F(ce=Number.POSITIVE_INFINITY){return(0,g.zg)(ee.y,ce)}},9773:(We,ye,k)=>{"use strict";k.d(ye,{zg:()=>ce});var g=k(8002),ee=k(4402),F=k(5345);function ce(le,ne,L=Number.POSITIVE_INFINITY){return"function"==typeof ne?V=>V.pipe(ce((J,Y)=>(0,ee.D)(le(J,Y)).pipe((0,g.U)((de,be)=>ne(J,de,Y,be))),L)):("number"==typeof ne&&(L=ne),V=>V.lift(new se(le,L)))}class se{constructor(ne,L=Number.POSITIVE_INFINITY){this.project=ne,this.concurrent=L}call(ne,L){return L.subscribe(new oe(ne,this.project,this.concurrent))}}class oe extends F.Ds{constructor(ne,L,V=Number.POSITIVE_INFINITY){super(ne),this.project=L,this.concurrent=V,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ne){this.active<this.concurrent?this._tryNext(ne):this.buffer.push(ne)}_tryNext(ne){let L;const V=this.index++;try{L=this.project(ne,V)}catch(J){return void this.destination.error(J)}this.active++,this._innerSub(L)}_innerSub(ne){const L=new F.IY(this),V=this.destination;V.add(L);const J=(0,F.ft)(ne,L);J!==L&&V.add(J)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ne){this.destination.next(ne)}notifyComplete(){const ne=this.buffer;this.active--,ne.length>0?this._next(ne.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(We,ye,k)=>{"use strict";k.d(ye,{ht:()=>V,QV:()=>ne});var g=k(7393),ee=k(9193),F=k(5917),ce=k(7574);class le{constructor(de,be,ge){this.kind=de,this.value=be,this.error=ge,this.hasValue="N"===de}observe(de){switch(this.kind){case"N":return de.next&&de.next(this.value);case"E":return de.error&&de.error(this.error);case"C":return de.complete&&de.complete()}}do(de,be,ge){switch(this.kind){case"N":return de&&de(this.value);case"E":return be&&be(this.error);case"C":return ge&&ge()}}accept(de,be,ge){return de&&"function"==typeof de.next?this.observe(de):this.do(de,be,ge)}toObservable(){switch(this.kind){case"N":return(0,F.of)(this.value);case"E":return Y=this.error,new ce.y(be=>be.error(Y));case"C":return(0,ee.c)()}var Y;throw new Error("unexpected notification kind value")}static createNext(de){return void 0!==de?new le("N",de):le.undefinedValueNotification}static createError(de){return new le("E",void 0,de)}static createComplete(){return le.completeNotification}}function ne(Y,de=0){return function(ge){return ge.lift(new L(Y,de))}}le.completeNotification=new le("C"),le.undefinedValueNotification=new le("N",void 0);class L{constructor(de,be=0){this.scheduler=de,this.delay=be}call(de,be){return be.subscribe(new V(de,this.scheduler,this.delay))}}class V extends g.L{constructor(de,be,ge=0){super(de),this.scheduler=be,this.delay=ge}static dispatch(de){const{notification:be,destination:ge}=de;be.observe(ge),this.unsubscribe()}scheduleMessage(de){this.destination.add(this.scheduler.schedule(V.dispatch,this.delay,new J(de,this.destination)))}_next(de){this.scheduleMessage(le.createNext(de))}_error(de){this.scheduleMessage(le.createError(de)),this.unsubscribe()}_complete(){this.scheduleMessage(le.createComplete()),this.unsubscribe()}}class J{constructor(de,be){this.notification=de,this.destination=be}}},1307:(We,ye,k)=>{"use strict";k.d(ye,{x:()=>ee});var g=k(7393);function ee(){return function(oe){return oe.lift(new F(oe))}}class F{constructor(oe){this.connectable=oe}call(oe,ve){const{connectable:le}=this;le._refCount++;const ne=new ce(oe,le),L=ve.subscribe(ne);return ne.closed||(ne.connection=le.connect()),L}}class ce extends g.L{constructor(oe,ve){super(oe),this.connectable=ve}_unsubscribe(){const{connectable:oe}=this;if(!oe)return void(this.connection=null);this.connectable=null;const ve=oe._refCount;if(ve<=0)return void(this.connection=null);if(oe._refCount=ve-1,ve>1)return void(this.connection=null);const{connection:le}=this,ne=oe._connection;this.connection=null,ne&&(!le||ne===le)&&ne.unsubscribe()}}},3101:(We,ye,k)=>{"use strict";k.d(ye,{R:()=>fe});var g=k(7574);let ee=1;const F=Promise.resolve(),ce={};function se(Ne){return Ne in ce&&(delete ce[Ne],!0)}const oe={setImmediate(Ne){const De=ee++;return ce[De]=!0,F.then(()=>se(De)&&Ne()),De},clearImmediate(Ne){se(Ne)}};var le=k(6465),L=k(6102);const Y=new class extends L.v{flush(De){this.active=!0,this.scheduled=void 0;const{actions:He}=this;let at,Le=-1,Ot=He.length;De=De||He.shift();do{if(at=De.execute(De.state,De.delay))break}while(++Le<Ot&&(De=He.shift()));if(this.active=!1,at){for(;++Le<Ot&&(De=He.shift());)De.unsubscribe();throw at}}}(class extends le.o{constructor(De,He){super(De,He),this.scheduler=De,this.work=He}requestAsyncId(De,He,at=0){return null!==at&&at>0?super.requestAsyncId(De,He,at):(De.actions.push(this),De.scheduled||(De.scheduled=oe.setImmediate(De.flush.bind(De,null))))}recycleAsyncId(De,He,at=0){if(null!==at&&at>0||null===at&&this.delay>0)return super.recycleAsyncId(De,He,at);0===De.actions.length&&(oe.clearImmediate(He),De.scheduled=void 0)}});var de=k(9796);class ge extends g.y{constructor(De,He=0,at=Y){var Ne;super(),this.source=De,this.delayTime=He,this.scheduler=at,(!(!(0,de.k)(Ne=He)&&Ne-parseFloat(Ne)+1>=0)||He<0)&&(this.delayTime=0),(!at||"function"!=typeof at.schedule)&&(this.scheduler=Y)}static create(De,He=0,at=Y){return new ge(De,He,at)}static dispatch(De){const{source:He,subscriber:at}=De;return this.add(He.subscribe(at))}_subscribe(De){return this.scheduler.schedule(ge.dispatch,this.delayTime,{source:this.source,subscriber:De})}}function fe(Ne,De=0){return function(at){return at.lift(new Ae(Ne,De))}}class Ae{constructor(De,He){this.scheduler=De,this.delay=He}call(De,He){return new ge(He,this.delay,this.scheduler).subscribe(De)}}},3342:(We,ye,k)=>{"use strict";k.d(ye,{b:()=>ce});var g=k(7393);function ee(){}var F=k(9105);function ce(ve,le,ne){return function(V){return V.lift(new se(ve,le,ne))}}class se{constructor(le,ne,L){this.nextOrObserver=le,this.error=ne,this.complete=L}call(le,ne){return ne.subscribe(new oe(le,this.nextOrObserver,this.error,this.complete))}}class oe extends g.L{constructor(le,ne,L,V){super(le),this._tapNext=ee,this._tapError=ee,this._tapComplete=ee,this._tapError=L||ee,this._tapComplete=V||ee,(0,F.m)(ne)?(this._context=this,this._tapNext=ne):ne&&(this._context=ne,this._tapNext=ne.next||ee,this._tapError=ne.error||ee,this._tapComplete=ne.complete||ee)}_next(le){try{this._tapNext.call(this._context,le)}catch(ne){return void this.destination.error(ne)}this.destination.next(le)}_error(le){try{this._tapError.call(this._context,le)}catch(ne){return void this.destination.error(ne)}this.destination.error(le)}_complete(){try{this._tapComplete.call(this._context)}catch(le){return void this.destination.error(le)}return this.destination.complete()}}},4087:(We,ye,k)=>{"use strict";k.d(ye,{r:()=>F});var g=k(7574),ee=k(5319);function F(ce,se){return new g.y(oe=>{const ve=new ee.w;let le=0;return ve.add(se.schedule(function(){le!==ce.length?(oe.next(ce[le++]),oe.closed||ve.add(this.schedule())):oe.complete()})),ve})}},6465:(We,ye,k)=>{"use strict";k.d(ye,{o:()=>F});var g=k(5319);class ee extends g.w{constructor(se,oe){super()}schedule(se,oe=0){return this}}class F extends ee{constructor(se,oe){super(se,oe),this.scheduler=se,this.work=oe,this.pending=!1}schedule(se,oe=0){if(this.closed)return this;this.state=se;const ve=this.id,le=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(le,ve,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(le,this.id,oe),this}requestAsyncId(se,oe,ve=0){return setInterval(se.flush.bind(se,this),ve)}recycleAsyncId(se,oe,ve=0){if(null!==ve&&this.delay===ve&&!1===this.pending)return oe;clearInterval(oe)}execute(se,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(se,oe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,oe){let le,ve=!1;try{this.work(se)}catch(ne){ve=!0,le=!!ne&&ne||new Error(ne)}if(ve)return this.unsubscribe(),le}_unsubscribe(){const se=this.id,oe=this.scheduler,ve=oe.actions,le=ve.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==le&&ve.splice(le,1),null!=se&&(this.id=this.recycleAsyncId(oe,se,null)),this.delay=null}}},6102:(We,ye,k)=>{"use strict";k.d(ye,{v:()=>ee});let g=(()=>{class F{constructor(se,oe=F.now){this.SchedulerAction=se,this.now=oe}schedule(se,oe=0,ve){return new this.SchedulerAction(this,se).schedule(ve,oe)}}return F.now=()=>Date.now(),F})();class ee extends g{constructor(ce,se=g.now){super(ce,()=>ee.delegate&&ee.delegate!==this?ee.delegate.now():se()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,se=0,oe){return ee.delegate&&ee.delegate!==this?ee.delegate.schedule(ce,se,oe):super.schedule(ce,se,oe)}flush(ce){const{actions:se}=this;if(this.active)return void se.push(ce);let oe;this.active=!0;do{if(oe=ce.execute(ce.state,ce.delay))break}while(ce=se.shift());if(this.active=!1,oe){for(;ce=se.shift();)ce.unsubscribe();throw oe}}}},3637:(We,ye,k)=>{"use strict";k.d(ye,{z:()=>F});var g=k(6465);const F=new(k(6102).v)(g.o)},7771:(We,ye,k)=>{"use strict";k.d(ye,{c:()=>oe,N:()=>se});var g=k(6465),F=k(6102);const se=new class extends F.v{}(class extends g.o{constructor(le,ne){super(le,ne),this.scheduler=le,this.work=ne}schedule(le,ne=0){return ne>0?super.schedule(le,ne):(this.delay=ne,this.state=le,this.scheduler.flush(this),this)}execute(le,ne){return ne>0||this.closed?super.execute(le,ne):this._execute(le,ne)}requestAsyncId(le,ne,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(le,ne,L):le.flush(this)}}),oe=se},377:(We,ye,k)=>{"use strict";k.d(ye,{hZ:()=>ee});const ee="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(We,ye,k)=>{"use strict";k.d(ye,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(We,ye,k)=>{"use strict";k.d(ye,{b:()=>g});const g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(We,ye,k)=>{"use strict";k.d(ye,{N:()=>ee});const ee=(()=>{function F(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return F.prototype=Object.create(Error.prototype),F})()},4449:(We,ye,k)=>{"use strict";function g(ee){setTimeout(()=>{throw ee},0)}k.d(ye,{z:()=>g})},4487:(We,ye,k)=>{"use strict";function g(ee){return ee}k.d(ye,{y:()=>g})},9796:(We,ye,k)=>{"use strict";k.d(ye,{k:()=>g});const g=Array.isArray||(ee=>ee&&"number"==typeof ee.length)},9489:(We,ye,k)=>{"use strict";k.d(ye,{z:()=>g});const g=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},9105:(We,ye,k)=>{"use strict";function g(ee){return"function"==typeof ee}k.d(ye,{m:()=>g})},1555:(We,ye,k)=>{"use strict";function g(ee){return null!==ee&&"object"==typeof ee}k.d(ye,{K:()=>g})},4072:(We,ye,k)=>{"use strict";function g(ee){return!!ee&&"function"!=typeof ee.subscribe&&"function"==typeof ee.then}k.d(ye,{t:()=>g})},4869:(We,ye,k)=>{"use strict";function g(ee){return ee&&"function"==typeof ee.schedule}k.d(ye,{K:()=>g})},7444:(We,ye,k)=>{"use strict";k.d(ye,{s:()=>V});var g=k(5015),ee=k(4449),ce=k(377),oe=k(6554),le=k(9489),ne=k(4072),L=k(1555);const V=J=>{if(J&&"function"==typeof J[oe.L])return(J=>Y=>{const de=J[oe.L]();if("function"!=typeof de.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return de.subscribe(Y)})(J);if((0,le.z)(J))return(0,g.V)(J);if((0,ne.t)(J))return(J=>Y=>(J.then(de=>{Y.closed||(Y.next(de),Y.complete())},de=>Y.error(de)).then(null,ee.z),Y))(J);if(J&&"function"==typeof J[ce.hZ])return(J=>Y=>{const de=J[ce.hZ]();for(;;){let be;try{be=de.next()}catch(ge){return Y.error(ge),Y}if(be.done){Y.complete();break}if(Y.next(be.value),Y.closed)break}return"function"==typeof de.return&&Y.add(()=>{de.return&&de.return()}),Y})(J);{const de=`You provided ${(0,L.K)(J)?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(de)}}},5015:(We,ye,k)=>{"use strict";k.d(ye,{V:()=>g});const g=ee=>F=>{for(let ce=0,se=ee.length;ce<se&&!F.closed;ce++)F.next(ee[ce]);F.complete()}},9130:(We,ye,k)=>{"use strict";var g=k(3018);let ee=null;function F(){return ee}const ve=new g.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,g.Yz7)({factory:ne,token:n,providedIn:"platform"}),n})();function ne(){return(0,g.LFG)(V)}const L=new g.OlP("Location Initialized");let V=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){J()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){J()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve))},n.\u0275prov=(0,g.Yz7)({factory:Y,token:n,providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Y(){return new V((0,g.LFG)(ve))}function de(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ge(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,g.Yz7)({factory:Ae,token:n,providedIn:"root"}),n})();function Ae(n){const e=(0,g.LFG)(ve).location;return new De((0,g.LFG)(le),e&&e.origin||"")}const Ne=new g.OlP("appBaseHref");let De=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return de(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ge(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,c){const h=this.prepareExternalUrl(a+ge(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){const h=this.prepareExternalUrl(a+ge(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(Ne,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=de(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,c){let h=this.prepareExternalUrl(a+ge(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){let h=this.prepareExternalUrl(a+ge(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(Ne,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),at=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=be(wt(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ge(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,wt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ge(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ge(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe),g.LFG(le))},n.normalizeQueryParams=ge,n.joinWithSlash=de,n.stripTrailingSlash=be,n.\u0275prov=(0,g.Yz7)({factory:Le,token:n,providedIn:"root"}),n})();function Le(){return new at((0,g.LFG)(fe),(0,g.LFG)(le))}function wt(n){return n.replace(/\/index.html$/,"")}var Ve=(()=>((Ve=Ve||{})[Ve.Zero=0]="Zero",Ve[Ve.One=1]="One",Ve[Ve.Two=2]="Two",Ve[Ve.Few=3]="Few",Ve[Ve.Many=4]="Many",Ve[Ve.Other=5]="Other",Ve))();const qn=g.kL8;class fr{}let mn=(()=>{class n extends fr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(qn(r||this.locale)(t)){case Ve.Zero:return"zero";case Ve.One:return"one";case Ve.Two:return"two";case Ve.Few:return"few";case Ve.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.soG))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ju{constructor(e,t,r,a){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kr=(()=>{class n{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((a,c,h)=>{if(null==a.previousIndex){const y=this._viewContainer.createEmbeddedView(this._template,new Ju(null,this._ngForOf,-1,-1),null===h?void 0:h),E=new vr(a,y);r.push(E)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const y=this._viewContainer.get(c);this._viewContainer.move(y,h);const E=new vr(a,y);r.push(E)}});for(let a=0;a<r.length;a++)this._perViewChange(r[a].view,r[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const h=this._viewContainer.get(a);h.context.index=a,h.context.count=c,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class vr{constructor(e,t){this.record=e,this.view=t}}let wr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ki,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ki{constructor(){this.$implicit=null,this.ngIf=null}}function rn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Ih=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[{provide:fr,useClass:mn}]}),n})();function au(n){return"server"===n}let uu=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Ml((0,g.LFG)(ve),window)}),n})();class Ml{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const c=a.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],a-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=tc(this.window.history)||tc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function tc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _a extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new _a,ee||(ee=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Li=Li||document.querySelector("base"),Li?Li.getAttribute("href"):null);return null==t?null:function(n){Co=Co||document.createElement("a"),Co.setAttribute("href",n);const e=Co.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Li=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let Co,Li=null;const $s=new g.OlP("TRANSITION_ID"),Dh=[{provide:g.ip1,useFactory:function(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=F(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[$s,ve,g.zs3],multi:!0}];class Pt{static init(){(0,g.VLi)(new Pt)}addToWindow(e){g.dqk.getAngularTestability=(r,a=!0)=>{const c=e.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const a=g.dqk.getAllAngularTestabilities();let c=a.length,h=!1;const y=function(E){h=h||E,c--,0==c&&r(h)};a.forEach(function(E){E.whenStable(y)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Th=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const hs=new g.OlP("EventManagerPlugins");let To=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const h=a[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hs),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=F().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let va=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),fs=(()=>{class n extends va{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,a.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ol),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ol))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Ol(n){F().remove(n)}const Ee={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bt=/%COMP%/g;function Gs(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?Gs(n,a,t):(a=a.replace(Bt,n),t.push(a))}return t}function xh(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ba=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ji(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new qs(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case g.ifc.ShadowDom:return new Vi(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=Gs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(To),g.LFG(fs),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ji{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ee[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const c=Ee[a];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=Ee[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,a&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xh(r)):this.eventManager.addEventListener(e,t,xh(r))}}class qs extends Ji{constructor(e,t,r,a){super(e),this.component=r;const c=Gs(a+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Bt,a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Bt,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Vi extends Ji{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Gs(a.id,a.styles,[]);for(let h=0;h<c.length;h++){const y=document.createElement("style");y.textContent=c[h],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Pl=(()=>{class n extends Ao{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const No=["alt","control","meta","shift"],Ca={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let si=(()=>{class n extends Ao{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(r.pop());let h="";if(No.forEach(E=>{const D=r.indexOf(E);D>-1&&(r.splice(D,1),h+=E+".")}),h+=c,0!=r.length||0===c.length)return null;const y={};return y.domEventName=a,y.fullKey=h,y}static getEventFullKey(t){let r="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Fl.hasOwnProperty(e)&&(e=Fl[e]))}return Ca[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),No.forEach(c=>{c!=a&&Vr[c](t)&&(r+=c+".")}),r+=a,r}static eventCallback(t,r,a){return c=>{n.getEventFullKey(c)===t&&a.runGuarded(()=>r(c))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Vl=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function(){_a.makeCurrent(),Pt.init()},multi:!0},{provide:ve,useFactory:function(){return(0,g.RDi)(document),document},deps:[]}]),oi=[[],{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function(){return new g.qLn},deps:[]},{provide:hs,useClass:Pl,multi:!0,deps:[ve,g.R0b,g.Lbi]},{provide:hs,useClass:si,multi:!0,deps:[ve]},[],{provide:ba,useClass:ba,deps:[To,fs,g.AFp]},{provide:g.FYo,useExisting:ba},{provide:va,useExisting:fs},{provide:fs,useClass:fs,deps:[ve]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:To,useClass:To,deps:[hs,g.R0b]},{provide:class{},useClass:Th,deps:[]},[]];let Ta=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:$s,useExisting:g.AFp},Dh]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:oi,imports:[Ih,g.hGG]}),n})();"undefined"!=typeof window&&window;var Ur=k(8939),ps=k(3637),Er=k(7574),en=k(4402),ot=k(5917),On=k(9845),Ws=k(3282);function zs(...n){return(0,Ws.J)(1)((0,ot.of)(...n))}var Tp=k(4869);function vi(...n){const e=n[n.length-1];return(0,Tp.K)(e)?(n.pop(),t=>zs(n,t,e)):t=>zs(n,t)}var wi=k(7393);function gc(){return n=>n.lift(new Oo)}class Oo{call(e,t){return t.subscribe(new Ap(e))}}class Ap extends wi.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Qe=k(8002);function gs(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new wu(n,e,t))}}class wu{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Lh(e,this.accumulator,this.seed,this.hasSeed))}}class Lh extends wi.L{constructor(e,t,r,a){super(e),this.accumulator=t,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}class xa{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new mc(e,this.compare,this.keySelector))}}class mc extends wi.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let r=!1;if(this.hasKey)try{const{compare:a}=this;r=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}function Bi(n,e){return function(r){return r.lift(new Bl(n,e))}}class Bl{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new ms(e,this.predicate,this.thisArg))}}class ms extends wi.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}k(2385);var qe,ys=k(3394),pe=k(8239),Ir=k(8026),bi=k(3910),Ei=k(5422),mt=k(3854),Vh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xi={},dn=dn||{},vt=Vh||self;function yc(){}function Po(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function _c(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vc="closure_uid_"+(1e9*Math.random()>>>0),wc=0;function Bh(n,e,t){return n.call.apply(n.bind,arguments)}function jl(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function $n(n,e,t){return($n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bh:jl).apply(null,arguments)}function bu(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,a,c){for(var h=Array(arguments.length-2),y=2;y<arguments.length;y++)h[y-2]=arguments[y];return e.prototype[a].apply(r,h)}}function _s(){this.s=this.s,this.o=this.o}var bc={};_s.prototype.s=!1,_s.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,vc)&&n[vc]||(n[vc]=++wc)}(this);delete bc[n]}},_s.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Eu=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Zs=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,a="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in a&&e.call(t,a[c],c,n)};function ai(n){return Array.prototype.concat.apply([],arguments)}function Ii(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ui(n){return/^[\s\xa0]*$/.test(n)}var Br,Ys=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qt(n,e){return-1!=n.indexOf(e)}function $l(n,e){return n<e?-1:n>e?1:0}e:{var Hl=vt.navigator;if(Hl){var Gl=Hl.userAgent;if(Gl){Br=Gl;break e}}Br=""}function $h(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ec(n){const e={};for(const t in n)e[t]=n[t];return e}var I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let c=0;c<I.length;c++)t=I[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function R(n){return R[" "](n),n}R[" "]=yc;var pt,n,Q=Qt(Br,"Opera"),re=Qt(Br,"Trident")||Qt(Br,"MSIE"),Me=Qt(Br,"Edge"),Ge=Me||re,lt=Qt(Br,"Gecko")&&!(Qt(Br.toLowerCase(),"webkit")&&!Qt(Br,"Edge"))&&!(Qt(Br,"Trident")||Qt(Br,"MSIE"))&&!Qt(Br,"Edge"),ut=Qt(Br.toLowerCase(),"webkit")&&!Qt(Br,"Edge");function kt(){var n=vt.document;return n?n.documentMode:void 0}e:{var nr="",Kn=(n=Br,lt?/rv:([^\);]+)(\)|;)/.exec(n):Me?/Edge\/([\d\.]+)/.exec(n):re?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ut?/WebKit\/(\S+)/.exec(n):Q?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Kn&&(nr=Kn?Kn[1]:""),re){var Ci=kt();if(null!=Ci&&Ci>parseFloat(nr)){pt=String(Ci);break e}}pt=nr}var Na={};function es(){return e=Na,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Ys(String(pt)).split("."),t=Ys("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var a=e[h]||"",c=t[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=$l(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||$l(0==a[2].length,0==c[2].length)||$l(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n}();var e}var Hh=vt.document&&re&&(kt()||parseInt(pt,10))||void 0,ql=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",yc,e),vt.removeEventListener("test",yc,e)}catch(t){}return n}();function ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ko(n,e){if(ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(lt){e:{try{R(e.nodeName);var a=!0;break e}catch(c){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Iu[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ko.Z.h.call(this)}}ci.prototype.h=function(){this.defaultPrevented=!0},Pn(ko,ci);var Iu={2:"touch",3:"pen",4:"mouse"};ko.prototype.h=function(){ko.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qs="closure_listenable_"+(1e6*Math.random()|0),Wl=0;function Zn(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=a,this.key=++Wl,this.ca=this.fa=!1}function zl(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Kl(n){this.src=n,this.g={},this.h=0}function bs(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],a=Eu(r,e);(c=0<=a)&&Array.prototype.splice.call(r,a,1),c&&(zl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Fo(n,e,t,r){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return a}return-1}Kl.prototype.add=function(n,e,t,r,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=Fo(n,e,r,a);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new Zn(e,this.src,c,!!r,a)).fa=t,n.push(e)),e};var Sp="closure_lm_"+(1e6*Math.random()|0),Ic={};function Gh(n,e,t,r,a){if(r&&r.once)return Js(n,e,t,r,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Gh(n,e[c],t,r,a);return null}return t=Tc(t),n&&n[Qs]?n.N(e,t,_c(r)?!!r.capture:!!r,a):Hm(n,e,t,!1,r,a)}function Hm(n,e,t,r,a,c){if(!e)throw Error("Invalid event type");var h=_c(a)?!!a.capture:!!a,y=Zl(n);if(y||(n[Sp]=y=new Kl(n)),(t=y.add(e,t,r,h,c)).proxy)return t;if(r=function(){var e=qh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ql||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(Gm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Js(n,e,t,r,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Js(n,e[c],t,r,a);return null}return t=Tc(t),n&&n[Qs]?n.O(e,t,_c(r)?!!r.capture:!!r,a):Hm(n,e,t,!0,r,a)}function Cu(n,e,t,r,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Cu(n,e[c],t,r,a);else r=_c(r)?!!r.capture:!!r,t=Tc(t),n&&n[Qs]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Fo(c=n.g[e],t,r,a))&&(zl(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Zl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Fo(e,t,r,a)),(t=-1<n?e[n]:null)&&Xs(t))}function Xs(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Qs])bs(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Gm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Zl(e))?(bs(t,n),0==t.h&&(t.src=null,e[Sp]=null)):zl(n)}}}function Gm(n){return n in Ic?Ic[n]:Ic[n]="on"+n}function qh(n,e){if(n.ca)n=!0;else{e=new ko(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Xs(n),n=t.call(r,e)}return n}function Zl(n){return(n=n[Sp])instanceof Kl?n:null}var Dc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tc(n){return"function"==typeof n?n:(n[Dc]||(n[Dc]=function(e){return n.handleEvent(e)}),n[Dc])}function gr(){_s.call(this),this.i=new Kl(this),this.P=this,this.I=null}function rr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ci(e,n);else if(e instanceof ci)e.target=e.target||n;else{var a=e;A(e=new ci(r,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=ts(h,r,!0,e)&&a}if(a=ts(h=e.g=n,r,!0,e)&&a,a=ts(h,r,!1,e)&&a,t)for(c=0;c<t.length;c++)a=ts(h=e.g=t[c],r,!1,e)&&a}function ts(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ca&&h.capture==t){var y=h.listener,E=h.ia||h.src;h.fa&&bs(n.i,h),a=!1!==y.call(E,r)&&a}}return a&&!r.defaultPrevented}Pn(gr,_s),gr.prototype[Qs]=!0,gr.prototype.removeEventListener=function(n,e,t,r){Cu(this,n,e,t,r)},gr.prototype.M=function(){if(gr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)zl(t[r]);delete n.g[e],n.h--}}this.I=null},gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Lo=vt.JSON.stringify;function qm(){var n=zh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Np,xp=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zm,n=>n.reset());class zm{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Sv(n){vt.setTimeout(()=>{throw n},0)}function Wh(n,e){Np||function(){var n=vt.Promise.resolve(void 0);Np=function(){n.then(Ac)}}(),Ra||(Np(),Ra=!0),zh.add(n,e)}var Ra=!1,zh=new class{constructor(){this.h=this.g=null}add(e,t){const r=xp.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ac(){for(var n;n=qm();){try{n.h.call(n.g)}catch(t){Sv(t)}var e=xp;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ra=!1}function Kh(n,e){gr.call(this),this.h=n||1,this.g=e||vt,this.j=$n(this.kb,this),this.l=Date.now()}function Yl(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Zm(n,e,t){if("function"==typeof n)t&&(n=$n(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$n(n.handleEvent,n)}return 2147483647<Number(e)?-1:vt.setTimeout(n,e||0)}function Ql(n){n.g=Zm(()=>{n.g=null,n.i&&(n.i=!1,Ql(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pn(Kh,gr),(qe=Kh.prototype).da=!1,qe.S=null,qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),rr(this,"tick"),this.da&&(Yl(this),this.start()))}},qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qe.M=function(){Kh.Z.M.call(this),Yl(this),delete this.g};class Zh extends _s{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ql(this)}M(){super.M(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sc(n){_s.call(this),this.h=n,this.g={}}Pn(Sc,_s);var xc=[];function Rp(n,e,t,r){Array.isArray(t)||(t&&(xc[0]=t.toString()),t=xc);for(var a=0;a<t.length;a++){var c=Gh(e,t[a],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Ma(n){$h(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xs(e)},n),n.g={}}function Yh(){this.g=!0}function Nc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return Lo(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}Sc.prototype.M=function(){Sc.Z.M.call(this),Ma(this)},Sc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yh.prototype.Aa=function(){this.g=!1},Yh.prototype.info=function(){};var Di={},Mp=null;function Qh(){return Mp=Mp||new gr}function Ym(n){ci.call(this,Di.Ma,n)}function Jl(n){const e=Qh();rr(e,new Ym(e,n))}function Qm(n,e){ci.call(this,Di.STAT_EVENT,n),this.stat=e}function jr(n){const e=Qh();rr(e,new Qm(e,n))}function Op(n,e){ci.call(this,Di.Na,n),this.size=e}function Xl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},e)}Di.Ma="serverreachability",Pn(Ym,ci),Di.STAT_EVENT="statevent",Pn(Qm,ci),Di.Na="timingevent",Pn(Op,ci);var Jh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Jm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ed(){}function Xh(){}ed.prototype.h=null;var Bo,Uo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function td(){ci.call(this,"d")}function ns(){ci.call(this,"c")}function nd(){}function Du(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Sc(this),this.P=hE,this.W=new Kh(n=Ge?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ef}function ef(){this.i=null,this.g="",this.h=!1}Pn(td,ci),Pn(ns,ci),Pn(nd,ed),nd.prototype.g=function(){return new XMLHttpRequest},nd.prototype.i=function(){return{}},Bo=new nd;var hE=45e3,Xm={},Pp={};function tf(n,e,t){n.K=1,n.v=Fp(rs(e)),n.s=t,n.U=!0,eo(n,null)}function eo(n,e){n.F=Date.now(),Rc(n),n.A=rs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ry(t.h,"t",r),n.C=0,t=n.l.H,n.h=new ef,n.g=gd(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Zh($n(n.Ia,n,n.g),n.O)),Rp(n.V,n.g,"readystatechange",n.gb),e=n.H?Ec(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Jl(1),function(n,e,t,r,a,c){n.info(function(){if(n.g)if(c)for(var h="",y=c.split("&"),E=0;E<y.length;E++){var D=y[E].split("=");if(1<D.length){var N=D[0];D=D[1];var M=N.split("_");h=2<=M.length&&"type"==M[1]?h+(N+"=")+D+"&":h+(N+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function nf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ov(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=ey(n,t),a==Pp){4==e&&(n.o=4,jr(14),r=!1),Nc(n.j,n.m,null,"[Incomplete Response]");break}if(a==Xm){n.o=4,jr(15),Nc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Nc(n.j,n.m,a,null),of(n,a)}nf(n)&&a!=Pp&&a!=Xm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,jr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),so(e),e.L=!0,jr(11))):(Nc(n.j,n.m,t,"[Invalid Chunked Response]"),jo(n),rd(n))}function ey(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Pp:(t=Number(e.substring(t,r)),isNaN(t)?Xm:(r+=1)+t>e.length?Pp:(e=e.substr(r,t),n.C=r+t,e))}function Rc(n){n.Y=Date.now()+n.P,rf(n,n.P)}function rf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xl($n(n.eb,n),e)}function sf(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function rd(n){0==n.l.G||n.I||Kp(n.l,n)}function jo(n){sf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Yl(n.W),Ma(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function of(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Gp(t.i,n)))if(t.I=n.N,!n.J&&Gp(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xl($n(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Fc(t),T(t)}Hn(t),jr(18)}if(1>=ud(t.i)&&t.ka){try{t.ka()}catch(D){}t.ka=void 0}}else Ho(t,11)}else if((n.J||t.g==n)&&Fc(t),!ui(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let D=a[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const N=D[3];null!=N&&(t.ma=N,t.h.info("VER="+t.ma));const M=D[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const $=D[5];null!=$&&"number"==typeof $&&0<$&&(t.K=r=1.5*$,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const ie=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var c=r.i;!c.g&&(Qt(ie,"spdy")||Qt(ie,"quic")||Qt(ie,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(Ti(c,c.h),c.h=null))}if(r.D){const xe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.sa=xe,En(r.F,r.D,xe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Qp(r,r.H?r.la:null,r.W),h.J){Su(r.i,h);var y=h,E=r.K;E&&y.setTimeout(E),y.B&&(sf(y),Rc(y)),r.g=h}else jt(r);0<t.l.length&&te(t)}else"stop"!=D[0]&&"close"!=D[0]||Ho(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Ho(t,7):w(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}Jl(4)}catch(D){}}function Mc(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Po(n)||"string"==typeof n)Zs(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Po(n)||"string"==typeof n){t=[];for(var r=n.length,a=0;a<r;a++)t.push(a)}else for(a in t=[],r=0,n)t[r++]=a;a=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Po(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var c=0;c<a;c++)e.call(void 0,r[c],t&&t[c],n)}}function Oa(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Oa)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function kp(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];on(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)on(a,r=n.g[e])||(n.g[t++]=r,a[r]=1),e++;n.g.length=t}}function on(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(qe=Du.prototype).setTimeout=function(n){this.P=n},qe.gb=function(n){n=n.target;const e=this.L;e&&3==ro(n)?e.l():this.Ia(n)},qe.Ia=function(n){try{if(n==this.g)e:{const N=ro(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>N)&&(3!=N||Ge||this.g&&(this.h.h||this.g.ga()||Lv(this.g)))){this.I||4!=N||7==e||Jl(8==e||0>=M?3:2),sf(this);var t=this.g.ba();this.N=t;t:if(nf(this)){var r=Lv(this.g);n="";var a=r.length,c=4==ro(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){jo(this),rd(this);var h="";break t}this.h.i=new vt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function(n,e,t,r,a,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,N,t),this.i){if(this.$&&!this.J){t:{if(this.g){var y,E=this.g;if((y=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ui(y)){var D=y;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,jr(12),jo(this),rd(this);break e}Nc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,of(this,t)}this.U?(Ov(this,N,h),Ge&&this.i&&3==N&&(Rp(this.V,this.W,"tick",this.fb),this.W.start())):(Nc(this.j,this.m,h,null),of(this,h)),4==N&&jo(this),this.i&&!this.I&&(4==N?Kp(this.l,this):(this.i=!1,Rc(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,jr(12)):(this.o=0,jr(13)),jo(this),rd(this)}}}catch(N){}},qe.fb=function(){if(this.g){var n=ro(this.g),e=this.g.ga();this.C<e.length&&(sf(this),Ov(this,n,e),this.i&&4!=n&&Rc(this))}},qe.cancel=function(){this.I=!0,jo(this)},qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jl(3),jr(17)),jo(this),this.o=2,rd(this)):rf(this,this.Y-n)},(qe=Oa.prototype).R=function(){kp(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},qe.T=function(){return kp(this),this.g.concat()},qe.get=function(n,e){return on(this.h,n)?this.h[n]:e},qe.set=function(n,e){on(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},qe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var a=t[r],c=this.get(a);n.call(e,c,a,this)}};var ty=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function to(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof to){this.g=void 0!==e?e:n.g,uf(this,n.j),this.s=n.s,cf(this,n.i),Oc(this,n.m),this.l=n.l,e=n.h;var t=new ad;t.i=e.i,e.g&&(t.g=new Oa(e.g),t.h=e.h),lf(this,t),this.o=n.o}else n&&(t=String(n).match(ty))?(this.g=!!e,uf(this,t[1]||"",!0),this.s=ir(t[2]||""),cf(this,t[3]||"",!0),Oc(this,t[4]),this.l=ir(t[5]||"",!0),lf(this,t[6]||"",!0),this.o=ir(t[7]||"")):(this.g=!!e,this.h=new ad(null,this.g))}function rs(n){return new to(n)}function uf(n,e,t){n.j=t?ir(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function cf(n,e,t){n.i=t?ir(e,!0):e}function Oc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function lf(n,e,t){e instanceof ad?(n.h=e,function(n,e){e&&!n.j&&(no(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(ny(this,r),ry(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Tu(e,Bp)),n.h=new ad(e,n.g))}function En(n,e,t){n.h.set(e,t)}function Fp(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ir(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Tu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Vp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Vp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}to.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Tu(e,Up,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Tu(e,Up,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Tu(t,"/"==t.charAt(0)?sd:$r,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Tu(t,od)),n.join("")};var Up=/[#\/\?@]/g,$r=/[#\?:]/g,sd=/[#\?]/g,Bp=/[#\?@]/g,od=/#/g;function ad(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function no(n){n.g||(n.g=new Oa,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var c=n[t].substring(0,r);a=n[t].substring(r+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ny(n,e){no(n),e=Au(n,e),on(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,on((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&kp(n)))}function jp(n,e){return no(n),e=Au(n,e),on(n.g.h,e)}function ry(n,e,t){ny(n,e),0<t.length&&(n.i=null,n.g.set(Au(n,e),Ii(t)),n.h+=t.length)}function Au(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function df(n){this.l=n||Hp,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ea&&vt.g.Ea()&&vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qe=ad.prototype).add=function(n,e){no(this),this.i=null,n=Au(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},qe.forEach=function(n,e){no(this),this.g.forEach(function(t,r){Zs(t,function(a){n.call(e,a,r,this)},this)},this)},qe.T=function(){no(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var a=n[r],c=0;c<a.length;c++)t.push(e[r]);return t},qe.R=function(n){no(this);var e=[];if("string"==typeof n)jp(this,n)&&(e=ai(e,this.g.get(Au(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ai(e,n[t])}return e},qe.set=function(n,e){return no(this),this.i=null,jp(this,n=Au(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},qe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],a=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var h=a;""!==r[c]&&(h+="="+encodeURIComponent(String(r[c]))),n.push(h)}}return this.i=n.join("&")};var Hp=10;function hf(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ud(n){return n.h?1:n.g?n.g.size:0}function Gp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ti(n,e){n.g?n.g.add(e):n.h=e}function Su(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Pc(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ii(n.i)}function qp(){}function Wp(){this.g=new qp}function Pa(n,e,t){const r=t||"";try{Mc(n,function(a,c){let h=a;_c(a)&&(h=Lo(a)),e.push(r+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function cd(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(c){}}function ld(n){this.l=n.$b||null,this.j=n.ib||!1}function Es(n,e){gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ff,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}df.prototype.cancel=function(){if(this.i=Pc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},qp.prototype.stringify=function(n){return vt.JSON.stringify(n,void 0)},qp.prototype.parse=function(n){return vt.JSON.parse(n,void 0)},Pn(ld,ed),ld.prototype.g=function(){return new Es(this.l,this.j)},ld.prototype.i=function(n){return function(){return n}}({}),Pn(Es,gr);var ff=0;function dd(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Hr(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kc(n)}function kc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(qe=Es.prototype).open=function(n,e){if(this.readyState!=ff)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kc(this)},qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hr(this)),this.readyState=ff},qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kc(this)),this.g&&(this.readyState=3,kc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dd(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hr(this):kc(this),3==this.readyState&&dd(this)}},qe.Ua=function(n){this.g&&(this.response=this.responseText=n,Hr(this))},qe.Ta=function(n){this.g&&(this.response=n,Hr(this))},qe.ha=function(){this.g&&Hr(this)},qe.setRequestHeader=function(n,e){this.v.append(n,e)},qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sy=vt.JSON.parse;function zt(n){gr.call(this),this.headers=new Oa,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hd,this.K=this.L=!1}Pn(zt,gr);var hd="",oy=/^https?$/i,ay=["POST","PUT"];function fd(n){return"content-type"==n.toLowerCase()}function zp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ka(n),pd(n)}function ka(n){n.D||(n.D=!0,rr(n,"complete"),rr(n,"error"))}function Is(n){if(n.h&&void 0!==dn&&(!n.C[1]||4!=ro(n)||2!=n.ba()))if(n.v&&4==ro(n))Zm(n.Fa,0,n);else if(rr(n,"readystatechange"),4==ro(n)){n.h=!1;try{const y=n.ba();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var a=String(n.H).match(ty)[1]||null;if(!a&&vt.self&&vt.self.location){var c=vt.self.location.protocol;a=c.substr(0,c.length-1)}r=!oy.test(a?a.toLowerCase():"")}t=r}if(t)rr(n,"complete"),rr(n,"success");else{n.m=6;try{var h=2<ro(n)?n.g.statusText:""}catch(E){h=""}n.j=h+" ["+n.ba()+"]",ka(n)}}finally{pd(n)}}}function pd(n,e){if(n.g){Fv(n);const t=n.g,r=n.C[0]?yc:null;n.g=null,n.C=null,e||rr(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function Fv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function ro(n){return n.g?n.g.readyState:0}function Lv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case hd:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return $h(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function f(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function p(n){this.za=0,this.l=[],this.h=new Yh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=f("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=f("baseRetryDelayMs",5e3,n),this.$a=f("retryDelaySeedMs",1e4,n),this.Ya=f("forwardChannelMaxRetries",2,n),this.ra=f("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new df(n&&n.concurrentRequestLimit),this.Ca=new Wp,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function w(n){if(x(n),3==n.G){var e=n.V++,t=rs(n.F);En(t,"SID",n.J),En(t,"RID",e),En(t,"TYPE","terminate"),Ke(n,t),(e=new Du(n,n.h,e,void 0)).K=2,e.v=Fp(rs(t)),t=!1,vt.navigator&&vt.navigator.sendBeacon&&(t=vt.navigator.sendBeacon(e.v.toString(),"")),!t&&vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=gd(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Rc(e)}Yp(n)}function T(n){n.g&&(so(n),n.g.cancel(),n.g=null)}function x(n){T(n),n.u&&(vt.clearTimeout(n.u),n.u=null),Fc(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function j(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&te(n)}function te(n){hf(n.i)||n.m||(n.m=!0,Wh(n.Ha,n),n.C=0)}function Ie(n,e){var t;t=e?e.m:n.V++;const r=rs(n.F);En(r,"SID",n.J),En(r,"RID",t),En(r,"AID",n.U),Ke(n,r),n.o&&n.s&&_(r,n.o,n.s),t=new Du(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ze(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ti(n.i,t),tf(t,r,e)}function Ke(n,e){n.j&&Mc({},function(t,r){En(e,r,t)})}function Ze(n,e,t){t=Math.min(n.l.length,t);var r=n.j?$n(n.j.Oa,n.j,n):null;e:{var a=n.l;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let y=!0;for(let E=0;E<t;E++){let D=a[E].h;const N=a[E].g;if(D-=c,0>D)c=Math.max(0,a[E].h-100),y=!1;else try{Pa(N,h,"req"+D+"_")}catch(M){r&&r(N)}}if(y){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function jt(n){n.g||n.u||(n.Y=1,Wh(n.Ga,n),n.A=0)}function Hn(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xl($n(n.Ga,n),Zp(n,n.A)),n.A++,0))}function so(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function xu(n){n.g=new Du(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=rs(n.oa);En(e,"RID","rpc"),En(e,"SID",n.J),En(e,"CI",n.N?"0":"1"),En(e,"AID",n.U),Ke(n,e),En(e,"TYPE","xmlhttp"),n.o&&n.s&&_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Fp(rs(e)),t.s=null,t.U=!0,eo(t,n)}function Fc(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function Kp(n,e){var t=null;if(n.g==e){Fc(n),so(n),n.g=null;var r=2}else{if(!Gp(n.i,e))return;t=e.D,Su(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;rr(r=Qh(),new Op(r,t,e,a)),te(n)}else jt(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==r&&function(n,e){return!(ud(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xl($n(n.Ha,n,e),Zp(n,n.C)),n.C++,0)))}(n,e)||2==r&&Hn(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:Ho(n,5);break;case 4:Ho(n,10);break;case 3:Ho(n,6);break;default:Ho(n,2)}}function Zp(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ho(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=$n(n.jb,n);t||(t=new to("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||uf(t,"https"),Fp(t)),function(n,e){const t=new Yh;if(vt.Image){const r=new Image;r.onload=bu(cd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=bu(cd,t,r,"TestLoadImage: error",!1,e),r.onabort=bu(cd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=bu(cd,t,r,"TestLoadImage: timeout",!1,e),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else jr(2);n.G=0,n.j&&n.j.va(e),Yp(n),x(n)}function Yp(n){n.G=0,n.I=-1,n.j&&((0!=Pc(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ii(n.l),n.l.length=0),n.j.ua())}function Qp(n,e,t){let r=function(n){return n instanceof to?rs(n):new to(n,void 0)}(t);if(""!=r.i)e&&cf(r,e+"."+r.i),Oc(r,r.m);else{const a=vt.location;r=function(n,e,t,r){var a=new to(null,void 0);return n&&uf(a,n),e&&cf(a,e),t&&Oc(a,t),r&&(a.l=r),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&$h(n.aa,function(a,c){En(r,c,a)}),t=n.sa,(e=n.D)&&t&&En(r,e,t),En(r,"VER",n.ma),Ke(n,r),r}function gd(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zt(t&&n.Ba&&!n.qa?new ld({ib:!0}):n.qa)).L=n.H,e}function md(){}function yd(){if(re&&!(10<=Number(Hh)))throw Error("Environmental error: no available transport.")}function Cr(n,e){gr.call(this),this.g=new p(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ui(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ui(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _d(this)}function uy(n){td.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fE(){ns.call(this),this.status=1}function _d(n){this.g=n}(qe=zt.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bo.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Bo),this.g.onreadystatechange=$n(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void zp(this,c)}n=t||"";const a=new Oa(this.headers);r&&Mc(r,function(c,h){a.set(h,c)}),r=function(n){e:{var e=fd;const t=n.length,r="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in r&&e.call(void 0,r[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=vt.FormData&&n instanceof vt.FormData,!(0<=Eu(ay,e))||r||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fv(this),0<this.B&&((this.K=function(n){return re&&es()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$n(this.pa,this)):this.A=Zm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){zp(this,c)}},qe.pa=function(){void 0!==dn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rr(this,"timeout"),this.abort(8))},qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,rr(this,"complete"),rr(this,"abort"),pd(this))},qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pd(this,!0)),zt.Z.M.call(this)},qe.Fa=function(){this.s||(this.F||this.v||this.l?Is(this):this.cb())},qe.cb=function(){Is(this)},qe.ba=function(){try{return 2<ro(this)?this.g.status:-1}catch(n){return-1}},qe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},qe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sy(e)}},qe.Da=function(){return this.m},qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(qe=p.prototype).ma=8,qe.G=1,qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new Du(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=Ec(c),A(c,this.P)):c=this.P),null===this.o&&(a.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ze(this,a,e),En(t=rs(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),Ke(this,t),this.o&&c&&_(t,this.o,c),Ti(this.i,a),this.Ra&&En(t,"TYPE","init"),this.ja?(En(t,"$req",e),En(t,"SID","null"),a.$=!0,tf(a,t,null)):tf(a,t,e),this.G=2}}else 3==this.G&&(n?Ie(this,n):0==this.l.length||hf(this.i)||Ie(this))},qe.Ga=function(){if(this.u=null,xu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xl($n(this.bb,this),n)}},qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jr(10),T(this),xu(this))},qe.ab=function(){null!=this.v&&(this.v=null,T(this),Hn(this),jr(19))},qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),jr(2)):(this.h.info("Failed to ping google.com"),jr(1))},(qe=md.prototype).xa=function(){},qe.wa=function(){},qe.va=function(){},qe.ua=function(){},qe.Oa=function(){},yd.prototype.g=function(n,e){return new Cr(n,e)},Pn(Cr,gr),Cr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Wh($n(n.hb,n,e))),jr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Qp(n,null,n.W),te(n)},Cr.prototype.close=function(){w(this.g)},Cr.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,j(this.g,e)}else this.v?((e={}).__data__=Lo(n),j(this.g,e)):j(this.g,n)},Cr.prototype.M=function(){this.g.j=null,delete this.j,w(this.g),delete this.g,Cr.Z.M.call(this)},Pn(uy,td),Pn(fE,ns),Pn(_d,md),_d.prototype.xa=function(){rr(this.g,"a")},_d.prototype.wa=function(n){rr(this.g,new uy(n))},_d.prototype.va=function(n){rr(this.g,new fE(n))},_d.prototype.ua=function(){rr(this.g,"b")},yd.prototype.createWebChannel=yd.prototype.g,Cr.prototype.send=Cr.prototype.u,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,Jh.NO_ERROR=0,Jh.TIMEOUT=8,Jh.HTTP_ERROR=6,Jm.COMPLETE="complete",Xh.EventType=Uo,Uo.OPEN="a",Uo.CLOSE="b",Uo.ERROR="c",Uo.MESSAGE="d",gr.prototype.listen=gr.prototype.N,zt.prototype.listenOnce=zt.prototype.O,zt.prototype.getLastError=zt.prototype.La,zt.prototype.getLastErrorCode=zt.prototype.Da,zt.prototype.getStatus=zt.prototype.ba,zt.prototype.getResponseJson=zt.prototype.Qa,zt.prototype.getResponseText=zt.prototype.ga,zt.prototype.send=zt.prototype.ea;var pE=Xi.createWebChannelTransport=function(){return new yd},vd=Xi.getStatEventTarget=function(){return Qh()},cy=Xi.ErrorCode=Jh,gE=Xi.EventType=Jm,aA=Xi.Event=Di,Jp=Xi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},uA=Xi.FetchXmlHttpFactory=ld,Xp=Xi.WebChannel=Xh,mE=Xi.XhrIo=zt;const Vv="@firebase/firestore";class Dr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dr.UNAUTHENTICATED=new Dr(null),Dr.GOOGLE_CREDENTIALS=new Dr("google-credentials-uid"),Dr.FIRST_PARTY=new Dr("first-party-uid"),Dr.MOCK_USER=new Dr("mock-user");let wd="9.8.0";const Go=new Ei.Yd("@firebase/firestore");function pf(){return Go.logLevel}function ke(n,...e){if(Go.logLevel<=Ei.in.DEBUG){const t=e.map(Ed);Go.debug(`Firestore (${wd}): ${n}`,...t)}}function sr(n,...e){if(Go.logLevel<=Ei.in.ERROR){const t=e.map(Ed);Go.error(`Firestore (${wd}): ${n}`,...t)}}function bd(n,...e){if(Go.logLevel<=Ei.in.WARN){const t=e.map(Ed);Go.warn(`Firestore (${wd}): ${n}`,...t)}}function Ed(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function Et(n,e){n||Xe()}function $e(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends mt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class lA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _E{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dr.UNAUTHENTICATED))}shutdown(){}}class dA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vE{constructor(e){this.t=e,this.currentUser=Dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const c=D=>this.i!==a?(a=this.i,t(D)):Promise.resolve();let h=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Tr,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const D=h;e.enqueueRetryable((0,pe.Z)(function*(){yield D.promise,yield c(r.currentUser)}))},E=D=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(D=>E(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?E(D):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Tr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new lA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new Dr(e)}}class hA{constructor(e,t,r){this.type="FirstParty",this.user=Dr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class fA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new hA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=c=>{null!=c.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.p;return this.p=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const a=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.g.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.g.getImmediate({optional:!0});c?a(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.p=t.token,new oo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function mA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Cs.A=-1;class wE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=mA(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function Id(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function bE(n){return n+"\0"}class or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new or(0,0))}static max(){return new yt(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function At(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Uv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vc{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rt extends Vc{construct(e,t,r){return new Rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Rt(t)}static emptyPath(){return new Rt([])}}const EE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends Vc{construct(e,t,r){return new Ar(e,t,r)}static isValidIdentifier(e){return EE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ar(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new Ce(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ce(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Ce(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,a+=2}else"`"===y?(h=!h,a++):"."!==y||h?(r+=y,a++):(c(),a++)}if(c(),h)throw new Ce(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(t)}static emptyPath(){return new Ar([])}}class Uc{constructor(e){this.fields=e,e.sort(Ar.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Id(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ar(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const IE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fa(n){if(Et(!!n),"string"==typeof n){let e=0;const t=IE.exec(n);if(Et(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ur(n.seconds),nanos:ur(n.nanos)}}function ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bc(n){return"string"==typeof n?ar.fromBase64String(n):ar.fromUint8Array(n)}function CE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function La(n){const e=n.mapValue.fields.__previous_value__;return CE(e)?La(e):e}function jc(n){const e=Fa(n.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}class ly{constructor(e,t,r,a,c,h,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.useFetchStreams=E}}class qo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qo&&e.projectId===this.projectId&&e.database===this.database}}function dy(n){return null==n}function eg(n){return 0===n&&1/n==-1/0}function Bv(n){return"number"==typeof n&&Number.isInteger(n)&&!eg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Rt.fromString(e))}static fromName(e){return new Be(Rt.fromString(e).popFirst(5))}static empty(){return new Be(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Rt(e.slice()))}}const $c={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jv={nullValue:"NULL_VALUE"};function Hc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?CE(n)?4:wA(n)?9007199254740991:10:Xe()}function Wo(n,e){if(n===e)return!0;const t=Hc(n);if(t!==Hc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jc(n).isEqual(jc(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Fa(r.timestampValue),h=Fa(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Bc(n.bytesValue).isEqual(Bc(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return ur(r.geoPointValue.latitude)===ur(a.geoPointValue.latitude)&&ur(r.geoPointValue.longitude)===ur(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return ur(r.integerValue)===ur(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=ur(r.doubleValue),h=ur(a.doubleValue);return c===h?eg(c)===eg(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Id(n.arrayValue.values||[],e.arrayValue.values||[],Wo);case 10:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(At(c)!==At(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===h[y]||!Wo(c[y],h[y])))return!1;return!0}(n,e);default:return Xe()}var a}function tg(n,e){return void 0!==(n.values||[]).find(t=>Wo(t,e))}function Va(n,e){if(n===e)return 0;const t=Hc(n),r=Hc(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=ur(a.integerValue||a.doubleValue),y=ur(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1}(n,e);case 3:return yA(n.timestampValue,e.timestampValue);case 4:return yA(jc(n),jc(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Bc(a),y=Bc(c);return h.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),y=c.split("/");for(let E=0;E<h.length&&E<y.length;E++){const D=Ft(h[E],y[E]);if(0!==D)return D}return Ft(h.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Ft(ur(a.latitude),ur(c.latitude));return 0!==h?h:Ft(ur(a.longitude),ur(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],y=c.values||[];for(let E=0;E<h.length&&E<y.length;++E){const D=Va(h[E],y[E]);if(D)return D}return Ft(h.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===$c.mapValue&&c===$c.mapValue)return 0;if(a===$c.mapValue)return 1;if(c===$c.mapValue)return-1;const h=a.fields||{},y=Object.keys(h),E=c.fields||{},D=Object.keys(E);y.sort(),D.sort();for(let N=0;N<y.length&&N<D.length;++N){const M=Ft(y[N],D[N]);if(0!==M)return M;const $=Va(h[y[N]],E[D[N]]);if(0!==$)return $}return Ft(y.length,D.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function yA(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=Fa(n),r=Fa(e),a=Ft(t.seconds,r.seconds);return 0!==a?a:Ft(t.nanos,r.nanos)}function ng(n){return DE(n)}function DE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=Fa(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bc(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",c=!0;for(const h of r.values||[])c?c=!1:a+=",",a+=DE(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const y of a)h?h=!1:c+=",",c+=`${y}:${DE(r.fields[y])}`;return c+"}"}(n.mapValue):Xe();var e}function gf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function TE(n){return!!n&&"integerValue"in n}function hy(n){return!!n&&"arrayValue"in n}function _A(n){return!!n&&"nullValue"in n}function vA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $v(n){return!!n&&"mapValue"in n}function fy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Lc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wA(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gc(n){return"nullValue"in n?jv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gf(qo.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function Hv(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gf(qo.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?$c:Xe()}function AE(n,e){const t=Va(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gv(n,e){const t=Va(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$v(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fy(t)}setAll(e){let t=Ar.emptyPath(),r={},a=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const E=this.getFieldsMap(t);this.applyChanges(E,r,a),r={},a=[],t=y.popLast()}h?r[y.lastSegment()]=fy(h):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());$v(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];$v(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Lc(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new Gr(fy(this.value))}}function qv(n){const e=[];return Lc(n.fields,(t,r)=>{const a=new Ar([t]);if($v(r)){const c=qv(r.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new Uc(e)}class vn{constructor(e,t,r,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new vn(e,0,yt.min(),yt.min(),Gr.empty(),0)}static newFoundDocument(e,t,r){return new vn(e,1,t,yt.min(),r,0)}static newNoDocument(e,t){return new vn(e,2,t,yt.min(),Gr.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,yt.min(),Gr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class py{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Ua(n){return n.fields.find(e=>2===e.kind)}function qc(n){return n.fields.filter(e=>2!==e.kind)}py.UNKNOWN_ID=-1;class gy{constructor(e,t){this.fieldPath=e,this.kind=t}}class my{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new my(0,ao.min())}}function yy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=yt.fromTimestamp(1e9===r?new or(t+1,0):new or(t,r));return new ao(a,Be.empty(),e)}function bA(n){return new ao(n.readTime,n.key,-1)}class ao{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ao(yt.min(),Be.empty(),-1)}static max(){return new ao(yt.max(),Be.empty(),-1)}}function SE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}class cr{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=null!=r?r:Yn.RED,this.left=null!=a?a:Yn.EMPTY,this.right=null!=c?c:Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new Yn(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Yn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1,Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,a){return this}insert(n,e,t){return new Yn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cd(this.data.getIterator())}getIteratorFrom(e){return new Cd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class Cd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ba(n){return n.hasNext()?n.getNext():void 0}class mf{constructor(e,t=null,r=[],a=[],c=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=y,this.P=null}}function xE(n,e=null,t=[],r=[],a=null,c=null,h=null){return new mf(n,e,t,r,a,c,h)}function zc(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+ng(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),dy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ng(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ng(r)).join(",")),e.P=t}return e.P}function Dd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!TM(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!Wo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wv(n.startAt,e.startAt)&&Wv(n.endAt,e.endAt)}function yf(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rg(n,e){return n.filters.filter(t=>t instanceof qr&&t.field.isEqual(e))}function ig(n,e,t){let r=jv,a=!0;for(const c of rg(n,e)){let h=jv,y=!0;switch(c.op){case"<":case"<=":h=Gc(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,y=!1;break;case"!=":case"not-in":h=jv}AE({value:r,inclusive:a},{value:h,inclusive:y})<0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];AE({value:r,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}function RE(n,e,t){let r=$c,a=!0;for(const c of rg(n,e)){let h=$c,y=!0;switch(c.op){case">=":case">":h=Hv(c.value),y=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,y=!1;break;case"!=":case"not-in":h=$c}Gv({value:r,inclusive:a},{value:h,inclusive:y})>0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];Gv({value:r,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}class qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new DM(e,t,r):"array-contains"===t?new kE(e,r):"in"===t?new EA(e,r):"not-in"===t?new IA(e,r):"array-contains-any"===t?new Ds(e,r):new qr(e,t,r)}static V(e,t,r){return"in"===t?new ME(e,r):new OE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Va(t,this.value)):null!==t&&Hc(this.value)===Hc(t)&&this.v(Va(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class DM extends qr{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.v(t)}}class ME extends qr{constructor(e,t){super(e,"in",t),this.keys=PE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OE extends qr{constructor(e,t){super(e,"not-in",t),this.keys=PE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function PE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class kE extends qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hy(t)&&tg(t.arrayValue,this.value)}}class EA extends qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tg(this.value.arrayValue,t)}}class IA extends qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(tg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tg(this.value.arrayValue,t)}}class Ds extends qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tg(this.value.arrayValue,r))}}class Kc{constructor(e,t){this.position=e,this.inclusive=t}}class _f{constructor(e,t="asc"){this.field=e,this.dir=t}}function TM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function CA(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(r=c.field.isKeyField()?Be.comparator(Be.fromName(h.referenceValue),t.key):Va(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function Wv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wo(n.position[t],e.position[t]))return!1;return!0}class Zc{constructor(e,t=null,r=[],a=[],c=null,h="F",y=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=y,this.endAt=E,this.D=null,this.C=null}}function FE(n,e,t,r,a,c,h,y){return new Zc(n,e,t,r,a,c,h,y)}function Yc(n){return new Zc(n)}function zv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Kv(n){for(const e of n.filters)if(e.S())return e.field;return null}function Zv(n){return null!==n.collectionGroup}function Td(n){const e=$e(n);if(null===e.D){e.D=[];const t=Kv(e),r=zv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new _f(t)),e.D.push(new _f(Ar.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.D.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new _f(Ar.keyField(),c))}}}return e.D}function uo(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=xE(e.path,e.collectionGroup,Td(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Td(e))t.push(new _f(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Kc(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Kc(e.startAt.position,e.startAt.inclusive):null;e.C=xE(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.C}function Yv(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sg(n,e){return Dd(uo(n),uo(e))&&n.limitType===e.limitType}function VE(n){return`${zc(uo(n))}|lt:${n.limitType}`}function _y(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ng(r.value)}`;var r}).join(", ")}]`),dy(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ng(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ng(t)).join(",")),`Target(${e})`}(uo(n))}; limitType=${n.limitType})`}function vy(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Be.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,c,h){const y=CA(a,c,h);return a.inclusive?y<=0:y<0}(t.startAt,Td(t),r)||t.endAt&&!function(a,c,h){const y=CA(a,c,h);return a.inclusive?y>=0:y>0}(t.endAt,Td(t),r)));var t,r}function UE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zo(n){return(e,t)=>{let r=!1;for(const a of Td(n)){const c=Qv(a,e,t);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function Qv(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(a,c,h){const y=c.data.field(a),E=h.data.field(a);return null!==y&&null!==E?Va(y,E):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function BE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eg(e)?"-0":e}}function jE(n){return{integerValue:""+n}}function DA(n,e){return Bv(e)?jE(e):BE(n,e)}class og{constructor(){this._=void 0}}function TA(n,e,t){return n instanceof Qc?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Ad?HE(n,e):n instanceof ja?wy(n,e):function(r,a){const c=$E(r,a),h=by(c)+by(r.k);return TE(c)&&TE(r.k)?jE(h):BE(r.M,h)}(n,e)}function AA(n,e,t){return n instanceof Ad?HE(n,e):n instanceof ja?wy(n,e):t}function $E(n,e){return n instanceof vf?TE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qc extends og{}class Ad extends og{constructor(e){super(),this.elements=e}}function HE(n,e){const t=Ey(e);for(const r of n.elements)t.some(a=>Wo(a,r))||t.push(r);return{arrayValue:{values:t}}}class ja extends og{constructor(e){super(),this.elements=e}}function wy(n,e){let t=Ey(e);for(const r of n.elements)t=t.filter(a=>!Wo(a,r));return{arrayValue:{values:t}}}class vf extends og{constructor(e,t){super(),this.M=e,this.k=t}}function by(n){return ur(n.integerValue||n.doubleValue)}function Ey(n){return hy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wf{constructor(e,t){this.field=e,this.transform=t}}class xA{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Iy{}function GE(n,e,t){n instanceof Ts?function(r,a,c){const h=r.value.clone(),y=zE(r.fieldTransforms,a,c.transformResults);h.setAll(y),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof $a?function(r,a,c){if(!Jv(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=zE(r.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(WE(r)),y.setAll(h),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cy(n,e,t){var a;n instanceof Ts?function(r,a,c){if(!Jv(r.precondition,a))return;const h=r.value.clone(),y=NA(r.fieldTransforms,c,a);h.setAll(y),a.convertToFoundDocument(ew(a),h).setHasLocalMutations()}(n,e,t):n instanceof $a?function(r,a,c){if(!Jv(r.precondition,a))return;const h=NA(r.fieldTransforms,c,a),y=a.data;y.setAll(WE(r)),y.setAll(h),a.convertToFoundDocument(ew(a),y).setHasLocalMutations()}(n,e,t):Jv(n.precondition,a=e)&&a.convertToNoDocument(yt.min())}function qE(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=$E(r.transform,a||null);null!=c&&(null==t&&(t=Gr.empty()),t.set(r.field,c))}return t||null}function Xv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Id(t,r,(a,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ad&&r instanceof Ad||t instanceof ja&&r instanceof ja?Id(t.elements,r.elements,Wo):t instanceof vf&&r instanceof vf?Wo(t.k,r.k):t instanceof Qc&&r instanceof Qc);var t,r}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function ew(n){return n.isFoundDocument()?n.version:yt.min()}class Ts extends Iy{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}}class $a extends Iy{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}}function WE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zE(n,e,t){const r=new Map;Et(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,y=e.data.field(c.field);r.set(c.field,AA(h,y,t[a]))}return r}function NA(n,e,t){const r=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);r.set(a.field,TA(c,h,e))}return r}class Ha extends Iy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Dy extends Iy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ag{constructor(e){this.count=e}}var kn,Yt;function Ty(n){switch(n){default:return Xe();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function tw(n){if(void 0===n)return sr("GRPC error has no .code"),he.UNKNOWN;switch(n){case kn.OK:return he.OK;case kn.CANCELLED:return he.CANCELLED;case kn.UNKNOWN:return he.UNKNOWN;case kn.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case kn.INTERNAL:return he.INTERNAL;case kn.UNAVAILABLE:return he.UNAVAILABLE;case kn.UNAUTHENTICATED:return he.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case kn.NOT_FOUND:return he.NOT_FOUND;case kn.ALREADY_EXISTS:return he.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return he.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case kn.ABORTED:return he.ABORTED;case kn.OUT_OF_RANGE:return he.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return he.UNIMPLEMENTED;case kn.DATA_LOSS:return he.DATA_LOSS;default:return Xe()}}(Yt=kn||(kn={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class Jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,c]of r)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Lc(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return Uv(this.inner)}size(){return this.innerSize}}const KE=new cr(Be.comparator);function co(){return KE}const nw=new cr(Be.comparator);function rw(...n){let e=nw;for(const t of n)e=e.insert(t.key,t);return e}function ug(){return new Jc(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZE=new cr(Be.comparator),bf=new hn(Be.comparator);function sn(...n){let e=bf;for(const t of n)e=e.add(t);return e}const RA=new hn(Ft);function Ay(){return RA}class Ga{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,cg.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ga(yt.min(),r,Ay(),co(),sn())}}class cg{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new cg(ar.EMPTY_BYTE_STRING,t,sn(),sn(),sn())}}class Sy{constructor(e,t,r,a){this.O=e,this.removedTargetIds=t,this.key=r,this.F=a}}class YE{constructor(e,t){this.targetId=e,this.$=t}}class QE{constructor(e,t,r=ar.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class MA{constructor(){this.B=0,this.L=Sn(),this.U=ar.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=sn(),t=sn(),r=sn();return this.L.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Xe()}}),new cg(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Sn()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class OA{constructor(e){this.nt=e,this.st=new Map,this.it=co(),this.rt=iw(),this.ot=new hn(Ft)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,a)=>{this.ft(a)&&t(a)})}_t(e){const t=e.targetId,r=e.$.count,a=this.wt(t);if(a){const c=a.target;if(yf(c))if(0===r){const h=new Be(c.path);this.ct(t,h,vn.newNoDocument(h,yt.min()))}else Et(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((c,h)=>{const y=this.wt(h);if(y){if(c.current&&yf(y.target)){const E=new Be(y.target.path);null!==this.it.get(E)||this.It(h,E)||this.ct(h,E,vn.newNoDocument(E,e))}c.j&&(t.set(h,c.H()),c.J())}});let r=sn();this.rt.forEach((c,h)=>{let y=!0;h.forEachWhile(E=>{const D=this.wt(E);return!D||2===D.purpose||(y=!1,!1)}),y&&(r=r.add(c))}),this.it.forEach((c,h)=>h.setReadTime(e));const a=new Ga(e,t,this.ot,this.it,r);return this.it=co(),this.rt=iw(),this.ot=new hn(Ft),a}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const a=this.lt(e);this.It(e,t)?a.Y(t,1):a.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new MA,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new hn(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new MA),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function iw(){return new cr(Be.comparator)}function Sn(){return new cr(Be.comparator)}const sw={asc:"ASCENDING",desc:"DESCENDING"},AM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ru{constructor(e,t){this.databaseId=e,this.N=t}}function Sd(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xy(n,e){return n.N?e.toBase64():e.toUint8Array()}function SM(n,e){return Sd(n,e.toTimestamp())}function Wr(n){return Et(!!n),yt.fromTimestamp(function(e){const t=Fa(e);return new or(t.seconds,t.nanos)}(n))}function ow(n,e){return(t=n,new Rt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function aw(n){const e=Rt.fromString(n);return Et(fw(e)),e}function Ef(n,e){return ow(n.databaseId,e.path)}function Ko(n,e){const t=aw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(If(t))}function Ny(n,e){return ow(n.databaseId,e)}function JE(n){const e=aw(n);return 4===e.length?Rt.emptyPath():If(e)}function lg(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function If(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ry(n,e,t){return{name:Ef(n,e),fields:t.value.mapValue.fields}}function uw(n,e,t){const r=Ko(n,e.name),a=Wr(e.updateTime),c=new Gr({mapValue:{fields:e.fields}}),h=vn.newFoundDocument(r,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Cf(n,e){let t;if(e instanceof Ts)t={update:Ry(n,e.key,e.value)};else if(e instanceof Ha)t={delete:Ef(n,e.key)};else if(e instanceof $a)t={update:Ry(n,e.key,e.data),updateMask:rI(e.fieldMask)};else{if(!(e instanceof Dy))return Xe();t={verify:Ef(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof Qc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ad)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ja)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof vf)return{fieldPath:c.field.canonicalString(),increment:h.k};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:SM(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Xe()),t;var a}function cw(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Qn.updateTime(Wr(a.updateTime)):void 0!==a.exists?Qn.exists(a.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let y=null;"setToServerValue"in h?(Et("REQUEST_TIME"===h.setToServerValue),y=new Qc):"appendMissingElements"in h?y=new Ad(h.appendMissingElements.values||[]):"removeAllFromArray"in h?y=new ja(h.removeAllFromArray.values||[]):"increment"in h?y=new vf(c,h.increment):Xe();const E=Ar.fromServerFormat(h.fieldPath);return new wf(E,y)}(n,a)):[];var a;if(e.update){const a=Ko(n,e.update.name),c=new Gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Uc((e.updateMask.fieldPaths||[]).map(D=>Ar.fromServerFormat(D)));return new $a(a,c,h,t,r)}return new Ts(a,c,t,r)}if(e.delete){const a=Ko(n,e.delete);return new Ha(a,t)}if(e.verify){const a=Ko(n,e.verify);return new Dy(a,t)}return Xe()}function tI(n,e){return{documents:[Ny(n,e.path)]}}function nI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ny(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ny(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(E){if(0===E.length)return;const D=E.map(N=>function(M){if("=="===M.op){if(vA(M.value))return{unaryFilter:{field:dg(M.field),op:"IS_NAN"}};if(_A(M.value))return{unaryFilter:{field:dg(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(vA(M.value))return{unaryFilter:{field:dg(M.field),op:"IS_NOT_NAN"}};if(_A(M.value))return{unaryFilter:{field:dg(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dg(M.field),op:FA(M.op),value:M.value}}}(N));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(E){if(0!==E.length)return E.map(D=>{return{field:dg((N=D).field),direction:kA(N.dir)};var N})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(D=e.limit,n.N||dy(D)?D:{value:D});var D,y,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function lw(n){let e=JE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Et(1===r);const N=t.from[0];N.allDescendants?a=N.collectionId:e=e.child(N.collectionId)}let c=[];t.where&&(c=dw(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(N=>{return new _f(hg((M=N).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let y=null;t.limit&&(y=function(N){let M;return M="object"==typeof N?N.value:N,dy(M)?null:M}(t.limit));let E=null;var N;t.startAt&&(E=new Kc((N=t.startAt).values||[],!!N.before));let D=null;return t.endAt&&(D=function(N){return new Kc(N.values||[],!N.before)}(t.endAt)),FE(e,a,h,c,y,"F",E,D)}function dw(n){return n?void 0!==n.unaryFilter?[LA(n)]:void 0!==n.fieldFilter?[hw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>dw(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function kA(n){return sw[n]}function FA(n){return AM[n]}function dg(n){return{fieldPath:n.canonicalString()}}function hg(n){return Ar.fromServerFormat(n.fieldPath)}function hw(n){return qr.create(hg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function LA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=hg(n.unaryFilter.field);return qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=hg(n.unaryFilter.field);return qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hg(n.unaryFilter.field);return qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=hg(n.unaryFilter.field);return qr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function rI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function is(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VA(e)),e=Zo(n.get(t),e);return VA(e)}function Zo(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function VA(n){return n+"\x01\x01"}function Mu(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rt.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&Xe(),n.charAt(h+1)){case"\x01":const y=n.substring(c,h);let E;0===a.length?E=y:(a+=y,E=a,a=""),r.push(E);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:Xe()}c=h+2}return new Rt(r)}const UA=["userId","batchId"];function fg(n,e){return[n,is(e)]}function pw(n,e,t){return[n,is(e),t]}const iI={},BA=["prefixPath","collectionGroup","readTime","documentId"],NM=["prefixPath","collectionGroup","documentId"],sI=["collectionGroup","readTime","prefixPath","documentId"],gw=["canonicalId","targetId"],jA=["targetId","path"],mw=["path","targetId"],$A=["collectionId","parent"],HA=["indexId","uid"],GA=["uid","sequenceNumber"],qA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WA=["indexId","uid","orderedDocumentKey"],zA=["userId","collectionPath","documentId"],My=["userId","collectionPath","largestBatchId"],Df=["userId","collectionGroup","largestBatchId"],yw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yo=[...yw,"documentOverlays"],Tf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KA=[...Tf,"indexConfiguration","indexState","indexEntries"],oI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Oy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let a=0,c=0,h=!1;e.forEach(y=>{++a,y.next(()=>{++c,h&&c===a&&t()},E=>r(E))}),h=!0,c===a&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(a=>a?ae.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}}class Xc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Tr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new el(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const a=tl(r.target.error);this.At.reject(new el(e,a))}}static open(e,t,r,a){try{return new Xc(t,e.transaction(a,r))}catch(c){throw new el(t,c)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _w(t)}}class In{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===In.Vt((0,mt.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),lo(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,mt.hl)())return!1;if(In.St())return!0;const e=(0,mt.z$)(),t=In.Vt(e),r=0<t&&t<10,a=In.Dt(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,pe.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{a(new el(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const y=h.target.error;a("VersionError"===y.name?new Ce(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ce(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new el(e,y))},c.onupgradeneeded=h=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var c=this;return(0,pe.Z)(function*(){const h="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.Nt(e);const E=Xc.open(c.db,e,h?"readonly":"readwrite",r),D=a(E).next(N=>(E.bt(),N)).catch(N=>(E.abort(N),ae.reject(N))).toPromise();return D.catch(()=>{}),yield E.Rt,D}catch(E){const D="FirebaseError"!==E.name&&y<3;if(ke("SimpleDb","Transaction failed with error:",E.message,"Retrying:",D),c.close(),!D)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class xd{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return lo(this.Ft.delete())}}class el extends Ce{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zr(n){return"IndexedDbTransactionError"===n.name}class _w{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lo(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),lo(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),c=[];return this.Kt(a,(h,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(r.range);return new ae((c,h)=>{a.onerror=y=>{h(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((a,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const a=this.cursor(r);return this.Kt(a,(c,h,y)=>y.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.Kt(a,t)}zt(e){const t=this.cursor({});return new ae((r,a)=>{t.onerror=c=>{const h=tl(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(y=>{y?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new ae((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const y=h.target.result;if(!y)return void a();const E=new xd(y),D=t(y.primaryKey,y.value,E);if(D instanceof ae){const N=D.catch(M=>(E.done(),ae.reject(M)));r.push(N)}E.isDone?a():null===E.Lt?y.continue():y.continue(E.Lt)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lo(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=tl(r.target.error);t(a)}})}let Nd=!1;function tl(n){const e=In.Vt((0,mt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nd||(Nd=!0,setTimeout(()=>{throw r},0)),r}}return n}class Rd extends Oy{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Gn(n,e){const t=$e(n);return In.xt(t.Ht,e)}class nl{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&GE(c,e,r[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Cy(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Cy(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),a=r;this.applyToLocalView(a),r.isValidDocument()||a.convertToNoDocument(yt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&Id(this.mutations,e.mutations,(t,r)=>Xv(t,r))&&Id(this.baseMutations,e.baseMutations,(t,r)=>Xv(t,r))}}class rl{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Et(e.mutations.length===r.length);let a=ZE;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,r[h].version);return new rl(e,t,r,a)}}class il{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class As{constructor(e,t,r,a,c=yt.min(),h=yt.min(),y=ar.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vw{constructor(e){this.Jt=e}}function ww(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:pg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ef(a=n.Jt,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Sd(a,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:sl(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:sl(e.version)}}var a,c;return r}function pg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function sl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ol(n){const e=new or(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Md(n,e){const t=(e.baseMutations||[]).map(c=>cw(n.Jt,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>cw(n.Jt,c)),a=or.fromMillis(e.localWriteTimeMs);return new nl(e.batchId,a,t,r)}function Af(n){const e=ol(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ol(n.lastLimboFreeSnapshotVersion):yt.min();let r;var a;return void 0!==n.query.documents?(Et(1===(a=n.query).documents.length),r=uo(Yc(JE(a.documents[0])))):r=uo(lw(n.query)),new As(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ar.fromBase64String(n.resumeToken))}function bw(n,e){const t=sl(e.snapshotVersion),r=sl(e.lastLimboFreeSnapshotVersion);let a;a=yf(e.target)?tI(n.Jt,e.target):nI(n.Jt,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zc(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Ew(n){const e=lw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Yv(e,e.limit,"L"):e}function Py(n,e){return new il(e.largestBatchId,cw(n.Jt,e.overlayMutation))}function uI(n,e){const t=e.path.lastSegment();return[n,is(e.path.popLast()),t]}class ZA{getBundleMetadata(e,t){return Iw(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:ol(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Iw(e).put({bundleId:(r=t).id,createTime:sl(Wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cI(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:Ew(a.bundledQuery),readTime:ol(a.readTime)};var a})}saveNamedQuery(e,t){return cI(e).put({name:(r=t).name,readTime:sl(Wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Iw(n){return Gn(n,"bundles")}function cI(n){return Gn(n,"namedQueries")}class lI{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new lI(e,t.uid||"")}getOverlay(e,t){return gg(e).get(uI(this.userId,t)).next(r=>r?Py(this.M,r):null)}saveOverlays(e,t,r){const a=[];return r.forEach((c,h)=>{const y=new il(t,h);a.push(this.Xt(e,y))}),ae.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(h=>a.add(is(h.getCollectionPath())));const c=[];return a.forEach(h=>{const y=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);c.push(gg(e).Qt("collectionPathOverlayIndex",y))}),ae.waitFor(c)}getOverlaysForCollection(e,t,r){const a=ug(),c=is(t),h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return gg(e).qt("collectionPathOverlayIndex",h).next(y=>{for(const E of y){const D=Py(this.M,E);a.set(D.getKey(),D)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const c=ug();let h;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gg(e).Wt({index:"collectionGroupOverlayIndex",range:y},(E,D,N)=>{const M=Py(this.M,D);c.size()<a||M.largestBatchId===h?(c.set(M.getKey(),M),h=M.largestBatchId):N.done()}).next(()=>c)}Xt(e,t){return gg(e).put(function(r,a,c){const[h,y,E]=uI(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:E,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Cf(r.Jt,c.mutation)}}(this.M,this.userId,t))}}function gg(n){return Gn(n,"documentOverlays")}class al{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(ur(e.integerValue));else if("doubleValue"in e){const r=ur(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),eg(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Bc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?wA(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xe()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const a of Object.keys(r))this.re(a,t),this.te(r[a],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const a of r)this.te(a,t)}ae(e,t){this.ne(t,37),Be.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function YA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Cw(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const c=YA(255&t[a]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}al.fe=new al;class QA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const a=t.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const a=t.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}this.ye()}Te(e){const t=this.Ee(e),r=Cw(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Re(e){const t=this.Ee(e),r=Cw(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class JA{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class RM{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class mg{constructor(){this.De=new QA,this.Ce=new JA(this.De),this.xe=new RM(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ul{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ul(this.indexId,this.documentKey,this.arrayValue,r)}}function Sf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=XA(n.arrayValue,e.arrayValue),0!==t?t:(t=XA(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function XA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class MM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Ua(e);if(void 0!==t&&!this.Be(t))return!1;const r=qc(e);let a=0,c=0;for(;a<r.length&&this.Be(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.Fe){const h=r[a];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[c++],h))return!1;++a}for(;a<r.length;++a){const h=r[a];if(c>=this.Me.length||!this.Ue(this.Me[c++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class eS{constructor(){this.qe=new dI}addToCollectionParentIndex(e,t){return this.qe.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(ao.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class dI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new hn(Rt.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new hn(Rt.comparator)).toArray()}}const ky=new Uint8Array(0);class tS{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new dI,this.Ge=new Jc(r=>zc(r),(r,a)=>Dd(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const c={collectionId:r,parent:is(a)};return Fy(e).put(c)}return ae.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[bE(t),""],!1,!0);return Fy(e).qt(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(Mu(h.parent))}return r})}addFieldIndex(e,t){const r=Ly(e),a={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;return delete a.indexId,r.add(a).next()}deleteFieldIndex(e,t){const r=Ly(e),a=Dw(e),c=Od(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Od(e);let a=!0;const c=new Map;return ae.forEach(this.Qe(t),h=>this.je(e,h).next(y=>{a&&(a=!!y),c.set(h,y)})).next(()=>{if(a){let h=sn();const y=[];return ae.forEach(c,(E,D)=>{var N;ke("IndexedDbIndexManager",`Using index ${N=E,`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(Ut=>`${Ut.fieldPath}:${Ut.kind}`).join(",")}`} to execute ${zc(t)}`);const M=function(Ut,Nt){const Wt=Ua(Nt);if(void 0===Wt)return null;for(const ln of rg(Ut,Wt.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(D,E),$=function(Ut,Nt){const Wt=new Map;for(const ln of qc(Nt))for(const os of rg(Ut,ln.fieldPath))switch(os.op){case"==":case"in":Wt.set(ln.fieldPath.canonicalString(),os.value);break;case"not-in":case"!=":return Wt.set(ln.fieldPath.canonicalString(),os.value),Array.from(Wt.values())}return null}(D,E),K=function(Ut,Nt){const Wt=[];let ln=!0;for(const os of qc(Nt)){const dE=0===os.kind?ig(Ut,os.fieldPath,Ut.startAt):RE(Ut,os.fieldPath,Ut.startAt);Wt.push(dE.value),ln&&(ln=dE.inclusive)}return new Kc(Wt,ln)}(D,E),ie=function(Ut,Nt){const Wt=[];let ln=!0;for(const os of qc(Nt)){const dE=0===os.kind?RE(Ut,os.fieldPath,Ut.endAt):ig(Ut,os.fieldPath,Ut.endAt);Wt.push(dE.value),ln&&(ln=dE.inclusive)}return new Kc(Wt,ln)}(D,E),xe=this.We(E,D,K),Fe=this.We(E,D,ie),Mt=this.ze(E,D,$),Vt=this.He(E.indexId,M,xe,K.inclusive,Fe,ie.inclusive,Mt);return ae.forEach(Vt,Ut=>r.Gt(Ut,t.limit).next(Nt=>{Nt.forEach(Wt=>{const ln=Be.fromSegments(Wt.documentKey);h.has(ln)||(h=h.add(ln),y.push(ln))})}))}).next(()=>y)}return ae.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,a,c,h,y){const E=(null!=t?t.length:1)*Math.max(r.length,c.length),D=E/(null!=t?t.length:1),N=[];for(let M=0;M<E;++M){const $=t?this.Je(t[M/D]):ky,K=this.Ye(e,$,r[M%D],a),ie=this.Xe(e,$,c[M%D],h),xe=y.map(Fe=>this.Ye(e,$,Fe,!0));N.push(...this.createRange(K,ie,xe))}return N}Ye(e,t,r,a){const c=new ul(e,Be.empty(),t,r);return a?c:c.ke()}Xe(e,t,r,a){const c=new ul(e,Be.empty(),t,r);return a?c.ke():c}je(e,t){const r=new MM(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const y of c)r.$e(y)&&(!h||y.fields.length>h.fields.length)&&(h=y);return h})}getIndexType(e,t){let r=2;return ae.forEach(this.Qe(t),a=>this.je(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let y=new hn(Ar.comparator),E=!1;for(const D of h.filters){const N=D;N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?E=!0:y=y.add(N.field))}for(const D of h.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new mg;for(const a of qc(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=r.Ne(a.kind);al.fe.Zt(c,h)}return r.Se()}Je(e){const t=new mg;return al.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new mg;return al.fe.Zt(gf(this.databaseId,t),r.Ne(function(a){const c=qc(a);return 0===c.length?0:c[c.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let a=[];a.push(new mg);let c=0;for(const h of qc(e)){const y=r[c++];for(const E of a)if(this.en(t,h.fieldPath)&&hy(y))a=this.nn(a,h,y);else{const D=E.Ne(h.kind);al.fe.Zt(y,D)}}return this.sn(a)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const a=[...e],c=[];for(const h of r.arrayValue.values||[])for(const y of a){const E=new mg;E.seed(y.Se()),al.fe.Zt(h,E.Ne(t.kind)),c.push(E)}return c}en(e,t){return!!e.filters.find(r=>r instanceof qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ly(e),a=Dw(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(c=>{const h=[];return ae.forEach(c,y=>a.get([y.indexId,this.uid]).next(E=>{h.push(function(D,N){const M=N?new my(N.sequenceNumber,new ao(ol(N.readTime),new Be(Mu(N.documentKey)),N.largestBatchId)):my.empty(),$=D.fields.map(([K,ie])=>new gy(Ar.fromServerFormat(K),ie));return new py(D.indexId,D.collectionGroup,$,M)}(y,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Ft(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Ly(e),c=Dw(e);return this.rn(e).next(h=>a.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>ae.forEach(y,E=>{return c.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:sl(($=r).readTime),documentKey:is($.documentKey.path),largestBatchId:$.largestBatchId});var $})))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(a,c)=>{const h=r.get(a.collectionGroup);return(h?ae.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(r.set(a.collectionGroup,y),ae.forEach(y,E=>this.on(e,a,E).next(D=>{const N=this.un(c,E);return D.isEqual(N)?ae.resolve():this.an(e,c,E,D,N)}))))})}cn(e,t,r,a){return Od(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,a){return Od(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const a=Od(e);let c=new hn(Sf);return a.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(h,y)=>{c=c.add(new ul(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}un(e,t){let r=new hn(Sf);const a=this.Ze(t,e);if(null==a)return r;const c=Ua(t);if(null!=c){const h=e.data.field(c.fieldPath);if(hy(h))for(const y of h.arrayValue.values||[])r=r.add(new ul(t.indexId,e.key,this.Je(y),a))}else r=r.add(new ul(t.indexId,e.key,ky,a));return r}an(e,t,r,a,c){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(y,E,D,N,M){const $=y.getIterator(),K=E.getIterator();let ie=Ba($),xe=Ba(K);for(;ie||xe;){let Fe=!1,Mt=!1;if(ie&&xe){const Vt=D(ie,xe);Vt<0?Mt=!0:Vt>0&&(Fe=!0)}else null!=ie?Mt=!0:Fe=!0;Fe?(N(xe),xe=Ba(K)):Mt?(M(ie),ie=Ba($)):(ie=Ba($),xe=Ba(K))}}(a,c,Sf,y=>{h.push(this.cn(e,t,r,y))},y=>{h.push(this.hn(e,t,r,y))}),ae.waitFor(h)}rn(e){let t=1;return Dw(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,y)=>Sf(h,y)).filter((h,y,E)=>!y||0!==Sf(h,E[y-1]));const a=[];a.push(e);for(const h of r){const y=Sf(h,e),E=Sf(h,t);if(0===y)a[0]=e.ke();else if(y>0&&E<0)a.push(h),a.push(h.ke());else if(E>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2)c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,ky,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,ky,[]]));return c}getMinOffset(e,t){let r;return ae.forEach(this.Qe(t),a=>this.je(e,a).next(c=>{c?(!r||SE(c.indexState.offset,r)<0)&&(r=c.indexState.offset):r=ao.min()})).next(()=>r)}}function Fy(n){return Gn(n,"collectionParents")}function Od(n){return Gn(n,"indexEntries")}function Ly(n){return Gn(n,"indexConfiguration")}function Dw(n){return Gn(n,"indexState")}const nS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ss{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ss(e,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hI(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let y=0;const E=r.Wt({range:h},(N,M,$)=>(y++,$.delete()));c.push(E.next(()=>{Et(1===y)}));const D=[];for(const N of t.mutations){const M=pw(e,N.key.path,t.batchId);c.push(a.delete(M)),D.push(N.key)}return ae.waitFor(c).next(()=>D)}function yg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Ss.DEFAULT_COLLECTION_PERCENTILE=10,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ss.DEFAULT=new Ss(41943040,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ss.DISABLED=new Ss(-1,0,0);class fI{constructor(e,t,r,a){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=a,this.ln={}}static Yt(e,t,r,a){Et(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new fI(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xs(e).Wt({index:"userMutationsIndex",range:r},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const c=xf(e),h=xs(e);return h.add({}).next(y=>{Et("number"==typeof y);const E=new nl(y,t,r,a),D=function($,K,ie){const xe=ie.baseMutations.map(Mt=>Cf($.Jt,Mt)),Fe=ie.mutations.map(Mt=>Cf($.Jt,Mt));return{userId:K,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:xe,mutations:Fe}}(this.M,this.userId,E),N=[];let M=new hn(($,K)=>Ft($.canonicalString(),K.canonicalString()));for(const $ of a){const K=pw(this.userId,$.key.path,y);M=M.add($.key.path.popLast()),N.push(h.put(D)),N.push(c.put(K,iI))}return M.forEach($=>{N.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.ln[y]=E.keys()}),ae.waitFor(N).next(()=>E)})}lookupMutationBatch(e,t){return xs(e).get(t).next(r=>r?(Et(r.userId===this.userId),Md(this.M,r)):null)}fn(e,t){return this.ln[t]?ae.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.ln[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return xs(e).Wt({index:"userMutationsIndex",range:a},(h,y,E)=>{y.userId===this.userId&&(Et(y.batchId>=r),c=Md(this.M,y)),E.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return xs(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xs(e).qt("userMutationsIndex",t).next(r=>r.map(a=>Md(this.M,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=fg(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return xf(e).Wt({range:a},(h,y,E)=>{const[D,N,M]=h,$=Mu(N);if(D===this.userId&&t.path.isEqual($))return xs(e).get(M).next(K=>{if(!K)throw Xe();Et(K.userId===this.userId),c.push(Md(this.M,K))});E.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Ft);const a=[];return t.forEach(c=>{const h=fg(this.userId,c.path),y=IDBKeyRange.lowerBound(h),E=xf(e).Wt({range:y},(D,N,M)=>{const[$,K,ie]=D,xe=Mu(K);$===this.userId&&c.path.isEqual(xe)?r=r.add(ie):M.done()});a.push(E)}),ae.waitFor(a).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=fg(this.userId,r),h=IDBKeyRange.lowerBound(c);let y=new hn(Ft);return xf(e).Wt({range:h},(E,D,N)=>{const[M,$,K]=E,ie=Mu($);M===this.userId&&r.isPrefixOf(ie)?ie.length===a&&(y=y.add(K)):N.done()}).next(()=>this.dn(e,y))}dn(e,t){const r=[],a=[];return t.forEach(c=>{a.push(xs(e).get(c).next(h=>{if(null===h)throw Xe();Et(h.userId===this.userId),r.push(Md(this.M,h))}))}),ae.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return hI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ae.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return xf(e).Wt({range:r},(c,h,y)=>{if(c[0]===this.userId){const E=Mu(c[1]);a.push(E)}else y.done()}).next(()=>{Et(0===a.length)})})}containsKey(e,t){return pI(e,this.userId,t)}wn(e){return Tw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pI(n,e,t){const r=fg(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return xf(n).Wt({range:c,jt:!0},(y,E,D)=>{const[N,M,$]=y;N===e&&M===a&&(h=!0),D.done()}).next(()=>h)}function xs(n){return Gn(n,"mutations")}function xf(n){return Gn(n,"documentMutations")}function Tw(n){return Gn(n,"mutationQueues")}class Pd{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Pd(0)}static yn(){return new Pd(-1)}}class gI{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Pd(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>yt.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.In(e,a)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ou(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let a=0;const c=[];return Ou(e).Wt((h,y)=>{const E=Af(y);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(a++,c.push(this.removeTargetData(e,E)))}).next(()=>ae.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Ou(e).Wt((r,a)=>{const c=Af(a);t(c)})}pn(e){return mI(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}In(e,t){return mI(e).put("targetGlobalKey",t)}Tn(e,t){return Ou(e).put(bw(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=zc(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Ou(e).Wt({range:a,index:"queryTargetsIndex"},(h,y,E)=>{const D=Af(y);Dd(t,D.target)&&(c=D,E.done())}).next(()=>c)}addMatchingKeys(e,t,r){const a=[],c=Pu(e);return t.forEach(h=>{const y=is(h.path);a.push(c.put({targetId:r,path:y})),a.push(this.referenceDelegate.addReference(e,r,h))}),ae.waitFor(a)}removeMatchingKeys(e,t,r){const a=Pu(e);return ae.forEach(t,c=>{const h=is(c.path);return ae.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Pu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Pu(e);let c=sn();return a.Wt({range:r,jt:!0},(h,y,E)=>{const D=Mu(h[1]),N=new Be(D);c=c.add(N)}).next(()=>c)}containsKey(e,t){const r=is(t.path),a=IDBKeyRange.bound([r],[bE(r)],!1,!0);let c=0;return Pu(e).Wt({index:"documentTargetsIndex",jt:!0,range:a},([h,y],E,D)=>{0!==h&&(c++,D.done())}).next(()=>c>0)}Et(e,t){return Ou(e).get(t).next(r=>r?Af(r):null)}}function Ou(n){return Gn(n,"targets")}function mI(n){return Gn(n,"targetGlobal")}function Pu(n){return Gn(n,"targetDocuments")}function kd(n){return Aw.apply(this,arguments)}function Aw(){return(Aw=(0,pe.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==oI)throw n;ke("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function yI([n,e],[t,r]){const a=Ft(n,t);return 0===a?Ft(e,r):a}class rS{constructor(e){this.An=e,this.buffer=new hn(yI),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iS{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,pe.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){zr(a)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield kd(a)}yield t.Sn(e)}))}}class _I{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Cs.A);const r=new rS(t);return this.Dn.forEachTarget(e,a=>r.Pn(a.sequenceNumber)).next(()=>this.Dn.xn(e,a=>r.Pn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(nS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nS):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,a,c,h,y,E,D;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),a=this.params.maximumSequenceNumbersToCollect):a=M,h=Date.now(),this.nthSequenceNumber(e,a))).next(M=>(r=M,y=Date.now(),this.removeTargets(e,r,t))).next(M=>(c=M,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(D=Date.now(),pf()<=Ei.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-N}ms\n\tDetermined least recently used ${a} in `+(y-h)+`ms\n\tRemoved ${c} targets in `+(E-y)+`ms\n\tRemoved ${M} documents in `+(D-E)+`ms\nTotal Duration: ${D-N}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:M})))}}class sS{constructor(e,t){this.db=e,this.garbageCollector=new _I(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,a)=>t(a))}addReference(e,t,r){return _g(e,r)}removeReference(e,t,r){return _g(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _g(e,t)}On(e,t){return function(r,a){let c=!1;return Tw(r).zt(h=>pI(r,h,a).next(y=>(y&&(c=!0),ae.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Mn(e,(h,y)=>{if(y<=t){const E=this.On(e,h).next(D=>{if(!D)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h,yt.min()),Pu(e).delete([0,is(h.path)])))});a.push(E)}}).next(()=>ae.waitFor(a)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _g(e,t)}Mn(e,t){const r=Pu(e);let a,c=Cs.A;return r.Wt({index:"documentTargetsIndex"},([h,y],{path:E,sequenceNumber:D})=>{0===h?(c!==Cs.A&&t(new Be(Mu(a)),c),c=D,a=E):c=Cs.A}).next(()=>{c!==Cs.A&&t(new Be(Mu(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _g(n,e){return Pu(n).put((r=n.currentSequenceNumber,{targetId:0,path:is(e.path),sequenceNumber:r}));var r}class Sw{constructor(){this.changes=new Jc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xw{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fd(e).put(r)}removeEntry(e,t,r){return Fd(e).delete(function(a,c){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],pg(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=vn.newInvalidDocument(t);return Fd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uy(t))},(a,c)=>{r=this.$n(t,c)}).next(()=>r)}Bn(e,t){let r={size:0,document:vn.newInvalidDocument(t)};return Fd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uy(t))},(a,c)=>{r={document:this.$n(t,c),size:yg(c)}}).next(()=>r)}getEntries(e,t){let r=co();return this.Ln(e,t,(a,c)=>{const h=this.$n(a,c);r=r.insert(a,h)}).next(()=>r)}Un(e,t){let r=co(),a=new cr(Be.comparator);return this.Ln(e,t,(c,h)=>{const y=this.$n(c,h);r=r.insert(c,y),a=a.insert(c,yg(h))}).next(()=>({documents:r,qn:a}))}Ln(e,t,r){if(t.isEmpty())return ae.resolve();let a=new hn(vI);t.forEach(E=>a=a.add(E));const c=IDBKeyRange.bound(Uy(a.first()),Uy(a.last())),h=a.getIterator();let y=h.getNext();return Fd(e).Wt({index:"documentKeyIndex",range:c},(E,D,N)=>{const M=Be.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;y&&vI(y,M)<0;)r(y,null),y=h.getNext();y&&y.isEqual(M)&&(r(y,D),y=h.hasNext()?h.getNext():null),y?N.Ut(Uy(y)):N.done()}).next(()=>{for(;y;)r(y,null),y=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),pg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fd(e).qt(IDBKeyRange.bound(a,c,!0)).next(h=>{let y=co();for(const E of h){const D=this.$n(Be.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);y=y.insert(D.key,D)}return y})}getAllFromCollectionGroup(e,t,r,a){let c=co();const h=Nf(t,r),y=Nf(t,ao.max());return Fd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,y,!0)},(E,D,N)=>{const M=this.$n(Be.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);c=c.insert(M.key,M),c.size===a&&N.done()}).next(()=>c)}newChangeBuffer(e){return new OM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Vy(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}Fn(e,t){return Vy(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=uw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),a=ol(e.noDocument.readTime);t=vn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=Be.fromSegments(e.unknownDocument.path),a=ol(e.unknownDocument.version);t=vn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new or(r[0],r[1]);return yt.fromTimestamp(a)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return vn.newInvalidDocument(e)}}class OM extends Sw{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Jc(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new hn((c,h)=>Ft(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const y=this.Gn.get(c);if(t.push(this.Kn.removeEntry(e,c,y.readTime)),h.isValidDocument()){const E=ww(this.Kn.M,h);a=a.add(c.path.popLast()),r+=yg(E)-y.size,t.push(this.Kn.addEntry(e,c,E))}else if(r-=y.size,this.trackRemovals){const E=ww(this.Kn.M,h.convertToNoDocument(yt.min()));t.push(this.Kn.addEntry(e,c,E))}}),a.forEach(c=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Kn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:a})=>(a.forEach((c,h)=>{this.Gn.set(c,{size:h,readTime:r.get(c).readTime})}),r))}}function Vy(n){return Gn(n,"remoteDocumentGlobal")}function Fd(n){return Gn(n,"remoteDocumentsV14")}function Uy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nf(n,e){const t=e.documentKey.path.toArray();return[n,pg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vI(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=Ft(t[c],r[c]),a)return a;return a=Ft(t.length,r.length),a||(a=Ft(t[t.length-2],r[r.length-2]),a||Ft(t[t.length-1],r[r.length-1]))}class Nw{constructor(e){this.M=e}kt(e,t,r,a){const c=new Xc("createOrUpgrade",t);var y;r<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UA,{unique:!0}),y.createObjectStore("documentMutations"),By(e),function(y){y.createObjectStore("remoteDocuments")}(e));let h=ae.resolve();return r<3&&a>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),By(e)),h=h.next(()=>function(y){const E=y.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",D)}(c))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(y,E){return E.store("mutations").qt().next(D=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UA,{unique:!0});const N=E.store("mutations"),M=D.map($=>N.put($));return ae.waitFor(M)})}(e,c))),h=h.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(h=h.next(()=>this.Qn(c))),r<6&&a>=6&&(h=h.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.jn(c)))),r<7&&a>=7&&(h=h.next(()=>this.Wn(c))),r<8&&a>=8&&(h=h.next(()=>this.zn(e,c))),r<9&&a>=9&&(h=h.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(h=h.next(()=>this.Hn(c))),r<11&&a>=11&&(h=h.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(h=h.next(()=>{!function(y){const E=y.createObjectStore("documentOverlays",{keyPath:zA});E.createIndex("collectionPathOverlayIndex",My,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",Df,{unique:!1})}(e)})),r<13&&a>=13&&(h=h.next(()=>function(y){const E=y.createObjectStore("remoteDocumentsV14",{keyPath:BA});E.createIndex("documentKeyIndex",NM),E.createIndex("collectionGroupIndex",sI)}(e)).next(()=>this.Jn(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(h=h.next(()=>{!function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:HA}).createIndex("sequenceNumberIndex",GA,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:qA}).createIndex("documentKeyIndex",WA,{unique:!1})}(e)})),h}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,a)=>{t+=yg(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(a=>ae.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(y=>ae.forEach(y,E=>{Et(E.userId===c.userId);const D=Md(this.M,E);return hI(e,c.userId,D).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return r.Wt((h,y)=>{const E=new Rt(h),D=[0,is(E)];c.push(t.get(D).next(N=>N?ae.resolve():t.put({targetId:0,path:is(E),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ae.waitFor(c))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:$A});const r=t.store("collectionParents"),a=new dI,c=h=>{if(a.add(h)){const y=h.lastSegment(),E=h.popLast();return r.put({collectionId:y,parent:is(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,y)=>{const E=new Rt(h);return c(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,y,E],D)=>{const N=Mu(y);return c(N.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,a)=>{const c=Af(a),h=bw(this.M,c);return t.put(h)})}Jn(e,t){const r=t.store("remoteDocuments"),a=[];return r.Wt((c,h)=>{const y=t.store("remoteDocumentsV14"),E=(D=h,D.document?new Be(Rt.fromString(D.document.name).popFirst(5)):D.noDocument?Be.fromSegments(D.noDocument.path):D.unknownDocument?Be.fromSegments(D.unknownDocument.path):Xe()).path.toArray();var D;const N={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};a.push(y.put(N))}).next(()=>ae.waitFor(a))}}function By(n){n.createObjectStore("targetDocuments",{keyPath:jA}).createIndex("documentTargetsIndex",mw,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gw,{unique:!0}),n.createObjectStore("targetGlobal")}const Rw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vg{constructor(e,t,r,a,c,h,y,E,D,N,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=c,this.window=h,this.document=y,this.Xn=D,this.Zn=N,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=$=>Promise.resolve(),!vg.vt())throw new Ce(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sS(this,a),this.hs=t+"main",this.M=new vw(E),this.ls=new In(this.hs,this.ts,new Nw(this.M)),this.fs=new gI(this.referenceDelegate,this.M),this.ds=new xw(this.M),this._s=new ZA,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===N&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(he.FAILED_PRECONDITION,Rw);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Cs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,pe.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(zr(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ld(e).get("owner").next(t=>ae.resolve(this.Ps(t)))}Vs(e){return wg(e).delete(this.clientId)}vs(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Gn(r,"clientMetadata");return a.qt().next(c=>{const h=e.Ds(c,18e5),y=c.filter(E=>-1===h.indexOf(E));return ae.forEach(y,E=>a.delete(E.clientId)).next(()=>y)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ae.resolve(!0):Ld(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Ce(he.FAILED_PRECONDITION,Rw);return!1}}return!(!this.networkEnabled||!this.inForeground)||wg(e).qt().next(r=>void 0===this.Ds(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Rd(t,Cs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>wg(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return fI.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new tS(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return lI.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=14===(h=this.ts)?KA:13===h?Tf:12===h?Yo:11===h?yw:void Xe();var h;let y;return this.ls.runTransaction(e,a,c,E=>(y=new Rd(E,this.es?this.es.next():Cs.A),"readwrite-primary"===t?this.Es(y).next(D=>!!D||this.As(y)).next(D=>{if(!D)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ce(he.FAILED_PRECONDITION,oI);return r(y)}).next(D=>this.bs(y).next(()=>D)):this.$s(y).next(()=>r(y)))).then(E=>(y.raiseOnCommittedEvent(),E))}$s(e){return Ld(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(he.FAILED_PRECONDITION,Rw)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ld(e).put("owner",t)}static vt(){return In.vt()}Rs(e){const t=Ld(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,mt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ld(n){return Gn(n,"owner")}function wg(n){return Gn(n,"clientMetadata")}function wI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class oS{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(a=>{for(const c of r)c.applyToLocalView(a);return a})}qs(e,t){e.forEach((r,a)=>{for(const c of t)c.applyToLocalView(a)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Be.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.js(e,t.path):Zv(t)?this.Ws(e,t,r):this.zs(e,t,r);var a}js(e,t){return this.Ls(e,new Be(t)).next(r=>{let a=rw();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}Ws(e,t,r){const a=t.collectionGroup;let c=rw();return this.indexManager.getCollectionParents(e,a).next(h=>ae.forEach(h,y=>{const E=(D=t,N=y.child(a),new Zc(N,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,N;return this.zs(e,E,r).next(D=>{D.forEach((N,M)=>{c=c.insert(N,M)})})}).next(()=>c))}zs(e,t,r){let a;return this.ds.getAllFromCollection(e,t.path,r).next(c=>(a=c,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(c=>{for(const h of c)for(const y of h.mutations){const E=y.key;let D=a.get(E);null==D&&(D=vn.newInvalidDocument(E),a=a.insert(E,D)),Cy(y,D,h.localWriteTime),D.isFoundDocument()||(a=a.remove(E))}}).next(()=>(a.forEach((c,h)=>{vy(t,h)||(a=a.remove(c))}),a))}}class jy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=a}static Ys(e,t){let r=sn(),a=sn();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new jy(e,t.fromCache,r,a)}}class Mw{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,a){return this.ti(e,t).next(c=>c||this.ei(e,t,a,r)).next(c=>c||this.ni(e,t))}ti(e,t){return ae.resolve(null)}ei(e,t,r,a){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||a.isEqual(yt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(c=>{const h=this.si(t,c);return this.ii(t,h,r,a)?this.ni(e,t):(pf()<=Ei.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_y(t)),this.ri(e,h,t,yy(a,-1)))})}si(e,t){let r=new hn(zo(e));return t.forEach((a,c)=>{vy(e,c)&&(r=r.add(c))}),r}ii(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ni(e,t){return pf()<=Ei.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",_y(t)),this.Zs.Qs(e,t,ao.min())}ri(e,t,r,a){return this.Zs.Qs(e,r,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class aS{constructor(e,t,r,a){this.persistence=e,this.oi=t,this.M=a,this.ui=new cr(Ft),this.ai=new Jc(c=>zc(c),Dd),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new oS(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Ow(n,e,t,r){return new aS(n,e,t,r)}function $y(n,e){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,pe.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.Bs.getAllMutationBatches(r).next(c=>(a=c,t.li(e),t.Bs.getAllMutationBatches(r))).next(c=>{const h=[],y=[];let E=sn();for(const D of a){h.push(D.batchId);for(const N of D.mutations)E=E.add(N.key)}for(const D of c){y.push(D.batchId);for(const N of D.mutations)E=E.add(N.key)}return t.fi.Ks(r,E).next(D=>({di:D,removedBatchIds:h,addedBatchIds:y}))})})})).apply(this,arguments)}function Pw(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),c=t.hi.newChangeBuffer({trackRemovals:!0});return function(h,y,E,D){const N=E.batch,M=N.keys();let $=ae.resolve();return M.forEach(K=>{$=$.next(()=>D.getEntry(y,K)).next(ie=>{const xe=E.docVersions.get(K);Et(null!==xe),ie.version.compareTo(xe)<0&&(N.applyToRemoteDocument(ie,E),ie.isValidDocument()&&(ie.setReadTime(E.commitVersion),D.addEntry(ie)))})}),$.next(()=>h.Bs.removeMutationBatch(y,N))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,a))})}function Gy(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function bI(n,e){const t=$e(n),r=e.snapshotVersion;let a=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.hi.newChangeBuffer({trackRemovals:!0});a=t.ui;const y=[];e.targetChanges.forEach((D,N)=>{const M=a.get(N);if(!M)return;y.push(t.fs.removeMatchingKeys(c,D.removedDocuments,N).next(()=>t.fs.addMatchingKeys(c,D.addedDocuments,N)));let $=M.withSequenceNumber(c.currentSequenceNumber);var K,ie,xe;e.targetMismatches.has(N)?$=$.withResumeToken(ar.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):D.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(D.resumeToken,r)),a=a.insert(N,$),ie=$,xe=D,(0===(K=M).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&y.push(t.fs.updateTargetData(c,$))});let E=co();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,D))}),y.push(EI(c,h,e.documentUpdates).next(D=>{E=D})),!r.isEqual(yt.min())){const D=t.fs.getLastRemoteSnapshotVersion(c).next(N=>t.fs.setTargetsMetadata(c,c.currentSequenceNumber,r));y.push(D)}return ae.waitFor(y).next(()=>h.apply(c)).next(()=>t.fi.Gs(c,E)).next(()=>E)}).then(c=>(t.ui=a,c))}function EI(n,e,t){let r=sn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=co();return t.forEach((h,y)=>{const E=a.get(h);y.isNoDocument()&&y.version.isEqual(yt.min())?(e.removeEntry(h,y.readTime),c=c.insert(h,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||0===y.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(y),c=c.insert(h,y)):ke("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",y.version)}),c})}function II(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Vd(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.fs.getTargetData(r,e).next(c=>c?(a=c,ae.resolve(a)):t.fs.allocateTargetId(r).next(h=>(a=new As(e,h,0,r.currentSequenceNumber),t.fs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.ui.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function cl(n,e,t){return qy.apply(this,arguments)}function qy(){return(qy=(0,pe.Z)(function*(n,e,t){const r=$e(n),a=r.ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!zr(h))throw h;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.ui=r.ui.remove(e),r.ai.delete(a.target)})).apply(this,arguments)}function Wy(n,e,t){const r=$e(n);let a=yt.min(),c=sn();return r.persistence.runTransaction("Execute query","readonly",h=>function(y,E,D){const N=$e(y),M=N.ai.get(D);return void 0!==M?ae.resolve(N.ui.get(M)):N.fs.getTargetData(E,D)}(r,h,uo(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(h,y.targetId).next(E=>{c=E})}).next(()=>r.oi.Qs(h,e,t?a:yt.min(),t?c:sn())).next(y=>(kw(r,UE(e),y),{documents:y,_i:c})))}function CI(n,e){const t=$e(n),r=$e(t.fs),a=t.ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Et(c,e).next(h=>h?h.target:null))}function DI(n,e){const t=$e(n),r=t.ci.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.hi.getAllFromCollectionGroup(a,e,yy(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(kw(t,e,a),a))}function kw(n,e,t){let r=yt.min();t.forEach((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.ci.set(e,r)}function zy(){return(zy=(0,pe.Z)(function*(n,e,t,r){const a=$e(n);let c=sn(),h=co();for(const D of t){const N=e.wi(D.metadata.name);D.document&&(c=c.add(N));const M=e.mi(D);M.setReadTime(e.gi(D.metadata.readTime)),h=h.insert(N,M)}const y=a.hi.newChangeBuffer({trackRemovals:!0}),E=yield Vd(a,(D=r,uo(Yc(Rt.fromString(`__bundle__/docs/${D}`)))));var D;return a.persistence.runTransaction("Apply bundle documents","readwrite",D=>EI(D,y,h).next(N=>(y.apply(D),N)).next(N=>a.fs.removeMatchingKeysForTargetId(D,E.targetId).next(()=>a.fs.addMatchingKeys(D,c,E.targetId)).next(()=>a.fi.Gs(D,N)).next(()=>N)))})).apply(this,arguments)}function TI(n,e){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,pe.Z)(function*(n,e,t=sn()){const r=yield Vd(n,uo(Ew(e.bundledQuery))),a=$e(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=Wr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a._s.saveNamedQuery(c,e);const y=r.withResumeToken(ar.EMPTY_BYTE_STRING,h);return a.ui=a.ui.insert(y.targetId,y),a.fs.updateTargetData(c,y).next(()=>a.fs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>a.fs.addMatchingKeys(c,t,r.targetId)).next(()=>a._s.saveNamedQuery(c,e))})})).apply(this,arguments)}class AI{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ae.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Wr(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Ew(r.bundledQuery),readTime:Wr(r.readTime)}),ae.resolve();var r}}class SI{constructor(){this.overlays=new cr(Be.comparator),this.Ii=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((a,c)=>{this.Xt(e,t,c)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Ii.get(r);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Ii.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const a=ug(),c=t.length+1,h=new Be(t.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const E=y.getNext().value,D=E.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===c&&E.largestBatchId>r&&a.set(E.getKey(),E)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new cr((D,N)=>D-N);const h=this.overlays.getIterator();for(;h.hasNext();){const D=h.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let N=c.get(D.largestBatchId);null===N&&(N=ug(),c=c.insert(D.largestBatchId,N)),N.set(D.getKey(),D)}}const y=ug(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((D,N)=>y.set(D,N)),!(y.size()>=a)););return ae.resolve(y)}Xt(e,t,r){if(null===r)return;const a=this.overlays.get(r.key);if(null!==a){const h=this.Ii.get(a.largestBatchId).delete(r.key);this.Ii.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new il(t,r));let c=this.Ii.get(t);void 0===c&&(c=sn(),this.Ii.set(t,c)),this.Ii.set(t,c.add(r.key))}}class Zy{constructor(){this.Ti=new hn(Sr.Ei),this.Ai=new hn(Sr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Sr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Sr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Be(new Rt([])),r=new Sr(t,e),a=new Sr(t,e+1),c=[];return this.Ai.forEachInRange([r,a],h=>{this.Pi(h),c.push(h.key)}),c}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Be(new Rt([])),r=new Sr(t,e),a=new Sr(t,e+1);let c=sn();return this.Ai.forEachInRange([r,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new Sr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Sr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Be.comparator(e.key,t.key)||Ft(e.Ci,t.Ci)}static Ri(e,t){return Ft(e.Ci,t.Ci)||Be.comparator(e.key,t.key)}}class xI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new hn(Sr.Ei)}checkEmpty(e){return ae.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,a){const c=this.xi;this.xi++;const h=new nl(c,t,r,a);this.Bs.push(h);for(const y of a)this.Ni=this.Ni.add(new Sr(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ae.resolve(h)}lookupMutationBatch(e,t){return ae.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Mi(t+1),c=a<0?0:a;return ae.resolve(this.Bs.length>c?this.Bs[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ae.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Sr(t,0),a=new Sr(t,Number.POSITIVE_INFINITY),c=[];return this.Ni.forEachInRange([r,a],h=>{const y=this.ki(h.Ci);c.push(y)}),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Ft);return t.forEach(a=>{const c=new Sr(a,0),h=new Sr(a,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([c,h],y=>{r=r.add(y.Ci)})}),ae.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;Be.isDocumentKey(c)||(c=c.child(""));const h=new Sr(new Be(c),0);let y=new hn(Ft);return this.Ni.forEachWhile(E=>{const D=E.key.path;return!!r.isPrefixOf(D)&&(D.length===a&&(y=y.add(E.Ci)),!0)},h),ae.resolve(this.Oi(y))}Oi(e){const t=[];return e.forEach(r=>{const a=this.ki(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Et(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ae.forEach(t.mutations,a=>{const c=new Sr(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Sr(t,0),a=this.Ni.firstAfterOrEqual(r);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ae.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class PM{constructor(e){this.$i=e,this.docs=new cr(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,h=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=co();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():vn.newInvalidDocument(a))}),ae.resolve(r)}getAllFromCollection(e,t,r){let a=co();const c=new Be(t.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:y,value:{document:E}}=h.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||SE(bA(E),r)<=0||(a=a.insert(E.key,E.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,r,a){Xe()}Bi(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uS(this)}getSize(e){return ae.resolve(this.size)}}class uS extends Sw{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Kn.addEntry(e,a)):this.Kn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class cS{constructor(e){this.persistence=e,this.Li=new Jc(t=>zc(t),Dd),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Zy,this.targetCount=0,this.Ki=Pd.gn()}forEachTarget(e,t){return this.Li.forEach((r,a)=>t(a)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),ae.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Pd(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Tn(t),ae.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Li.forEach((h,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Li.delete(h),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),ae.waitFor(c).next(()=>a)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.qi.containsKey(t))}}class NI{constructor(e,t){this.Gi={},this.overlays={},this.es=new Cs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new cS(this),this.indexManager=new eS,this.ds=new PM(r=>this.referenceDelegate.Qi(r)),this.M=new vw(t),this._s=new AI(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new xI(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const a=new lS(this.es.next());return this.referenceDelegate.ji(),r(a).next(c=>this.referenceDelegate.Wi(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}zi(e,t){return ae.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class lS extends Oy{constructor(e){super(),this.currentSequenceNumber=e}}class lr{constructor(e){this.persistence=e,this.Hi=new Zy,this.Ji=null}static Yi(e){return new lr(e)}get Xi(){if(this.Ji)return this.Ji;throw Xe()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(a=>this.Xi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Xi.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Xi,r=>{const a=Be.fromPath(r);return this.Zi(e,a).next(c=>{c||t.removeEntry(a,yt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ae.or([()=>ae.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Lw(n,e){return`firestore_clients_${n}_${e}`}function RI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Vw(n,e){return`firestore_targets_${n}_${e}`}class bg{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static tr(e,t,r){const a=JSON.parse(r);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new Ce(a.error.code,a.error.message))),h?new bg(e,t,a.state,c):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let a,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new Ce(r.error.code,r.error.message))),c?new Eg(e,r.state,a):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ig{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,c=Ay();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=Bv(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return a?new Ig(e,c):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Yy{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Yy(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ll{constructor(){this.activeTargetIds=Ay()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uw{constructor(e,t,r,a,c){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new cr(Ft),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.hr=Lw(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ll),this.dr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Fs();for(const a of t){if(a===e.ir)continue;const c=e.getItem(Lw(e.persistenceKey,a));if(c){const h=Ig.tr(a,c);h&&(e.ar=e.ar.insert(h.clientId,h))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const a=e.pr(r);a&&e.Ir(a)}for(const a of e.cr)e.ur(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Vw(this.persistenceKey,e));if(r){const a=Eg.tr(e,r);a&&(t=a.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vw(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Ar(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const a=t.vr(r.key);return t.Sr(a,null)}{const a=t.Dr(r.key,r.newValue);if(a)return t.Sr(a.clientId,a)}}else if(t._r.test(r.key)){if(null!==r.newValue){const a=t.Cr(r.key,r.newValue);if(a)return t.Nr(a)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const a=t.kr(r.key,r.newValue);if(a)return t.Mr(a)}}else if(r.key===t.mr){if(null!==r.newValue){const a=t.pr(r.newValue);if(a)return t.Ir(a)}}else if(r.key===t.lr){const a=function(c){let h=Cs.A;if(null!=c)try{const y=JSON.parse(c);Et("number"==typeof y),h=y}catch(y){sr("SharedClientState","Failed to read sequence number from WebStorage",y)}return h}(r.newValue);a!==Cs.A&&t.sequenceNumberHandler(a)}else if(r.key===t.gr){const a=t.Or(r.newValue);yield Promise.all(a.map(c=>t.syncEngine.Fr(c)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const a=new bg(this.currentUser,e,t,r),c=RI(this.persistenceKey,this.currentUser,e);this.setItem(c,a.er())}Ar(e){const t=RI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const a=Vw(this.persistenceKey,e),c=new Eg(e,t,r);this.setItem(a,c.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Ig.tr(r,t)}Cr(e,t){const r=this._r.exec(e),a=Number(r[1]);return bg.tr(new Dr(void 0!==r[2]?r[2]:null),a,t)}kr(e,t){const r=this.wr.exec(e),a=Number(r[1]);return Eg.tr(a,t)}pr(e){return Yy.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),a=this.Tr(this.ar),c=this.Tr(r),h=[],y=[];return c.forEach(E=>{a.has(E)||h.push(E)}),a.forEach(E=>{c.has(E)||y.push(E)}),this.syncEngine.Lr(h,y).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Ay();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class MI{constructor(){this.Ur=new ll,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ll,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OI{Kr(e){}shutdown(){}}class PI{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class kM{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class FI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,a,c){const h=this.ho(e,t);ke("RestConnection","Sending: ",h,r);const y={};return this.lo(y,a,c),this.fo(e,h,y,r).then(E=>(ke("RestConnection","Received: ",E),E),E=>{throw bd("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}_o(e,t,r,a,c){return this.co(e,t,r,a,c)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.uo}/v1/${t}:${kI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,a){return new Promise((c,h)=>{const y=new mE;y.listenOnce(gE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case cy.NO_ERROR:const D=y.getResponseJson();ke("Connection","XHR received:",JSON.stringify(D)),c(D);break;case cy.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),h(new Ce(he.DEADLINE_EXCEEDED,"Request time out"));break;case cy.HTTP_ERROR:const N=y.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',N,"response text:",y.getResponseText()),N>0){const M=y.getResponseJson().error;if(M&&M.status&&M.message){const $=function(K){const ie=K.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(ie)>=0?ie:he.UNKNOWN}(M.status);h(new Ce($,M.message))}else h(new Ce(he.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new Ce(he.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(a);y.send(t,"POST",E,r,15)})}wo(e,t,r){const a=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=pE(),h=vd(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new uA({})),this.lo(y.initMessageHeaders,t,r),(0,mt.uI)()||(0,mt.b$)()||(0,mt.d)()||(0,mt.w1)()||(0,mt.Mn)()||(0,mt.ru)()||(y.httpHeadersOverwriteParam="$httpHeaders");const E=a.join("");ke("Connection","Creating WebChannel: "+E,y);const D=c.createWebChannel(E,y);let N=!1,M=!1;const $=new kM({Jr:ie=>{M?ke("Connection","Not sending because WebChannel is closed:",ie):(N||(ke("Connection","Opening WebChannel transport."),D.open(),N=!0),ke("Connection","WebChannel sending:",ie),D.send(ie))},Yr:()=>D.close()}),K=(ie,xe,Fe)=>{ie.listen(xe,Mt=>{try{Fe(Mt)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return K(D,Xp.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),K(D,Xp.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),$.ro())}),K(D,Xp.EventType.ERROR,ie=>{M||(M=!0,bd("Connection","WebChannel transport errored:",ie),$.ro(new Ce(he.UNAVAILABLE,"The operation could not be completed")))}),K(D,Xp.EventType.MESSAGE,ie=>{var xe;if(!M){const Fe=ie.data[0];Et(!!Fe);const Mt=Fe,Vt=Mt.error||(null===(xe=Mt[0])||void 0===xe?void 0:xe.error);if(Vt){ke("Connection","WebChannel received error:",Vt);const Ut=Vt.status;let Nt=function(ln){const os=kn[ln];if(void 0!==os)return tw(os)}(Ut),Wt=Vt.message;void 0===Nt&&(Nt=he.INTERNAL,Wt="Unknown error status: "+Ut+" with message "+Vt.message),M=!0,$.ro(new Ce(Nt,Wt)),D.close()}else ke("Connection","WebChannel received:",Fe),$.oo(Fe)}}),K(h,aA.STAT_EVENT,ie=>{ie.stat===Jp.PROXY?ke("Connection","Detected buffering proxy"):ie.stat===Jp.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.io()},0),$}}function Qy(){return"undefined"!=typeof window?window:null}function Ns(){return"undefined"!=typeof document?document:null}function Cg(n){return new Ru(n,!0)}class Bw{constructor(e,t,r=1e3,a=1.5,c=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-r);a>0&&ke("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Qo{constructor(e,t,r,a,c,h,y,E){this.Yn=e,this.Vo=r,this.vo=a,this.So=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=E,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Bw(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,pe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Do===t&&this.Qo(r,a)},r=>{e(()=>{const a=new Ce(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(a)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(a=>{r(()=>this.jo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.No.Ro((0,pe.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jo extends Qo{constructor(e,t,r,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.M=c}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:Xe(),a=e.targetChange.targetIds||[],c=function(E,D){return E.N?(Et(void 0===D||"string"==typeof D),ar.fromBase64String(D||"")):(Et(void 0===D||D instanceof Uint8Array),ar.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(E){const D=void 0===E.code?he.UNKNOWN:tw(E.code);return new Ce(D,E.message||"")}(h);t=new QE(r,a,c,y||null)}else if("documentChange"in e){const r=e.documentChange,a=Ko(n,r.document.name),c=Wr(r.document.updateTime),h=new Gr({mapValue:{fields:r.document.fields}}),y=vn.newFoundDocument(a,c,h);t=new Sy(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,a=Ko(n,r.document),c=r.readTime?Wr(r.readTime):yt.min(),h=vn.newNoDocument(a,c);t=new Sy([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,a=Ko(n,r.document);t=new Sy([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,c=new ag(r.count||0);t=new YE(r.targetId,c)}}var E;return t}(this.M,e),r=function(a){if(!("targetChange"in a))return yt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?yt.min():c.readTime?Wr(c.readTime):yt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=lg(this.M),t.addTarget=function(a,c){let h;const y=c.target;return h=yf(y)?{documents:tI(a,y)}:{query:nI(a,y)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=xy(a,c.resumeToken):c.snapshotVersion.compareTo(yt.min())>0&&(h.readTime=Sd(a,c.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=lg(this.M),t.removeTarget=e,this.Lo(t)}}class Xo extends Qo{constructor(e,t,r,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.M=c,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,a){let c=Wr(r.updateTime?r.updateTime:a);return c.isEqual(yt.min())&&(c=Wr(a)),new xA(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.tu(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=lg(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Cf(this.M,r))};this.Lo(t)}}class LI extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=a,this.su=!1}iu(){if(this.su)throw new Ce(he.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.So.co(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(he.UNKNOWN,a.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.So._o(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(he.UNKNOWN,a.toString())})}terminate(){this.su=!0}}class VI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(sr(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class dS{constructor(e,t,r,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=c,this.gu.Kr(y=>{r.enqueueAndForget((0,pe.Z)(function*(){var E;ea(h)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,pe.Z)(function*(D){const N=$e(D);N.wu.add(4),yield Rf(N),N.yu.set("Unknown"),N.wu.delete(4),yield Dg(N)}),function(D){return E.apply(this,arguments)})(h))}))}),this.yu=new VI(r,a)}}function Dg(n){return jw.apply(this,arguments)}function jw(){return(jw=(0,pe.Z)(function*(n){if(ea(n))for(const e of n.mu)yield e(!0)})).apply(this,arguments)}function Rf(n){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,pe.Z)(function*(n){for(const e of n.mu)yield e(!1)})).apply(this,arguments)}function dl(n,e){const t=$e(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),e_(t)?Xy(t):Mf(t).Mo()&&Jy(t,e))}function Ag(n,e){const t=$e(n),r=Mf(t);t._u.delete(e),r.Mo()&&UI(t,e),0===t._u.size&&(r.Mo()?r.$o():ea(t)&&t.yu.set("Unknown"))}function Jy(n,e){n.pu.Z(e.targetId),Mf(n).Ho(e)}function UI(n,e){n.pu.Z(e),Mf(n).Jo(e)}function Xy(n){n.pu=new OA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Mf(n).start(),n.yu.au()}function e_(n){return ea(n)&&!Mf(n).ko()&&n._u.size>0}function ea(n){return 0===$e(n).wu.size}function BI(n){n.pu=void 0}function jI(n){return t_.apply(this,arguments)}function t_(){return(t_=(0,pe.Z)(function*(n){n._u.forEach((e,t)=>{Jy(n,e)})})).apply(this,arguments)}function $w(n,e){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,pe.Z)(function*(n,e){BI(n),e_(n)?(n.yu.lu(e),Xy(n)):n.yu.set("Unknown")})).apply(this,arguments)}function $I(n,e,t){return n_.apply(this,arguments)}function n_(){return(n_=(0,pe.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof QE&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(a,c){const h=c.cause;for(const y of c.targetIds)a._u.has(y)&&(yield a.remoteSyncer.rejectListen(y,h),a._u.delete(y),a.pu.removeTarget(y))}),function(a,c){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xg(n,r)}else if(e instanceof Sy?n.pu.ut(e):e instanceof YE?n.pu._t(e):n.pu.ht(e),!t.isEqual(yt.min()))try{const r=yield Gy(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.pu.yt(c);return h.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const D=a._u.get(E);D&&a._u.set(E,D.withResumeToken(y.resumeToken,c))}}),h.targetMismatches.forEach(y=>{const E=a._u.get(y);if(!E)return;a._u.set(y,E.withResumeToken(ar.EMPTY_BYTE_STRING,E.snapshotVersion)),UI(a,y);const D=new As(E.target,y,1,E.sequenceNumber);Jy(a,D)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield xg(n,r)}var r})).apply(this,arguments)}function xg(n,e,t){return r_.apply(this,arguments)}function r_(){return(r_=(0,pe.Z)(function*(n,e,t){if(!zr(e))throw e;n.wu.add(1),yield Rf(n),n.yu.set("Offline"),t||(t=()=>Gy(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Dg(n)}))})).apply(this,arguments)}function Hw(n,e){return e().catch(t=>xg(n,t,e))}function Ud(n){return i_.apply(this,arguments)}function i_(){return(i_=(0,pe.Z)(function*(n){const e=$e(n),t=hl(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;HI(e);)try{const a=yield II(e.localStore,r);if(null===a){0===e.du.length&&t.$o();break}r=a.batchId,hS(e,a)}catch(a){yield xg(e,a)}GI(e)&&qI(e)})).apply(this,arguments)}function HI(n){return ea(n)&&n.du.length<10}function hS(n,e){n.du.push(e);const t=hl(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function GI(n){return ea(n)&&!hl(n).ko()&&n.du.length>0}function qI(n){hl(n).start()}function fS(n){return Gw.apply(this,arguments)}function Gw(){return(Gw=(0,pe.Z)(function*(n){hl(n).nu()})).apply(this,arguments)}function pS(n){return qw.apply(this,arguments)}function qw(){return(qw=(0,pe.Z)(function*(n){const e=hl(n);for(const t of n.du)e.Zo(t.mutations)})).apply(this,arguments)}function gS(n,e,t){return Ww.apply(this,arguments)}function Ww(){return(Ww=(0,pe.Z)(function*(n,e,t){const r=n.du.shift(),a=rl.from(r,e,t);yield Hw(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Ud(n)})).apply(this,arguments)}function mS(n,e){return zw.apply(this,arguments)}function zw(){return(zw=(0,pe.Z)(function*(n,e){var t;e&&hl(n).Xo&&(yield(t=(0,pe.Z)(function*(r,a){if(Ty(c=a.code)&&c!==he.ABORTED){const h=r.du.shift();hl(r).Fo(),yield Hw(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield Ud(r)}var c}),function(r,a){return t.apply(this,arguments)})(n,e)),GI(n)&&qI(n)})).apply(this,arguments)}function WI(n,e){return Kw.apply(this,arguments)}function Kw(){return(Kw=(0,pe.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=ea(t);t.wu.add(3),yield Rf(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Dg(t)})).apply(this,arguments)}function Zw(n,e){return Yw.apply(this,arguments)}function Yw(){return(Yw=(0,pe.Z)(function*(n,e){const t=$e(n);e?(t.wu.delete(2),yield Dg(t)):e||(t.wu.add(2),yield Rf(t),t.yu.set("Unknown"))})).apply(this,arguments)}function Mf(n){return n.Iu||(n.Iu=function(e,t,r){const a=$e(e);return a.iu(),new Jo(t,a.So,a.authCredentials,a.appCheckCredentials,a.M,r)}(n.datastore,n.asyncQueue,{Xr:jI.bind(null,n),eo:$w.bind(null,n),zo:$I.bind(null,n)}),n.mu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Iu.Fo(),e_(n)?Xy(n):n.yu.set("Unknown")):(yield n.Iu.stop(),BI(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function hl(n){return n.Tu||(n.Tu=function(e,t,r){const a=$e(e);return a.iu(),new Xo(t,a.So,a.authCredentials,a.appCheckCredentials,a.M,r)}(n.datastore,n.asyncQueue,{Xr:fS.bind(null,n),eo:mS.bind(null,n),eu:pS.bind(null,n),tu:gS.bind(null,n)}),n.mu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Tu.Fo(),yield Ud(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Qw{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,a,c){const h=Date.now()+r,y=new Qw(e,t,h,a,c);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bd(n,e){if(sr("AsyncQueue",`${e}: ${n}`),zr(n))return new Ce(he.UNAVAILABLE,`${e}: ${n}`);throw n}class jd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=rw(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new jd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new jd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Jw{constructor(){this.Eu=new cr(Be.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Xe():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $d{constructor(e,t,r,a,c,h,y,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new $d(e,t,jd.emptySet(t),c,r,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class zI{constructor(){this.Ru=void 0,this.listeners=[]}}class KI{constructor(){this.queries=new Jc(e=>VE(e),sg),this.onlineState="Unknown",this.bu=new Set}}function s_(n,e){return o_.apply(this,arguments)}function o_(){return(o_=(0,pe.Z)(function*(n,e){const t=$e(n),r=e.query;let a=!1,c=t.queries.get(r);if(c||(a=!0,c=new zI),a)try{c.Ru=yield t.onListen(r)}catch(h){const y=Bd(h,`Initialization of query '${_y(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,c),c.listeners.push(e),e.Pu(t.onlineState),c.Ru&&e.Vu(c.Ru)&&Xw(t)})).apply(this,arguments)}function a_(n,e){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,pe.Z)(function*(n,e){const t=$e(n),r=e.query;let a=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function ZI(n,e){const t=$e(n);let r=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const y of h.listeners)y.Vu(a)&&(r=!0);h.Ru=a}}r&&Xw(t)}function Hd(n,e,t){const r=$e(n),a=r.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);r.queries.delete(e)}function Xw(n){n.bu.forEach(e=>{e.next()})}class e0{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new $d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=$d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Of{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class yS{constructor(e){this.M=e}wi(e){return Ko(this.M,e)}mi(e){return e.metadata.exists?uw(this.M,e.document,!1):vn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Wr(e)}}class t0{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_S(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Rt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new yS(this.M);for(const a of e)if(a.metadata.queries){const c=r.wi(a.metadata.name);for(const h of a.metadata.queries){const y=(t.get(h)||sn()).add(c);t.set(h,y)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function(n,e,t,r){return zy.apply(this,arguments)}(e.localStore,new yS(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const a of e.queries)yield TI(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function _S(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class n0{constructor(e){this.key=e}}class r0{constructor(e){this.key=e}}class vS{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=sn(),this.mutatedKeys=sn(),this.Gu=zo(e),this.Qu=new jd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Jw,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,y=!1;const E="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,D="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((N,M)=>{const $=a.get(N),K=vy(this.query,M)?M:null,ie=!!$&&this.mutatedKeys.has($.key),xe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Fe=!1;$&&K?$.data.isEqual(K.data)?ie!==xe&&(r.track({type:3,doc:K}),Fe=!0):this.Hu($,K)||(r.track({type:2,doc:K}),Fe=!0,(E&&this.Gu(K,E)>0||D&&this.Gu(K,D)<0)&&(y=!0)):!$&&K?(r.track({type:0,doc:K}),Fe=!0):$&&!K&&(r.track({type:1,doc:$}),Fe=!0,(E||D)&&(y=!0)),Fe&&(K?(h=h.add(K),c=xe?c.add(N):c.delete(N)):(h=h.delete(N),c=c.delete(N)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const N="F"===this.query.limitType?h.last():h.first();h=h.delete(N.key),c=c.delete(N.key),r.track({type:1,doc:N})}return{Qu:h,zu:r,ii:y,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Au();c.sort((D,N)=>function(M,$){const K=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return K(M)-K($)}(D.type,N.type)||this.Gu(D.doc,N.doc)),this.Ju(r);const h=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,E=y!==this.qu;return this.qu=y,0!==c.length||E?{snapshot:new $d(this.query,e.Qu,a,c,e.mutatedKeys,0===y,E,!1),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Jw,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=sn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new r0(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new n0(r))}),t}ta(e){this.Uu=e._i,this.Ku=sn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return $d.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class ht{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wS{constructor(e){this.key=e,this.na=!1}}class bS{constructor(e,t,r,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.sa={},this.ia=new Jc(y=>VE(y),sg),this.ra=new Map,this.oa=new Set,this.ua=new cr(Be.comparator),this.aa=new Map,this.ca=new Zy,this.ha={},this.la=new Map,this.fa=Pd.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function ES(n,e){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,pe.Z)(function*(n,e){const t=qd(n);let r,a;const c=t.ia.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),a=c.view.ea();else{const h=yield Vd(t.localStore,uo(e));t.isPrimaryClient&&dl(t.remoteStore,h);const y=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield s0(t,e,r,"current"===y)}return a})).apply(this,arguments)}function s0(n,e,t,r){return kf.apply(this,arguments)}function kf(){return(kf=(0,pe.Z)(function*(n,e,t,r){n._a=(N,M,$)=>{return(K=(0,pe.Z)(function*(ie,xe,Fe,Mt){let Vt=xe.view.Wu(Fe);Vt.ii&&(Vt=yield Wy(ie.localStore,xe.query,!1).then(({documents:Wt})=>xe.view.Wu(Wt,Vt)));const Ut=Mt&&Mt.targetChanges.get(xe.targetId),Nt=xe.view.applyChanges(Vt,ie.isPrimaryClient,Ut);return h_(ie,xe.targetId,Nt.Xu),Nt.snapshot}),function(ie,xe,Fe,Mt){return K.apply(this,arguments)})(n,N,M,$);var K};const a=yield Wy(n.localStore,e,!0),c=new vS(e,a._i),h=c.Wu(a.documents),y=cg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=c.applyChanges(h,n.isPrimaryClient,y);h_(n,t,E.Xu);const D=new ht(e,t,c);return n.ia.set(e,D),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),E.snapshot})).apply(this,arguments)}function u_(n,e){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,pe.Z)(function*(n,e){const t=$e(n),r=t.ia.get(e),a=t.ra.get(r.targetId);if(a.length>1)return t.ra.set(r.targetId,a.filter(c=>!sg(c,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ag(t.remoteStore,r.targetId),ku(t,r.targetId)}).catch(kd))):(ku(t,r.targetId),yield cl(t.localStore,r.targetId,!0))})).apply(this,arguments)}function c_(){return(c_=(0,pe.Z)(function*(n,e,t){const r=v0(n);try{const a=yield function(c,h){const y=$e(c),E=or.now(),D=h.reduce((M,$)=>M.add($.key),sn());let N;return y.persistence.runTransaction("Locally write mutations","readwrite",M=>y.fi.Ks(M,D).next($=>{N=$;const K=[];for(const ie of h){const xe=qE(ie,N.get(ie.key));null!=xe&&K.push(new $a(ie.key,xe,qv(xe.value.mapValue),Qn.exists(!0)))}return y.Bs.addMutationBatch(M,E,K,h)})).then(M=>(M.applyToLocalDocumentSet(N),{batchId:M.batchId,changes:N}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,h,y){let E=c.ha[c.currentUser.toKey()];E||(E=new cr(Ft)),E=E.insert(h,y),c.ha[c.currentUser.toKey()]=E}(r,a.batchId,t),yield Rs(r,a.changes),yield Ud(r.remoteStore)}catch(a){const c=Bd(a,"Failed to persist write");t.reject(c)}})).apply(this,arguments)}function l_(n,e){return o0.apply(this,arguments)}function o0(){return(o0=(0,pe.Z)(function*(n,e){const t=$e(n);try{const r=yield bI(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.aa.get(c);h&&(Et(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.na=!0:a.modifiedDocuments.size>0?Et(h.na):a.removedDocuments.size>0&&(Et(h.na),h.na=!1))}),yield Rs(t,r,e)}catch(r){yield kd(r)}})).apply(this,arguments)}function a0(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.ia.forEach((c,h)=>{const y=h.view.Pu(e);y.snapshot&&a.push(y.snapshot)}),function(c,h){const y=$e(c);y.onlineState=h;let E=!1;y.queries.forEach((D,N)=>{for(const M of N.listeners)M.Pu(h)&&(E=!0)}),E&&Xw(y)}(r.eventManager,e),a.length&&r.sa.zo(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YI(n,e,t){return d_.apply(this,arguments)}function d_(){return(d_=(0,pe.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.aa.get(e),c=a&&a.key;if(c){let h=new cr(Be.comparator);h=h.insert(c,vn.newNoDocument(c,yt.min()));const y=sn().add(c),E=new Ga(yt.min(),new Map,new hn(Ft),h,y);yield l_(r,E),r.ua=r.ua.remove(c),r.aa.delete(e),p0(r)}else yield cl(r.localStore,e,!1).then(()=>ku(r,e,t)).catch(kd)})).apply(this,arguments)}function QI(n,e){return u0.apply(this,arguments)}function u0(){return(u0=(0,pe.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const a=yield Pw(t.localStore,e);h0(t,r,null),d0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Rs(t,a)}catch(a){yield kd(a)}})).apply(this,arguments)}function IS(n,e,t){return c0.apply(this,arguments)}function c0(){return(c0=(0,pe.Z)(function*(n,e,t){const r=$e(n);try{const a=yield function(c,h){const y=$e(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let D;return y.Bs.lookupMutationBatch(E,h).next(N=>(Et(null!==N),D=N.keys(),y.Bs.removeMutationBatch(E,N))).next(()=>y.Bs.performConsistencyCheck(E)).next(()=>y.fi.Ks(E,D))})}(r.localStore,e);h0(r,e,t),d0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Rs(r,a)}catch(a){yield kd(a)}})).apply(this,arguments)}function l0(){return(l0=(0,pe.Z)(function*(n,e){const t=$e(n);ea(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=$e(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>h.Bs.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const a=t.la.get(r)||[];a.push(e),t.la.set(r,a)}catch(r){const a=Bd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function d0(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function h0(n,e,t){const r=$e(n);let a=r.ha[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.ha[r.currentUser.toKey()]=a}}function ku(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||f0(n,r)})}function f0(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Ag(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),p0(n))}function h_(n,e,t){for(const r of t)r instanceof n0?(n.ca.addReference(r.key,e),JI(n,r)):r instanceof r0?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||f0(n,r.key)):Xe()}function JI(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),p0(n))}function p0(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Be(Rt.fromString(e)),r=n.fa.next();n.aa.set(r,new wS(t)),n.ua=n.ua.insert(t,r),dl(n.remoteStore,new As(uo(Yc(t.path)),r,2,Cs.A))}}function Rs(n,e,t){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,pe.Z)(function*(n,e,t){const r=$e(n),a=[],c=[],h=[];var y;r.ia.isEmpty()||(r.ia.forEach((y,E)=>{h.push(r._a(E,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,D.fromCache?"not-current":"current"),a.push(D);const N=jy.Ys(E.targetId,D);c.push(N)}}))}),yield Promise.all(h),r.sa.zo(a),yield(y=(0,pe.Z)(function*(E,D){const N=$e(E);try{yield N.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ae.forEach(D,$=>ae.forEach($.Hs,K=>N.persistence.referenceDelegate.addReference(M,$.targetId,K)).next(()=>ae.forEach($.Js,K=>N.persistence.referenceDelegate.removeReference(M,$.targetId,K)))))}catch(M){if(!zr(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of D){const $=M.targetId;if(!M.fromCache){const K=N.ui.get($),xe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);N.ui=N.ui.insert($,xe)}}}),function(E,D){return y.apply(this,arguments)})(r.localStore,c))})).apply(this,arguments)}function CS(n,e){return g0.apply(this,arguments)}function g0(){return(g0=(0,pe.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield $y(t.localStore,e);t.currentUser=e,(a=t).la.forEach(h=>{h.forEach(y=>{y.reject(new Ce(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Rs(t,r.di)}var a})).apply(this,arguments)}function DS(n,e){const t=$e(n),r=t.aa.get(e);if(r&&r.na)return sn().add(r.key);{let a=sn();const c=t.ra.get(e);if(!c)return a;for(const h of c){const y=t.ia.get(h);a=a.unionWith(y.view.ju)}return a}}function XI(n,e){return f_.apply(this,arguments)}function f_(){return(f_=(0,pe.Z)(function*(n,e){const t=$e(n),r=yield Wy(t.localStore,e.query,!0),a=e.view.ta(r);return t.isPrimaryClient&&h_(t,e.targetId,a.Xu),a})).apply(this,arguments)}function eC(n,e){return m0.apply(this,arguments)}function m0(){return(m0=(0,pe.Z)(function*(n,e){const t=$e(n);return DI(t.localStore,e).then(r=>Rs(t,r))})).apply(this,arguments)}function tC(n,e,t,r){return y0.apply(this,arguments)}function y0(){return(y0=(0,pe.Z)(function*(n,e,t,r){const a=$e(n),c=yield function(h,y){const E=$e(h),D=$e(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",N=>D.fn(N,y).next(M=>M?E.fi.Ks(N,M):ae.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield Ud(a.remoteStore):"acknowledged"===t||"rejected"===t?(h0(a,e,r||null),d0(a,e),y=e,$e($e(a.localStore).Bs)._n(y)):Xe(),yield Rs(a,c)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function nC(){return(nC=(0,pe.Z)(function*(n,e){const t=$e(n);if(qd(t),v0(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield AS(t,r.toArray());t.da=!0,yield Zw(t.remoteStore,!0);for(const c of a)dl(t.remoteStore,c)}else if(!1===e&&!1!==t.da){const r=[];let a=Promise.resolve();t.ra.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(ku(t,h),cl(t.localStore,h,!0))),Ag(t.remoteStore,h)}),yield a,yield AS(t,r),function(c){const h=$e(c);h.aa.forEach((y,E)=>{Ag(h.remoteStore,E)}),h.ca.Si(),h.aa=new Map,h.ua=new cr(Be.comparator)}(t),t.da=!1,yield Zw(t.remoteStore,!1)}})).apply(this,arguments)}function AS(n,e,t){return rC.apply(this,arguments)}function rC(){return(rC=(0,pe.Z)(function*(n,e,t){const r=$e(n),a=[],c=[];for(const h of e){let y;const E=r.ra.get(h);if(E&&0!==E.length){y=yield Vd(r.localStore,uo(E[0]));for(const D of E){const N=r.ia.get(D),M=yield XI(r,N);M.snapshot&&c.push(M.snapshot)}}else{const D=yield CI(r.localStore,h);y=yield Vd(r.localStore,D),yield s0(r,SS(D),h,!1)}a.push(y)}return r.sa.zo(c),a})).apply(this,arguments)}function SS(n){return FE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iC(n){const e=$e(n);return $e($e(e.localStore).persistence).Fs()}function p_(n,e,t,r){return _0.apply(this,arguments)}function _0(){return(_0=(0,pe.Z)(function*(n,e,t,r){const a=$e(n);if(a.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const c=a.ra.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const h=yield DI(a.localStore,UE(c[0])),y=Ga.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Rs(a,h,y);break}case"rejected":yield cl(a.localStore,e,!0),ku(a,e,r);break;default:Xe()}})).apply(this,arguments)}function xS(n,e,t){return g_.apply(this,arguments)}function g_(){return(g_=(0,pe.Z)(function*(n,e,t){const r=qd(n);if(r.da){for(const a of e){if(r.ra.has(a)){ke("SyncEngine","Adding an already active target "+a);continue}const c=yield CI(r.localStore,a),h=yield Vd(r.localStore,c);yield s0(r,SS(c),h.targetId,!1),dl(r.remoteStore,h)}for(const a of t)r.ra.has(a)&&(yield cl(r.localStore,a,!1).then(()=>{Ag(r.remoteStore,a),ku(r,a)}).catch(kd))}})).apply(this,arguments)}function qd(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=l_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YI.bind(null,e),e.sa.zo=ZI.bind(null,e.eventManager),e.sa.wa=Hd.bind(null,e.eventManager),e}function v0(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IS.bind(null,e),e}class sC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.M=Cg(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Ow(this.persistence,new Mw,e.initialUser,this.M)}ya(e){return new NI(lr.Yi,this.M)}ga(e){return new MI}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oC extends sC{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield v0(r.Ta.syncEngine),yield Ud(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Ow(this.persistence,new Mw,e.initialUser,this.M)}pa(e){return new iS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=wI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new vg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Qy(),Ns(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new MI}}class RS extends oC{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const a=r.Ta.syncEngine;r.sharedClientState instanceof Uw&&(r.sharedClientState.syncEngine={$r:tC.bind(null,a),Br:p_.bind(null,a),Lr:xS.bind(null,a),Fs:iC.bind(null,a),Fr:eC.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var c=(0,pe.Z)(function*(h){yield function(n,e){return nC.apply(this,arguments)}(r.Ta.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}ga(e){const t=Qy();if(!Uw.vt(t))throw new Ce(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class m_{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>a0(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=CS.bind(null,r.syncEngine),yield Zw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KI}createDatastore(e){const t=Cg(e.databaseInfo.databaseId),r=new FI(e.databaseInfo);return new LI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,c=y=>a0(this.syncEngine,y,0),h=PI.vt()?new PI:new OI,new dS(t,r,a,c,h);var t,r,a,c,h}createSyncEngine(e,t){return function(r,a,c,h,y,E,D){const N=new bS(r,a,c,h,y,E);return D&&(N.da=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=$e(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Rf(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function aC(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ff{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Tr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),a=Number(r);isNaN(a)&&e.va(`length string (${r}) is not valid number`);const c=yield e.Sa(a);return new Of(JSON.parse(c),t.length+a)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,pe.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class MS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ce(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,pe.Z)(function*(c,h){const y=$e(c),E=lg(y.M)+"/documents",D={documents:h.map(K=>Ef(y.M,K))},N=yield y._o("BatchGetDocuments",E,D),M=new Map;N.forEach(K=>{const ie=function(n,e){return"found"in e?function(t,r){Et(!!r.found);const a=Ko(t,r.found.name),c=Wr(r.found.updateTime),h=new Gr({mapValue:{fields:r.found.fields}});return vn.newFoundDocument(a,c,h)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const a=Ko(t,r.missing),c=Wr(r.readTime);return vn.newNoDocument(a,c)}(n,e):Xe()}(y.M,K);M.set(ie.key.toString(),ie)});const $=[];return h.forEach(K=>{const ie=M.get(K.toString());Et(!!ie),$.push(ie)}),$}),function(c,h){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ha(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const c=Be.fromPath(a);e.mutations.push(new Dy(c,e.precondition(c)))}),yield(r=(0,pe.Z)(function*(a,c){const h=$e(a),y=lg(h.M)+"/documents",E={writes:c.map(D=>Cf(h.M,D))};yield h.co("Commit",y,E)}),function(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ce(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new Ce(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uC{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this.xa=r.maxAttempts,this.No=new Bw(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,pe.Z)(function*(){const t=new MS(e.datastore),r=e.ka(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Ma(c)}))}).catch(a=>{e.Ma(a)})}))}ka(e){try{const t=this.updateFunction(e);return!dy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ty(t)}return!1}}class OS{constructor(e,t,r,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Dr.UNAUTHENTICATED,this.clientId=wE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,pe.Z)(function*(y){ke("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(ke("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=Bd(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function w0(n,e){return b0.apply(this,arguments)}function b0(){return(b0=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,pe.Z)(function*(c){r.isEqual(c)||(yield $y(e.localStore,c),r=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function E0(n,e){return I0.apply(this,arguments)}function I0(){return(I0=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Mg(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>WI(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>WI(e.remoteStore,c)),n.onlineComponents=e})).apply(this,arguments)}function Mg(n){return C0.apply(this,arguments)}function C0(){return(C0=(0,pe.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield w0(n,new sC)),n.offlineComponents})).apply(this,arguments)}function Og(n){return __.apply(this,arguments)}function __(){return(__=(0,pe.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield E0(n,new m_)),n.onlineComponents})).apply(this,arguments)}function cC(n){return Mg(n).then(e=>e.persistence)}function D0(n){return Mg(n).then(e=>e.localStore)}function lC(n){return Og(n).then(e=>e.remoteStore)}function Pg(n){return Og(n).then(e=>e.syncEngine)}function Lf(n){return v_.apply(this,arguments)}function v_(){return(v_=(0,pe.Z)(function*(n){const e=yield Og(n),t=e.eventManager;return t.onListen=ES.bind(null,e.syncEngine),t.onUnlisten=u_.bind(null,e.syncEngine),t})).apply(this,arguments)}function dC(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(a,c,h,y,E){const D=new y_({next:M=>{c.enqueueAndForget(()=>a_(a,N));const $=M.docs.has(h);!$&&M.fromCache?E.reject(new Ce(he.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&M.fromCache&&y&&"server"===y.source?E.reject(new Ce(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),N=new e0(Yc(h.path),D,{includeMetadataChanges:!0,ku:!0});return s_(a,N)}(yield Lf(n),n.asyncQueue,e,t,r)})),r.promise}function hC(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(a,c,h,y,E){const D=new y_({next:M=>{c.enqueueAndForget(()=>a_(a,N)),M.fromCache&&"server"===y.source?E.reject(new Ce(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),N=new e0(h,D,{includeMetadataChanges:!0,ku:!0});return s_(a,N)}(yield Lf(n),n.asyncQueue,e,t,r)})),r.promise}const gC=new Map;function T0(n,e,t){if(!t)throw new Ce(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function A0(n,e,t,r){if(!0===e&&!0===r)throw new Ce(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mC(n){if(!Be.isDocumentKey(n))throw new Ce(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yC(n){if(Be.isDocumentKey(n))throw new Ce(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function w_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Gt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=w_(n);throw new Ce(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function b_(n,e){if(e<=0)throw new Ce(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class S0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,A0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S0({}),this._settingsFrozen=!1,e instanceof qo?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ce(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qo(a.options.projectId)}(e))}get app(){if(!this._app)throw new Ce(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _E;switch(t.type){case"gapi":const r=t.client;return Et(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new fA(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ce(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gC.get(e);t&&(ke("ComponentProvider","Removing Datastore"),gC.delete(e),t.terminate())}(this),Promise.resolve()}}class xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Kr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class qa extends Kr{constructor(e,t,r){super(e,t,Yc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Be(e))}withConverter(e){return new qa(this.firestore,e,this._path)}}function x0(n,e,...t){if(n=(0,mt.m9)(n),T0("collection","path",e),n instanceof Wd){const r=Rt.fromString(e,...t);return yC(r),new qa(n,null,r)}{if(!(n instanceof xn||n instanceof qa))throw new Ce(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return yC(r),new qa(n.firestore,null,r)}}function kg(n,e,...t){if(n=(0,mt.m9)(n),1===arguments.length&&(e=wE.R()),T0("doc","path",e),n instanceof Wd){const r=Rt.fromString(e,...t);return mC(r),new xn(n,null,new Be(r))}{if(!(n instanceof xn||n instanceof qa))throw new Ce(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return mC(r),new xn(n.firestore,n instanceof qa?n.converter:null,new Be(r))}}function N0(n,e){return n=(0,mt.m9)(n),e=(0,mt.m9)(e),(n instanceof xn||n instanceof qa)&&(e instanceof xn||e instanceof qa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function R0(n,e){return n=(0,mt.m9)(n),e=(0,mt.m9)(e),n instanceof Kr&&e instanceof Kr&&n.firestore===e.firestore&&sg(n._query,e._query)&&n.converter===e.converter}class LM{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Bw(this,"async_queue_retry"),this.Qa=()=>{const t=Ns();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Ns();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Ns();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Tr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,pe.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!zr(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,sr("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const a=Qw.createAndSchedule(this,e,t,r,c=>this.Ha(c));return this.La.push(a),a}ja(){this.Ua&&Xe()}verifyOperationInProgress(){}Ja(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function M0(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class Vf{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cn extends Wd{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new LM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||_C(this),this._firestoreClient.terminate()}}function Nn(n){return n._firestoreClient||_C(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _C(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ly(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new OS(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ta(n,e,t){const r=new Tr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield w0(n,t),yield E0(n,e),r.resolve()}catch(a){if(!("FirebaseError"===(c=a).name?c.code===he.FAILED_PRECONDITION||c.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function wC(n){if(n._initialized||n._terminated)throw new Ce(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(ar.fromBase64String(e))}catch(t){throw new Ce(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new na(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lu{constructor(e){this._methodName=e}}class Fg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const qS=/^__.*__$/;class GM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $a(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ts(e,this.data,t,this.fieldTransforms)}}class EC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class I_{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=a,void 0===c&&this.tc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new I_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.nc({path:r,ic:!1});return a.rc(e),a}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.nc({path:r,ic:!1});return a.tc(),a}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return A_(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(IC(this.ec)&&qS.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class CC{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Cg(e)}lc(e,t,r,a=!1){return new I_({ec:e,methodName:t,hc:r,path:Ar.emptyPath(),ic:!1,cc:a},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function fl(n){const e=n._freezeSettings(),t=Cg(n._databaseId);return new CC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Lg(n,e,t,r,a,c={}){const h=n.lc(c.merge||c.mergeFields?2:0,e,t,a);P0("Data must be an object, but it was:",h,r);const y=AC(r,h);let E,D;if(c.merge)E=new Uc(h.fieldMask),D=h.fieldTransforms;else if(c.mergeFields){const N=[];for(const M of c.mergeFields){const $=k0(e,M,t);if(!h.contains($))throw new Ce(he.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);SC(N,$)||N.push($)}E=new Uc(N),D=h.fieldTransforms.filter(M=>E.covers(M.field))}else E=null,D=h.fieldTransforms;return new GM(new Gr(y),E,D)}class Vg extends Lu{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vg}}function DC(n,e,t){return new I_({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class C_ extends Lu{_toFieldTransform(e){return new wf(e.path,new Qc)}isEqual(e){return e instanceof C_}}class D_ extends Lu{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=DC(this,e,!0),r=this.fc.map(c=>zd(c,t)),a=new Ad(r);return new wf(e.path,a)}isEqual(e){return this===e}}class WS extends Lu{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=DC(this,e,!0),r=this.fc.map(c=>zd(c,t)),a=new ja(r);return new wf(e.path,a)}isEqual(e){return this===e}}class TC extends Lu{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new vf(e.M,DA(e.M,this.dc));return new wf(e.path,t)}isEqual(e){return this===e}}function Uf(n,e,t,r){const a=n.lc(1,e,t);P0("Data must be an object, but it was:",a,r);const c=[],h=Gr.empty();Lc(r,(E,D)=>{const N=T_(e,E,t);D=(0,mt.m9)(D);const M=a.oc(N);if(D instanceof Vg)c.push(N);else{const $=zd(D,M);null!=$&&(c.push(N),h.set(N,$))}});const y=new Uc(c);return new EC(h,y,a.fieldTransforms)}function Bf(n,e,t,r,a,c){const h=n.lc(1,e,t),y=[k0(e,r,t)],E=[a];if(c.length%2!=0)throw new Ce(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<c.length;$+=2)y.push(k0(e,c[$])),E.push(c[$+1]);const D=[],N=Gr.empty();for(let $=y.length-1;$>=0;--$)if(!SC(D,y[$])){const K=y[$];let ie=E[$];ie=(0,mt.m9)(ie);const xe=h.oc(K);if(ie instanceof Vg)D.push(K);else{const Fe=zd(ie,xe);null!=Fe&&(D.push(K),N.set(K,Fe))}}const M=new Uc(D);return new EC(N,M,h.fieldTransforms)}function jf(n,e,t,r=!1){return zd(t,n.lc(r?4:3,e))}function zd(n,e){if(zS(n=(0,mt.m9)(n)))return P0("Unsupported field value:",e,n),AC(n,e);if(n instanceof Lu)return function(t,r){if(!IC(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const h of t){let y=zd(h,r.uc(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,mt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return DA(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=or.fromDate(t);return{timestampValue:Sd(r.M,a)}}if(t instanceof or){const a=new or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sd(r.M,a)}}if(t instanceof Fg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof na)return{bytesValue:xy(r.M,t._byteString)};if(t instanceof xn){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r.ac(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ow(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${w_(t)}`)}(n,e)}function AC(n,e){const t={};return Uv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lc(n,(r,a)=>{const c=zd(a,e.sc(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function zS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof or||n instanceof Fg||n instanceof na||n instanceof xn||n instanceof Lu)}function P0(n,e,t){if(!zS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=w_(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function k0(n,e,t){if((e=(0,mt.m9)(e))instanceof Fu)return e._internalPath;if("string"==typeof e)return T_(n,e);throw A_("Field path arguments must be of type string or ",n,!1,void 0,t)}const KS=new RegExp("[~\\*/\\[\\]]");function T_(n,e,t){if(e.search(KS)>=0)throw A_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fu(...e.split("."))._internalPath}catch(r){throw A_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function A_(n,e,t,r,a){const c=r&&!r.isEmpty(),h=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let E="";return(c||h)&&(E+=" (found",c&&(E+=` in field ${r}`),h&&(E+=` in document ${a}`),E+=")"),new Ce(he.INVALID_ARGUMENT,y+n+E)}function SC(n,e){return n.some(t=>t.isEqual(e))}class Ug{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(S_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ZS extends Ug{data(){return super.data()}}function S_(n,e){return"string"==typeof e?T_(n,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}class $f{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vu extends Ug{constructor(e,t,r,a,c,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(S_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Uu extends Vu{data(e={}){return super.data(e)}}class pl{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new $f(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uu(this._firestore,this._userDataWriter,r.key,r,new $f(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Uu(r._firestore,r._userDataWriter,h.doc.key,h.doc,new $f(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const y=new Uu(r._firestore,r._userDataWriter,h.doc.key,h.doc,new $f(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,D=-1;return 0!==h.type&&(E=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),D=c.indexOf(h.doc.key)),{type:YS(h.type),doc:y,oldIndex:E,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function YS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function xC(n,e){return n instanceof Vu&&e instanceof Vu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pl&&e instanceof pl&&n._firestore===e._firestore&&R0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Bg(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ce(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ra{}function Bu(n,...e){for(const t of e)n=t._apply(n);return n}class QS extends ra{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=fl(e.firestore),r=function(a,c,h,y,E,D,N){let M;if(E.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ce(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){B0(N,D);const K=[];for(const ie of N)K.push(OC(y,a,ie));M={arrayValue:{values:K}}}else M=OC(y,a,N)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||B0(N,D),M=jf(h,"where",N,"in"===D||"not-in"===D);const $=qr.create(E,D,M);return function(K,ie){if(ie.S()){const Fe=Kv(K);if(null!==Fe&&!Fe.isEqual(ie.field))throw new Ce(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Fe.toString()}' and '${ie.field.toString()}'`);const Mt=zv(K);null!==Mt&&jg(0,ie.field,Mt)}const xe=function(Fe,Mt){for(const Vt of Fe.filters)if(Mt.indexOf(Vt.op)>=0)return Vt.op;return null}(K,function(Fe){switch(Fe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==xe)throw new Ce(he.INVALID_ARGUMENT,xe===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${xe.toString()}' filters.`)}(a,$),$}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Kr(e.firestore,e.converter,function(a,c){const h=a.filters.concat([c]);return new Zc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class JS extends ra{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,a,c){if(null!==r.startAt)throw new Ce(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ce(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new _f(a,c);return function(y,E){if(null===zv(y)){const D=Kv(y);null!==D&&jg(0,D,E.field)}}(r,h),h}(e._query,this._c,this.gc);return new Kr(e.firestore,e.converter,function(r,a){const c=r.explicitOrderBy.concat([a]);return new Zc(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class NC extends ra{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Kr(e.firestore,e.converter,Yv(e._query,this.yc,this.Ic))}}class F0 extends ra{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=U0(e,this.type,this.Tc,this.Ec);return new Kr(e.firestore,e.converter,(a=t,new Zc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class V0 extends ra{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=U0(e,this.type,this.Tc,this.Ec);return new Kr(e.firestore,e.converter,(a=t,new Zc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function U0(n,e,t,r){if(t[0]=(0,mt.m9)(t[0]),t[0]instanceof Ug)return function(a,c,h,y,E){if(!y)throw new Ce(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const N of Td(a))if(N.field.isKeyField())D.push(gf(c,y.key));else{const M=y.data.field(N.field);if(CE(M))throw new Ce(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+N.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const $=N.field.canonicalString();throw new Ce(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}D.push(M)}return new Kc(D,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=fl(n.firestore);return function(c,h,y,E,D,N){const M=c.explicitOrderBy;if(D.length>M.length)throw new Ce(he.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let K=0;K<D.length;K++){const ie=D[K];if(M[K].field.isKeyField()){if("string"!=typeof ie)throw new Ce(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ie}`);if(!Zv(c)&&-1!==ie.indexOf("/"))throw new Ce(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ie}' contains a slash.`);const xe=c.path.child(Rt.fromString(ie));if(!Be.isDocumentKey(xe))throw new Ce(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Fe=new Be(xe);$.push(gf(h,Fe))}else{const xe=jf(y,E,ie);$.push(xe)}}return new Kc($,N)}(n._query,n.firestore._databaseId,a,e,t,r)}}function OC(n,e,t){if("string"==typeof(t=(0,mt.m9)(t))){if(""===t)throw new Ce(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zv(e)&&-1!==t.indexOf("/"))throw new Ce(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rt.fromString(t));if(!Be.isDocumentKey(r))throw new Ce(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gf(n,new Be(r))}if(t instanceof xn)return gf(n,t._key);throw new Ce(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${w_(t)}.`)}function B0(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ce(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jg(n,e,t){if(!t.isEqual(e))throw new Ce(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const N_={maxAttempts:5};class PC{convertValue(e,t="none"){switch(Hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Lc(e.fields,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new Fg(ur(e.latitude),ur(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=La(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const t=Fa(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rt.fromString(e);Et(fw(r));const a=new qo(r.get(1),r.get(3)),c=new Be(r.popFirst(5));return a.isEqual(t)||sr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function gl(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class an extends PC{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}class ju{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fl(e)}set(e,t,r){this._verifyNotCommitted();const a=Ms(e,this._firestore),c=gl(a.converter,t,r),h=Lg(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,Qn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=Ms(e,this._firestore);let h;return h="string"==typeof(t=(0,mt.m9)(t))||t instanceof Fu?Bf(this._dataReader,"WriteBatch.update",c._key,t,r,a):Uf(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ms(e,this._firestore);return this._mutations=this._mutations.concat(new Ha(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ms(n,e){if((n=(0,mt.m9)(n)).firestore!==e)throw new Ce(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Hf extends PC{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function $0(n,e,t){n=Gt(n,xn);const r=Gt(n.firestore,Cn),a=gl(n.converter,e,t);return fn(r,[Lg(fl(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Qn.none())])}function H0(n,e,t,...r){n=Gt(n,xn);const a=Gt(n.firestore,Cn),c=fl(a);let h;return h="string"==typeof(e=(0,mt.m9)(e))||e instanceof Fu?Bf(c,"updateDoc",n._key,e,t,r):Uf(c,"updateDoc",n._key,e),fn(a,[h.toMutation(n._key,Qn.exists(!0))])}function kC(n,...e){var t,r,a;n=(0,mt.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||M0(e[h])||(c=e[h],h++);const y={includeMetadataChanges:c.includeMetadataChanges};if(M0(e[h])){const M=e[h];e[h]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[h+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[h+2]=null===(a=M.complete)||void 0===a?void 0:a.bind(M)}let E,D,N;if(n instanceof xn)D=Gt(n.firestore,Cn),N=Yc(n._key.path),E={next:M=>{e[h]&&e[h](Os(D,n,M))},error:e[h+1],complete:e[h+2]};else{const M=Gt(n,Kr);D=Gt(M.firestore,Cn),N=M._query;const $=new Hf(D);E={next:K=>{e[h]&&e[h](new pl(D,$,M,K))},error:e[h+1],complete:e[h+2]},Bg(n._query)}return function(M,$,K,ie){const xe=new y_(ie),Fe=new e0($,xe,K);return M.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return s_(yield Lf(M),Fe)})),()=>{xe.Aa(),M.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return a_(yield Lf(M),Fe)}))}}(Nn(D),N,y,E)}function fn(n,e){return function(t,r){const a=new Tr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(n,e,t){return c_.apply(this,arguments)}(yield Pg(t),r,a)})),a.promise}(Nn(n),e)}function Os(n,e,t){const r=t.docs.get(e._key),a=new Hf(n);return new Vu(n,a,e._key,r,new $f(t.hasPendingWrites,t.fromCache),e.converter)}class FC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fl(e)}get(e){const t=Ms(e,this._firestore),r=new an(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Xe();const c=a[0];if(c.isFoundDocument())return new Ug(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new Ug(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const a=Ms(e,this._firestore),c=gl(a.converter,t,r),h=Lg(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(e,t,r,...a){const c=Ms(e,this._firestore);let h;return h="string"==typeof(t=(0,mt.m9)(t))||t instanceof Fu?Bf(this._dataReader,"Transaction.update",c._key,t,r,a):Uf(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=Ms(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ms(e,this._firestore),r=new Hf(this._firestore);return super.get(e).then(a=>new Vu(this._firestore,r,t._key,a._document,new $f(!1,!1),t.converter))}}function qg(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function z0(){if("undefined"==typeof Uint8Array)throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function Zd(){if("undefined"==typeof atob)throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){wd=Ir.SDK_VERSION,(0,Ir._registerComponent)(new bi.wA("firestore",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),c=new Cn(a,new vE(t.getProvider("auth-internal")),new pA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,Ir.registerVersion)(Vv,"3.4.9",n),(0,Ir.registerVersion)(Vv,"3.4.9","esm2017")}();class Wg{constructor(e){this._delegate=e}static fromBase64String(e){return Zd(),new Wg(na.fromBase64String(e))}static fromUint8Array(e){return z0(),new Wg(na.fromUint8Array(e))}toBase64(){return Zd(),this._delegate.toBase64()}toUint8Array(){return z0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wf(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class UC{enableIndexedDbPersistence(e,t){return function(n,e){wC(n=Gt(n,Cn));const t=Nn(n),r=n._freezeSettings(),a=new m_;return ta(t,a,new oC(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){wC(n=Gt(n,Cn));const e=Nn(n),t=n._freezeSettings(),r=new m_;return ta(e,r,new RS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ce(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!In.vt())return Promise.resolve();const a=r+"main";yield In.delete(a)}),function(r){return t.apply(this,arguments)})(wI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class K0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var a;const c=(n=Gt(n,Wd))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&bd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,y;if("string"==typeof r.mockUserToken)h=r.mockUserToken,y=Dr.MOCK_USER;else{h=(0,mt.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ce(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Dr(E)}n._authCredentials=new dA(new lA(h,y))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield cC(n),t=yield lC(n);return e.setNetworkEnabled(!0),function(r){const a=$e(r);return a.wu.delete(0),Dg(a)}(t)}))}(Nn(n=Gt(n,Cn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield cC(n),t=yield lC(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(a){const c=$e(a);c.wu.add(0),yield Rf(c),c.yu.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(Nn(n=Gt(n,Cn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,A0("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Tr;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(n,e){return l0.apply(this,arguments)}(yield Pg(e),t)})),t.promise}(Nn(n=Gt(n,Cn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new y_(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Lf(n),a=t,$e(r).bu.add(a),void a.next();var r,a})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Lf(n),a=t,void $e(r).bu.delete(a);var r,a}))}}(Nn(n=Gt(n,Cn)),M0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zf(this,x0(this._delegate,e))}catch(t){throw it(t,"collection()","Firestore.collection()")}}doc(e){try{return new ia(this,kg(this._delegate,e))}catch(t){throw it(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ji(this,function(n,e){if(n=Gt(n,Wd),T0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kr(n,null,(t=e,new Zc(Rt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw it(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=Gt(n,Cn);const r=Object.assign(Object.assign({},N_),t);return function(a){if(a.maxAttempts<1)throw new Ce(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const a=yield(c=n,Og(c).then(h=>h.datastore));var c;new uC(n.asyncQueue,a,t,e,r).run()})),r.promise}(Nn(n),a=>e(new FC(n,a)),r)}(this._delegate,t=>e(new R_(this,t)))}batch(){return Nn(this._delegate),new M_(new ju(this._delegate,e=>fn(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Nn(n=Gt(n,Cn)),r=new Vf;return function(n,e,t,r){const a=function(c,h){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,E=function(E,D){if(E instanceof Uint8Array)return aC(E,D);if(E instanceof ArrayBuffer)return aC(new Uint8Array(E),D);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new Ff(E,h);var E}(t,Cg(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function(n,e,t){const r=$e(n);var a;(a=(0,pe.Z)(function*(c,h,y){try{const E=yield h.getMetadata();if(yield function($,K){const ie=$e($),xe=Wr(K.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Fe=>ie._s.getBundleMetadata(Fe,K.id)).then(Fe=>!!Fe&&Fe.createTime.compareTo(xe)>=0)}(c.localStore,E))return yield h.close(),y._completeWith({taskState:"Success",documentsLoaded:($=E).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);y._updateProgress(_S(E));const D=new t0(E,c.localStore,h.M);let N=yield h.ma();for(;N;){const $=yield D.Fu(N);$&&y._updateProgress($),N=yield h.ma()}const M=yield D.complete();return yield Rs(c,M.Lu,void 0),yield function($,K){const ie=$e($);return ie.persistence.runTransaction("Save bundle","readwrite",xe=>ie._s.saveBundleMetadata(xe,K))}(c.localStore,E),y._completeWith(M.progress),Promise.resolve(M.Bu)}catch(E){return bd("SyncEngine",`Loading bundle failed with ${E}`),y._failWith(E),Promise.resolve(new Set)}var $}),function(c,h,y){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield Pg(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const a=$e(t);return a.persistence.runTransaction("Get named query","readonly",c=>a._s.getNamedQuery(c,r))}(yield D0(n),e)}))}(Nn(n=Gt(n,Cn)),e).then(t=>t?new Kr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ji(this,t):null)}}class Yd extends PC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wg(new na(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ia.forKey(t,this.firestore,null)}}class R_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Yd(e)}get(e){const t=Jn(e);return this._delegate.get(t).then(r=>new zg(this._firestore,new Vu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Jn(e);return r?(qg("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Jn(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Jn(e);return this._delegate.delete(t),this}}class M_{constructor(e){this._delegate=e}set(e,t,r){const a=Jn(e);return r?(qg("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Jn(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Jn(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Uu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kg(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zf.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new zf(e,new Yd(e),t),a.set(t,c)),c}}zf.INSTANCES=new WeakMap;class ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yd(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ia(t,new xn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new ia(t,new xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zf(this.firestore,x0(this._delegate,e))}catch(t){throw it(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,mt.m9)(e))instanceof xn&&N0(this._delegate,e)}set(e,t){t=qg("DocumentReference.set",t);try{return t?$0(this._delegate,e,t):$0(this._delegate,e)}catch(r){throw it(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?H0(this._delegate,e):H0(this._delegate,e,t,...r)}catch(a){throw it(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return fn(Gt(n.firestore,Cn),[new Ha(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=ox(e),r=Kf(e,a=>new zg(this.firestore,new Vu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return kC(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Gt(n,xn);const e=Gt(n.firestore,Cn),t=Nn(e),r=new Hf(e);return function(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(a,c,h){try{const y=yield function(E,D){const N=$e(E);return N.persistence.runTransaction("read document","readonly",M=>N.fi.Ls(M,D))}(a,c);y.isFoundDocument()?h.resolve(y):y.isNoDocument()?h.resolve(null):h.reject(new Ce(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const E=Bd(y,`Failed to get document '${c} from cache`);h.reject(E)}}),function(a,c,h){return r.apply(this,arguments)})(yield D0(n),e,t);var r})),t.promise}(t,n._key).then(a=>new Vu(e,r,n._key,a,new $f(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Gt(n,xn);const e=Gt(n.firestore,Cn);return dC(Nn(e),n._key,{source:"server"}).then(t=>Os(e,n,t))}(this._delegate):function(n){n=Gt(n,xn);const e=Gt(n.firestore,Cn);return dC(Nn(e),n._key).then(t=>Os(e,n,t))}(this._delegate),t.then(r=>new zg(this.firestore,new Vu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ia(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}function it(n,e,t){return n.message=n.message.replace(e,t),n}function ox(n){for(const e of n)if("object"==typeof e&&!Wf(e))return e;return{}}function Kf(n,e){var t,r;let a;return a=Wf(n[0])?n[0]:Wf(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class zg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xC(this._delegate,e._delegate)}}class Kg extends zg{data(e){const t=this._delegate.data(e);return function(n,e){n||Xe()}(void 0!==t),t}}class ji{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yd(e)}where(e,t,r){try{return new ji(this.firestore,Bu(this._delegate,function(n,e,t){const r=e,a=S_("where",n);return new QS(a,r,t)}(e,t,r)))}catch(a){throw it(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ji(this.firestore,Bu(this._delegate,function(n,e="asc"){const t=e,r=S_("orderBy",n);return new JS(r,t)}(e,t)))}catch(r){throw it(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ji(this.firestore,Bu(this._delegate,function(n){return b_("limit",n),new NC("limit",n,"F")}(e)))}catch(t){throw it(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ji(this.firestore,Bu(this._delegate,function(n){return b_("limitToLast",n),new NC("limitToLast",n,"L")}(e)))}catch(t){throw it(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ji(this.firestore,Bu(this._delegate,function(...n){return new F0("startAt",n,!0)}(...e)))}catch(t){throw it(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ji(this.firestore,Bu(this._delegate,function(...n){return new F0("startAfter",n,!1)}(...e)))}catch(t){throw it(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ji(this.firestore,Bu(this._delegate,function(...n){return new V0("endBefore",n,!1)}(...e)))}catch(t){throw it(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ji(this.firestore,Bu(this._delegate,function(...n){return new V0("endAt",n,!0)}(...e)))}catch(t){throw it(t,"endAt()","Query.endAt()")}}isEqual(e){return R0(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Gt(n,Kr);const e=Gt(n.firestore,Cn),t=Nn(e),r=new Hf(e);return function(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(a,c,h){try{const y=yield Wy(a,c,!0),E=new vS(c,y._i),D=E.Wu(y.documents),N=E.applyChanges(D,!1);h.resolve(N.snapshot)}catch(y){const E=Bd(y,`Failed to execute query '${c} against cache`);h.reject(E)}}),function(a,c,h){return r.apply(this,arguments)})(yield D0(n),e,t);var r})),t.promise}(t,n._query).then(a=>new pl(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Gt(n,Kr);const e=Gt(n.firestore,Cn),t=Nn(e),r=new Hf(e);return hC(t,n._query,{source:"server"}).then(a=>new pl(e,r,n,a))}(this._delegate):function(n){n=Gt(n,Kr);const e=Gt(n.firestore,Cn),t=Nn(e),r=new Hf(e);return Bg(n._query),hC(t,n._query).then(a=>new pl(e,r,n,a))}(this._delegate),t.then(r=>new BC(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ox(e),r=Kf(e,a=>new BC(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return kC(this._delegate,t,r)}withConverter(e){return new ji(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}class ZM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ZM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Kg(this._firestore,r))})}isEqual(e){return xC(this._delegate,e._delegate)}}class Zf extends ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ia(this.firestore,e):null}doc(e){try{return new ia(this.firestore,void 0===e?kg(this._delegate):kg(this._delegate,e))}catch(t){throw it(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Gt(n.firestore,Cn),r=kg(n),a=gl(n.converter,e);return fn(t,[Lg(fl(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ia(this.firestore,t))}isEqual(e){return N0(this._delegate,e._delegate)}withConverter(e){return new Zf(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}function Jn(n){return Gt(n,xn)}class Z0{constructor(...e){this._delegate=new Fu(...e)}static documentId(){return new Z0(Ar.keyField().canonicalString())}isEqual(e){return(e=(0,mt.m9)(e))instanceof Fu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qd{constructor(e){this._delegate=e}static serverTimestamp(){const e=new C_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Qd(e)}static delete(){const e=new Vg("deleteField");return e._methodName="FieldValue.delete",new Qd(e)}static arrayUnion(...e){const t=function(...n){return new D_("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qd(t)}static arrayRemove(...e){const t=function(...n){return new WS("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qd(t)}static increment(e){const t=function(n){return new TC("increment",n)}(e);return t._methodName="FieldValue.increment",new Qd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Y0={Firestore:K0,GeoPoint:Fg,Timestamp:or,Blob:Wg,Transaction:R_,WriteBatch:M_,DocumentReference:ia,DocumentSnapshot:zg,Query:ji,QueryDocumentSnapshot:Kg,QuerySnapshot:BC,CollectionReference:Zf,FieldPath:Z0,FieldValue:Qd,setLogLevel:function(n){!function(n){Go.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new bi.wA("firestore-compat",t=>((e,t)=>new K0(e,t,new UC))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Y0)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(ys.Z);var ml=k(9765),cx=k(6682),Zg=k(309),Yf=k(5345);function Zr(n,e){return"function"==typeof e?t=>t.pipe(Zr((r,a)=>(0,en.D)(n(r,a)).pipe((0,Qe.U)((c,h)=>e(r,c,a,h))))):t=>t.lift(new lx(n))}class lx{constructor(e){this.project=e}call(e,t){return t.subscribe(new dx(e,this.project))}}class dx extends Yf.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Yf.IY(this),a=this.destination;a.add(r),this.innerSubscription=(0,Yf.ft)(e,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var jC=k(7771),O_=k(5319),$C=k(7971),YM=k(8858);class hx extends ml.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new fx(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=r.length;let h;if(this.closed)throw new $C.N;if(this.isStopped||this.hasError?h=O_.w.EMPTY:(this.observers.push(e),h=new YM.W(this,e)),a&&e.add(e=new Zg.ht(e,a)),t)for(let y=0;y<c&&!e.closed;y++)e.next(r[y]);else for(let y=0;y<c&&!e.closed;y++)e.next(r[y].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||jC.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,a=this._events,c=a.length;let h=0;for(;h<c&&!(e-a[h].time<r);)h++;return c>t&&(h=Math.max(h,c-t)),h>0&&a.splice(0,h),a}}class fx{constructor(e,t){this.time=e,this.value=t}}function HC(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let a,h,c=0,y=!1,E=!1;return function(N){let M;c++,!a||y?(y=!1,a=new hx(n,e,r),M=a.subscribe(this),h=N.subscribe({next($){a.next($)},error($){y=!0,a.error($)},complete(){E=!0,h=void 0,a.complete()}}),E&&(h=void 0)):M=a.subscribe(this),this.add(()=>{c--,M.unsubscribe(),M=void 0,h&&!E&&t&&0===c&&(h.unsubscribe(),h=void 0,a=void 0)})}}(r))}const P_=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),GC=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();var yl=k(9193);function F_(n){return e=>0===n?(0,yl.c)():e.lift(new Yg(n))}class Yg{constructor(e){if(this.total=e,this.total<0)throw new GC}call(e,t){return t.subscribe(new JM(e,this.total))}}class JM extends wi.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Q0(n=null){return e=>e.lift(new gx(n))}class gx{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new mx(e,this.defaultValue))}}class mx extends wi.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function qC(n=WC){return e=>e.lift(new yx(n))}class yx{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new _x(e,this.errorFactory))}}class _x extends wi.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function WC(){return new P_}var zC=k(4487);function Jd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bi((a,c)=>n(a,c,r)):zC.y,F_(1),t?Q0(e):qC(()=>new P_))}function vx(n,e){return e?Zr(()=>n,e):Zr(()=>n)}var KC=k(3101);k(2329);const eb=new Map,QC={activated:!1,tokenObservers:[]},Dx={initialized:!1,enabled:!1};function Yr(n){return eb.get(n)||QC}function sa(n,e){eb.set(n,e)}function Jg(){return Dx}class JC{constructor(e,t,r,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new mt.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new mt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ai=new mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function V_(n){if(!Yr(n).activated)throw Ai.create("use-before-activation",{appName:n.name})}function rb(n,e){return ib.apply(this,arguments)}function ib(){return(ib=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const M=yield a.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const c={method:"POST",body:JSON.stringify(e),headers:r};let h,y;try{h=yield fetch(n,c)}catch(M){throw Ai.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==h.status)throw Ai.create("fetch-status-error",{httpStatus:h.status});try{y=yield h.json()}catch(M){throw Ai.create("fetch-parse-error",{originalErrorMessage:M.message})}const E=y.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(E[1]),N=Date.now();return{token:y.token,expireTimeMillis:N+D,issuedAtTimeMillis:N}})).apply(this,arguments)}function Mx(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const $u="firebase-app-check-store";let em=null;function ob(){return em||(em=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var a;e(Ai.create("storage-open",{originalErrorMessage:null===(a=r.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=r=>{const a=r.target.result;switch(r.oldVersion){case 0:a.createObjectStore($u,{keyPath:"compositeKey"})}}}catch(t){e(Ai.create("storage-open",{originalErrorMessage:t.message}))}}),em)}function ab(){return(ab=(0,pe.Z)(function*(n,e){const r=(yield ob()).transaction($u,"readwrite"),c=r.objectStore($u).put({compositeKey:n,value:e});return new Promise((h,y)=>{c.onsuccess=E=>{h()},r.onerror=E=>{var D;y(Ai.create("storage-set",{originalErrorMessage:null===(D=E.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const Hu=new Ei.Yd("@firebase/app-check");function U_(n,e){return(0,mt.hl)()?function(n,e){return function(n,e){return ab.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Hu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nm(){return Jg().enabled}function iD(){return db.apply(this,arguments)}function db(){return(db=(0,pe.Z)(function*(){const n=Jg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hb={error:"UNKNOWN_ERROR"};function fb(n){return mt.US.encodeString(JSON.stringify(n),!1)}function rm(n){return im.apply(this,arguments)}function im(){return(im=(0,pe.Z)(function*(n,e=!1){const t=n.app;V_(t);const r=Yr(t);let c,a=r.token;if(!a){const E=yield r.cachedTokenPromise;E&&om(E)&&(a=E)}if(!e&&a&&om(a))return{token:a.token};let y,h=!1;if(nm()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rb(Mx(t,yield iD()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),h=!0);const E=yield r.exchangeTokenPromise;return yield U_(t,E),sa(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),h=!0),a=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Hu.warn(E.message):Hu.error(E),c=E}return a?(y={token:a.token},sa(t,Object.assign(Object.assign({},r),{token:a})),yield U_(t,a)):y=gb(c),h&&oD(t,y),y})).apply(this,arguments)}function pb(n,e){const t=Yr(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),sa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function sD(n){const{app:e}=n,t=Yr(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new JC((0,pe.Z)(function*(){let r;if(r=Yr(e).token?yield rm(n,!0):yield rm(n),r.error)throw r.error}),()=>!0,()=>{const t=Yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),sa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oD(n,e){const t=Yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function om(n){return n.expireTimeMillis-Date.now()>0}function gb(n){return{token:fb(hb),error:n}}class aD{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Yr(this.app);for(const t of e)pb(this.app,t.next);return Promise.resolve()}}const Wx="app-check-internal";(0,Ir._registerComponent)(new bi.wA("app-check",n=>function(n,e){return new aD(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Wx).initialize()})),(0,Ir._registerComponent)(new bi.wA(Wx,n=>function(n){return{getToken:e=>rm(n,e),addTokenListener:e=>function(n,e,t,r){const{app:a}=n,c=Yr(a),h={next:t,error:r,type:e};if(sa(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]})),c.token&&om(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),sD(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>sD(n))}(n,"INTERNAL",e),removeTokenListener:e=>pb(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ir.registerVersion)("@firebase/app-check","0.5.8");class Xf{constructor(){return(0,On.vb)("app-check")}}"undefined"!=typeof window&&window;var tN=k(7841);const bb=new g.OlP("angularfire2.auth.use-emulator"),Eb=new g.OlP("angularfire2.auth.settings"),Ib=new g.OlP("angularfire2.auth.tenant-id"),bD=new g.OlP("angularfire2.auth.langugage-code"),ED=new g.OlP("angularfire2.auth.use-device-language"),ID=new g.OlP("angularfire.auth.persistence"),Cb=(n,e,t,r,a,c,h,y)=>(0,Ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=a,c&&E.useDeviceLanguage(),h)for(const[D,N]of Object.entries(h))E.settings[D]=N;return y&&E.setPersistence(y),E},[t,r,a,c,h,y]);let nN=(()=>{class n{constructor(t,r,a,c,h,y,E,D,N,M,$,K){const ie=new ml.xQ,xe=(0,ot.of)(void 0).pipe((0,Zg.QV)(h.outsideAngular),Zr(()=>c.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2385)))),(0,Qe.U)(()=>(0,Ur.on)(t,c,r)),(0,Qe.U)(Fe=>Cb(Fe,c,y,D,N,M,E,$)),HC({bufferSize:1,refCount:!1}));if(au(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ot.of)(null);else{xe.pipe(Jd()).subscribe();const Mt=xe.pipe(Zr(Nt=>Nt.getRedirectResult().then(Wt=>Wt,()=>null)),On.iC,HC({bufferSize:1,refCount:!1})),Vt=xe.pipe(Zr(Nt=>new Er.y(Wt=>({unsubscribe:c.runOutsideAngular(()=>Nt.onAuthStateChanged(ln=>Wt.next(ln),ln=>Wt.error(ln),()=>Wt.complete()))})))),Ut=xe.pipe(Zr(Nt=>new Er.y(Wt=>({unsubscribe:c.runOutsideAngular(()=>Nt.onIdTokenChanged(ln=>Wt.next(ln),ln=>Wt.error(ln),()=>Wt.complete()))}))));this.authState=Mt.pipe(vx(Vt),(0,KC.R)(h.outsideAngular),(0,Zg.QV)(h.insideAngular)),this.user=Mt.pipe(vx(Ut),(0,KC.R)(h.outsideAngular),(0,Zg.QV)(h.insideAngular)),this.idToken=this.user.pipe(Zr(Nt=>Nt?(0,en.D)(Nt.getIdToken()):(0,ot.of)(null))),this.idTokenResult=this.user.pipe(Zr(Nt=>Nt?(0,en.D)(Nt.getIdTokenResult()):(0,ot.of)(null))),this.credential=(0,cx.T)(Mt,ie,this.authState.pipe(Bi(Nt=>!Nt))).pipe((0,Qe.U)(Nt=>(null==Nt?void 0:Nt.user)?Nt:null),(0,KC.R)(h.outsideAngular),(0,Zg.QV)(h.insideAngular))}return(0,Ur.pX)(this,xe,c,{spy:{apply:(Fe,Mt,Vt)=>{(Fe.startsWith("signIn")||Fe.startsWith("createUser"))&&Vt.then(Ut=>ie.next(Ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ur.Dh),g.LFG(Ur.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(On.HU),g.LFG(bb,8),g.LFG(Eb,8),g.LFG(Ib,8),g.LFG(bD,8),g.LFG(ED,8),g.LFG(ID,8),g.LFG(Xf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function rN(n,e){return function(n,e=ps.z){return new Er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function CD(n,e){return rN(n,e).pipe((0,Qe.U)(t=>({payload:t,type:"query"})))}function Db(n,e){return CD(n,e).pipe(vi(void 0),gc(),(0,Qe.U)(([t,r])=>{const a=r.payload.docChanges(),c=a.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,y)=>{const E=a.find(N=>N.doc.ref.isEqual(h.ref)),D=null==t?void 0:t.payload.docs.find(N=>N.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:h}})}),c}))}function iN(n,e,t){return Db(n,t).pipe(gs((r,a)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return DD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return DD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return DD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(c=>c.payload),e),[]),t=>t.lift(new xa(void 0,void 0)),(0,Qe.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function DD(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function sN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class oN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Db(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Qe.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(vi(void 0),gc(),Bi(([r,a])=>a.length>0||!r),(0,Qe.U)(([r,a])=>a),On.iC)}auditTrail(e){return this.stateChanges(e).pipe(gs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sN(e);return iN(this.query,t,this.afs.schedulers.outsideAngular).pipe(On.iC)}valueChanges(e={}){return CD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),On.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(On.iC)}add(e){return this.ref.add(e)}doc(e){return new aN(this.ref.doc(e),this.afs)}}class aN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:c}=TD(r,t);return new oN(a,c,this.afs)}snapshotChanges(){return function(n,e){return rN(n,e).pipe(vi(void 0),gc(),(0,Qe.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(On.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Qe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(On.iC)}}class y1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Db(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Bi(t=>t.length>0),On.iC):Db(this.query,this.afs.schedulers.outsideAngular).pipe(On.iC)}auditTrail(e){return this.stateChanges(e).pipe(gs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sN(e);return iN(this.query,t,this.afs.schedulers.outsideAngular).pipe(On.iC)}valueChanges(e={}){return CD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),On.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(On.iC)}}const uN=new g.OlP("angularfire2.enableFirestorePersistence"),cN=new g.OlP("angularfire2.firestore.persistenceSettings"),lN=new g.OlP("angularfire2.firestore.settings"),dN=new g.OlP("angularfire2.firestore.use-emulator");function TD(n,e=(t=>t)){return{query:e(n),ref:n}}let _1=(()=>{class n{constructor(t,r,a,c,h,y,E,D,N,M,$,K,ie,xe,Fe,Mt,Vt){this.schedulers=E;const Ut=(0,Ur.on)(t,y,r),Nt=N;M&&Cb(Ut,y,$,ie,xe,Fe,K,Mt),[this.firestore,this.persistenceEnabled$]=(0,Ur.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const Wt=y.runOutsideAngular(()=>Ut.firestore());if(c&&Wt.settings(c),Nt&&Wt.useEmulator(...Nt),a&&!au(h)){const ln=()=>{try{return(0,en.D)(Wt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(os){return"undefined"!=typeof console&&console.warn(os),(0,ot.of)(!1)}};return[Wt,y.runOutsideAngular(ln)]}return[Wt,(0,ot.of)(!1)]},[c,Nt,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=TD(a,r),y=this.schedulers.ngZone.run(()=>c);return new oN(y,h,this)}collectionGroup(t,r){const a=r||(h=>h),c=this.firestore.collectionGroup(t);return new y1(a(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new aN(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ur.Dh),g.LFG(Ur.xv,8),g.LFG(uN,8),g.LFG(lN,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(On.HU),g.LFG(cN,8),g.LFG(dN,8),g.LFG(nN,8),g.LFG(bb,8),g.LFG(Eb,8),g.LFG(Ib,8),g.LFG(bD,8),g.LFG(ED,8),g.LFG(ID,8),g.LFG(Xf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),v1=(()=>{class n{constructor(){tN.Z.registerVersion("angularfire",On.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:uN,useValue:!0},{provide:cN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[_1]}),n})();class Ka extends ml.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new $C.N;return this._value}next(e){super.next(this._value=e)}}var Tb=k(9796);class hN extends wi.L{notifyNext(e,t,r,a,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class fN extends wi.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var w1=k(7444);function b1(n,e,t,r,a=new fN(n,t,r)){if(!a.closed)return e instanceof Er.y?e.subscribe(a):(0,w1.s)(e)(a)}var E1=k(6693);const pN={};class I1{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new mN(e,this.resultSelector))}}class mN extends hN{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(pN),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(b1(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const a=this.values,h=this.toRespond?a[r]===pN?--this.toRespond:this.toRespond:0;a[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function G_(n){return new Er.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,en.D)(t):(0,yl.c)()).subscribe(e)})}var ep=k(2441);function vl(n){return function(t){const r=new yN(n),a=t.lift(r);return r.caught=a}}class yN{constructor(e){this.selector=e}call(e,t){return t.subscribe(new _N(e,this.selector,this.caught))}}class _N extends Yf.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new Yf.IY(this);this.add(r);const a=(0,Yf.ft)(t,r);a!==r&&this.add(a)}}}var li=k(9773);function tp(n,e){return(0,li.zg)(n,e,1)}function q_(n){return function(t){return 0===n?(0,yl.c)():t.lift(new AD(n))}}class AD{constructor(e){if(this.total=e,this.total<0)throw new GC}call(e,t){return t.subscribe(new C1(e,this.total))}}class C1 extends wi.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,a=this.count++;t.length<r?t.push(e):t[a%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<r;c++){const h=t++%r;e.next(a[h])}}e.complete()}}var xi=k(3342),xD=k(1307);class T1{constructor(e){this.callback=e}call(e,t){return t.subscribe(new A1(e,this.callback))}}class A1 extends wi.L{constructor(e,t){super(e),this.add(new O_.w(t))}}class Gu{constructor(e,t){this.id=e,this.url=t}}class ND extends Gu{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wl extends Gu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class RD extends Gu{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class S1 extends Gu{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class x1 extends Gu{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ab extends Gu{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vN extends Gu{constructor(e,t,r,a,c){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class N1 extends Gu{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R1 extends Gu{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MD{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wN{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OD{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bN{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class M1{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O1{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PD{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class EN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function np(n){return new EN(n)}const kD="ngNavigationCancelingError";function am(n){const e=Error("NavigationCancelingError: "+n);return e[kD]=!0,e}function Ps(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let c=0;c<r.length;c++){const h=r[c],y=n[c];if(h.startsWith(":"))a[h.substring(1)]=y;else if(h!==y.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function po(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let c=0;c<t.length;c++)if(a=t[c],!FD(n[a],e[a]))return!1;return!0}function FD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,c)=>r[c]===a)}return n===e}function LD(n){return Array.prototype.concat.apply([],n)}function W_(n){return n.length>0?n[n.length-1]:null}function Qr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Za(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,en.D)(Promise.resolve(n)):(0,ot.of)(n)}const UD={exact:function xb(n,e,t){if(!th(n.segments,e.segments)||!ss(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!xb(n.children[r],e.children[r],t))return!1;return!0},subset:z_},BD={exact:function(n,e){return po(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>FD(n[t],e[t]))},ignored:()=>!0};function jD(n,e,t){return UD[t.paths](n.root,e.root,t.matrixParams)&&BD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function z_(n,e,t){return HD(n,e,e.segments,t)}function HD(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!th(a,t)||e.hasChildren()||!ss(a,t,r))}if(n.segments.length===t.length){if(!th(n.segments,t)||!ss(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!z_(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(th(n.segments,a)&&ss(n.segments,a,r)&&n.children[Lt])&&HD(n.children[Lt],e,c,r)}}function ss(n,e,t){return e.every((r,a)=>BD[t](n[a].parameters,r.parameters))}class eh{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=np(this.queryParams)),this._queryParamMap}toString(){return SN.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qr(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cm(this)}}class um{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=np(this.parameters)),this._parameterMap}toString(){return WD(this)}}function th(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Nb{}class AN{parse(e){const t=new F1(e);return new eh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${`/${lm(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${dm(t)}=${dm(a)}`).join("&"):`${dm(t)}=${dm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:""}`}}const SN=new AN;function cm(n){return n.segments.map(e=>WD(e)).join("/")}function lm(n,e){if(!n.hasChildren())return cm(n);if(e){const t=n.children[Lt]?lm(n.children[Lt],!1):"",r=[];return Qr(n.children,(a,c)=>{c!==Lt&&r.push(`${c}:${lm(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Qr(n.children,(r,a)=>{a===Lt&&(t=t.concat(e(r,a)))}),Qr(n.children,(r,a)=>{a!==Lt&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===Lt?[lm(n.children[Lt],!1)]:[`${a}:${lm(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${cm(n)}/${t[0]}`:`${cm(n)}/(${t.join("//")})`}}function GD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dm(n){return GD(n).replace(/%3B/gi,";")}function qD(n){return GD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hm(n){return decodeURIComponent(n)}function Rb(n){return hm(n.replace(/\+/g,"%20"))}function WD(n){return`${qD(n.path)}${function(n){return Object.keys(n).map(e=>`;${qD(e)}=${qD(n[e])}`).join("")}(n.parameters)}`}const fm=/^[^\/()?;=#]+/;function rp(n){const e=n.match(fm);return e?e[0]:""}const KD=/^[^=?&#]+/,MN=/^[^?&#]+/;class F1{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Kt(e,t)),r}parseSegment(){const e=rp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new um(hm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=rp(this.remaining);a&&(r=a,this.capture(r))}e[hm(t)]=hm(r)}parseQueryParam(e){const t=function(n){const e=n.match(KD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(MN);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const a=Rb(t),c=Rb(r);if(e.hasOwnProperty(a)){let h=e[a];Array.isArray(h)||(h=[h],e[a]=h),h.push(c)}else e[a]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rp(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Lt);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[Lt]:new Kt([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ON{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=K_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=K_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Z_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return Z_(e,this._root).map(t=>t.value)}}function K_(n,e){if(n===e.value)return e;for(const t of e.children){const r=K_(n,t);if(r)return r}return null}function Z_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Z_(n,t);if(r.length)return r.unshift(e),r}return[]}class qu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ZD extends ON{constructor(e,t){super(e),this.snapshot=t,JD(this,e)}toString(){return this.snapshot.toString()}}function YD(n,e){const t=function(n,e){const h=new sp([],{},{},"",{},Lt,e,null,n.root,-1,{});return new xr("",new qu(h,[]))}(n,e),r=new Ka([new um("",{})]),a=new Ka({}),c=new Ka({}),h=new Ka({}),y=new Ka(""),E=new ip(r,a,h,y,c,Lt,e,t.root);return E.snapshot=t.root,new ZD(new qu(E,[]),t)}class ip{constructor(e,t,r,a,c,h,y,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=y,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(e=>np(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(e=>np(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function PN(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],c=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sp{constructor(e,t,r,a,c,h,y,E,D,N,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=y,this.routeConfig=E,this._urlSegment=D,this._lastPathIndex=N,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=np(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=np(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xr extends ON{constructor(e,t){super(t),this.url=e,JD(this,t)}toString(){return Mb(this._root)}}function JD(n,e){e.value._routerState=n,e.children.forEach(t=>JD(n,t))}function Mb(n){const e=n.children.length>0?` { ${n.children.map(Mb).join(", ")} } `:"";return`${n.value}${e}`}function Y_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,po(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),po(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!po(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),po(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ob(n,e){return po(n.params,e.params)&&function(n,e){return th(n,e)&&n.every((t,r)=>po(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Ob(n.parent,e.parent))}function J_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return J_(n,r,a);return J_(n,r)})}(n,e,t);return new qu(r,a)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return XD(e,h),h}}const r=function(n){return new ip(new Ka(n.url),new Ka(n.params),new Ka(n.queryParams),new Ka(n.fragment),new Ka(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(c=>J_(n,c));return new qu(r,a)}}function XD(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)XD(n.children[t],e.children[t])}function op(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rh(n){return"object"==typeof n&&null!=n&&n.outlets}function Pb(n,e,t,r,a){let c={};return r&&Qr(r,(h,y)=>{c[y]=Array.isArray(h)?h.map(E=>`${E}`):`${h}`}),new eh(t.root===n?e:gm(t.root,n,e),c,a)}function gm(n,e,t){const r={};return Qr(n.children,(a,c)=>{r[c]=a===e?t:gm(a,e,t)}),new Kt(n.segments,r)}class nT{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&op(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(rh);if(a&&a!==W_(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class X_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function rT(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return Fb(n,e,t);const r=function(n,e,t){let r=0,a=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return c;const h=n.segments[a],y=t[r];if(rh(y))break;const E=`${y}`,D=r<t.length-1?t[r+1]:null;if(a>0&&void 0===E)break;if(E&&D&&"object"==typeof D&&void 0===D.outlets){if(!VN(E,D,h))return c;r+=2}else{if(!VN(E,{},h))return c;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new Kt(n.segments.slice(0,r.pathIndex),{});return c.children[Lt]=new Kt(n.segments.slice(r.pathIndex),n.children),Fb(c,0,a)}return r.match&&0===a.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?Lb(n,e,t):r.match?Fb(n,0,a):Lb(n,e,t)}function Fb(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function(n){return rh(n[0])?n[0].outlets:{[Lt]:n}}(t),a={};return Qr(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[h]=rT(n.children[h],e,c))}),Qr(n.children,(c,h)=>{void 0===r[h]&&(a[h]=c)}),new Kt(n.segments,a)}}function Lb(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const c=t[a];if(rh(c)){const E=V1(c.outlets);return new Kt(r,E)}if(0===a&&op(t[0])){r.push(new um(n.segments[e].path,LN(t[0]))),a++;continue}const h=rh(c)?c.outlets[Lt]:`${c}`,y=a<t.length-1?t[a+1]:null;h&&y&&op(y)?(r.push(new um(h,LN(y))),a+=2):(r.push(new um(h,{})),a++)}return new Kt(r,{})}function V1(n){const e={};return Qr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Lb(new Kt([],{}),0,t))}),e}function LN(n){const e={};return Qr(n,(t,r)=>e[r]=`${t}`),e}function VN(n,e,t){return n==t.path&&po(e,t.parameters)}class BN{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Y_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=pm(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,a[h],r),delete a[h]}),Qr(a,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(a===c)if(a.component){const h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,c=pm(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=pm(t);e.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],r),this.forwardEvent(new O1(c.value.snapshot))}),e.children.length&&this.forwardEvent(new bN(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(Y_(a),a===c)if(a.component){const h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(y.contexts),h.attachRef=y.componentRef,h.route=y.route.value,h.outlet&&h.outlet.attach(y.componentRef,y.route.value),iT(y.route)}else{const y=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),E=y?y.module.componentFactoryResolver:null;h.attachRef=null,h.route=a,h.resolver=E,h.outlet&&h.outlet.activateWith(a,E),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function iT(n){Y_(n.value),n.children.forEach(iT)}class Vb{constructor(e,t){this.routes=e,this.module=t}}function ih(n){return"function"==typeof n}function sh(n){return n instanceof eh}const mm=Symbol("INITIAL_VALUE");function ym(){return Zr(n=>function(...n){let e,t;return(0,Tp.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Tb.k)(n[0])&&(n=n[0]),(0,E1.n)(n,t).lift(new I1(e))}(n.map(e=>e.pipe(F_(1),vi(mm)))).pipe(gs((e,t)=>{let r=!1;return t.reduce((a,c,h)=>a!==mm?a:(c===mm&&(r=!0),r||!1!==c&&h!==t.length-1&&!sh(c)?a:c),e)},mm),Bi(e=>e!==mm),(0,Qe.U)(e=>sh(e)?e:!0===e),F_(1)))}let sT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:function(){return[fv]},encapsulation:2}),n})();function oT(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];oa(r,qN(e,r))}}function oa(n,e){n.children&&oT(n.children,e)}function qN(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ub(n){const e=n.children&&n.children.map(Ub),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=sT),t}function go(n){return n.outlet||Lt}function aT(n,e){const t=n.filter(r=>go(r)===e);return t.push(...n.filter(r=>go(r)!==e)),t}const WN={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function tv(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},WN):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||Ps)(t,n,e);if(!c)return Object.assign({},WN);const h={};Qr(c.posParams,(E,D)=>{h[D]=E.path});const y=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:y,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function nv(n,e,t,r,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>rv(n,e,r)&&go(r)!==Lt)}(n,t,r)){const h=new Kt(e,function(n,e,t,r){const a={};a[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&go(c)!==Lt){const h=new Kt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[go(c)]=h}return a}(n,e,r,new Kt(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>rv(n,e,r))}(n,t,r)){const h=new Kt(n.segments,function(n,e,t,r,a,c){const h={};for(const y of r)if(rv(n,t,y)&&!a[go(y)]){const E=new Kt([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[go(y)]=E}return Object.assign(Object.assign({},a),h)}(n,e,t,r,n.children,a));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new Kt(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function rv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function KN(n,e,t,r){return!!(go(n)===r||r!==Lt&&rv(e,t,n))&&("**"===n.path||tv(e,n,t).matched)}function ZN(n,e,t){return 0===e.length&&!n.children[t]}class iv{constructor(e){this.segmentGroup=e||null}}class sv{constructor(e){this.urlTree=e}}function ov(n){return new Er.y(e=>e.error(new iv(n)))}function cT(n){return new Er.y(e=>e.error(new sv(n)))}function YN(n){return new Er.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class JN{constructor(e,t,r,a,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=nv(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Lt).pipe((0,Qe.U)(c=>this.createUrlTree(ks(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vl(c=>{if(c instanceof sv)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof iv?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Lt).pipe((0,Qe.U)(a=>this.createUrlTree(ks(a),e.queryParams,e.fragment))).pipe(vl(a=>{throw a instanceof iv?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new Kt([],{[Lt]:e}):e;return new eh(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Qe.U)(c=>new Kt([],c))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const c of Object.keys(r.children))"primary"===c?a.unshift(c):a.push(c);return(0,en.D)(a).pipe(tp(c=>{const h=r.children[c],y=aT(t,c);return this.expandSegmentGroup(e,y,h,c).pipe((0,Qe.U)(E=>({segment:E,outlet:c})))}),gs((c,h)=>(c[h.outlet]=h.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bi((a,c)=>n(a,c,r)):zC.y,q_(1),t?Q0(e):qC(()=>new P_))}())}expandSegment(e,t,r,a,c,h){return(0,en.D)(r).pipe(tp(y=>this.expandSegmentAgainstRoute(e,t,r,y,a,c,h).pipe(vl(D=>{if(D instanceof iv)return(0,ot.of)(null);throw D}))),Jd(y=>!!y),vl((y,E)=>{if(y instanceof P_||"EmptyError"===y.name){if(ZN(t,a,c))return(0,ot.of)(new Kt([],{}));throw new iv(t)}throw y}))}expandSegmentAgainstRoute(e,t,r,a,c,h,y){return KN(a,t,c,h)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,c,h):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h):ov(t):ov(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cT(c):this.lineralizeSegments(r,c).pipe((0,li.zg)(h=>{const y=new Kt(h,{});return this.expandSegment(e,y,t,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){const{matched:y,consumedSegments:E,lastChild:D,positionalParamSegments:N}=tv(t,a,c);if(!y)return ov(t);const M=this.applyRedirectCommands(E,a.redirectTo,N);return a.redirectTo.startsWith("/")?cT(M):this.lineralizeSegments(a,M).pipe((0,li.zg)($=>this.expandSegment(e,t,r,$.concat(c.slice(D)),h,!1)))}matchSegmentAgainstRoute(e,t,r,a,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ot.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Qe.U)($=>(r._loadedConfig=$,new Kt(a,{})))):(0,ot.of)(new Kt(a,{}));const{matched:h,consumedSegments:y,lastChild:E}=tv(t,r,a);if(!h)return ov(t);const D=a.slice(E);return this.getChildConfig(e,r,a).pipe((0,li.zg)(M=>{const $=M.module,K=M.routes,{segmentGroup:ie,slicedSegments:xe}=nv(t,y,D,K),Fe=new Kt(ie.segments,ie.children);if(0===xe.length&&Fe.hasChildren())return this.expandChildren($,K,Fe).pipe((0,Qe.U)(Nt=>new Kt(y,Nt)));if(0===K.length&&0===xe.length)return(0,ot.of)(new Kt(y,{}));const Mt=go(r)===c;return this.expandSegment($,Fe,K,xe,Mt?Lt:c,!0).pipe((0,Qe.U)(Ut=>new Kt(y.concat(Ut.segments),Ut.children)))}))}getChildConfig(e,t,r){return t.children?(0,ot.of)(new Vb(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ot.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,li.zg)(a=>a?this.configLoader.load(e.injector,t).pipe((0,Qe.U)(c=>(t._loadedConfig=c,c))):function(n){return new Er.y(e=>e.error(am(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):(0,ot.of)(new Vb([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;if(!a||0===a.length)return(0,ot.of)(!0);const c=a.map(h=>{const y=e.get(h);let E;if(function(n){return n&&ih(n.canLoad)}(y))E=y.canLoad(t,r);else{if(!ih(y))throw new Error("Invalid CanLoad guard");E=y(t,r)}return Za(E)});return(0,ot.of)(c).pipe(ym(),(0,xi.b)(h=>{if(!sh(h))return;const y=am(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw y.url=h,y}),(0,Qe.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return(0,ot.of)(r);if(a.numberOfChildren>1||!a.children[Lt])return YN(e.redirectTo);a=a.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const c=this.createSegmentGroup(e,t.root,r,a);return new eh(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Qr(e,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const y=a.substring(1);r[c]=t[y]}else r[c]=a}),r}createSegmentGroup(e,t,r,a){const c=this.createSegments(e,t.segments,r,a);let h={};return Qr(t.children,(y,E)=>{h[E]=this.createSegmentGroup(e,y,r,a)}),new Kt(c,h)}createSegments(e,t,r,a){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,a):this.findOrReturn(c,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function ks(n){const e={};for(const r of Object.keys(n.children)){const c=ks(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class Bb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class av{constructor(e,t){this.component=e,this.route=t}}function lT(n,e,t){const r=n._root;return oh(r,e?e._root:null,t,[r.value])}function vm(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function oh(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=pm(e);return n.children.forEach(h=>{(function(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const E=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!th(n.url,e.url);case"pathParamsOrQueryParamsChange":return!th(n.url,e.url)||!po(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ob(n,e)||!po(n.queryParams,e.queryParams);case"paramsChange":default:return!Ob(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);E?a.canActivateChecks.push(new Bb(r)):(c.data=h.data,c._resolvedData=h._resolvedData),oh(n,e,c.component?y?y.children:null:t,r,a),E&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new av(y.outlet.component,h))}else h&&bl(e,y,a),a.canActivateChecks.push(new Bb(r)),oh(n,null,c.component?y?y.children:null:t,r,a)})(h,c[h.value.outlet],t,r.concat([h.value]),a),delete c[h.value.outlet]}),Qr(c,(h,y)=>bl(h,t.getContext(y),a)),a}function bl(n,e,t){const r=pm(n),a=n.value;Qr(r,(c,h)=>{bl(c,a.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new av(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class Hb{}function gT(n){return new Er.y(e=>e.error(n))}class wm{constructor(e,t,r,a,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=nv(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Lt);if(null===t)return null;const r=new sp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new qu(r,t),c=new xr(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=PN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],y=aT(e,c),E=this.processSegmentGroup(y,h,c);if(null===E)return null;r.push(...E)}const a=dv(r);return function(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}processSegment(e,t,r,a){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,a);if(null!==h)return h}return ZN(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!KN(e,t,r,a))return null;let c,h=[],y=[];if("**"===e.path){const K=r.length>0?W_(r).parameters:{};c=new sp(r,K,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_T(e),go(e),e.component,e,bm(t),yT(t)+r.length,vT(e))}else{const K=tv(t,e,r);if(!K.matched)return null;h=K.consumedSegments,y=r.slice(K.lastChild),c=new sp(h,K.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_T(e),go(e),e.component,e,bm(t),yT(t)+h.length,vT(e))}const E=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:D,slicedSegments:N}=nv(t,h,y,E.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===N.length&&D.hasChildren()){const K=this.processChildren(E,D);return null===K?null:[new qu(c,K)]}if(0===E.length&&0===N.length)return[new qu(c,[])];const M=go(e)===a,$=this.processSegment(E,D,N,M?Lt:a);return null===$?null:[new qu(c,$)]}}function lv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function dv(n){const e=[],t=new Set;for(const r of n){if(!lv(r)){e.push(r);continue}const a=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=dv(r.children);e.push(new qu(r.value,a))}return e.filter(r=>!t.has(r))}function bm(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yT(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function _T(n){return n.data||{}}function vT(n){return n.resolve||{}}function Ya(n){return Zr(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,Qe.U)(()=>e)):(0,ot.of)(e)})}class lR extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const qb=new g.OlP("ROUTES");class bT{constructor(e,t,r,a){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,Qe.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new Vb(LD(h.injector.get(qb,void 0,g.XFs.Self|g.XFs.Optional)).map(Ub),h)}),vl(c=>{throw t._loader$=void 0,c}));return t._loader$=new ep.c(a,()=>new ml.xQ).pipe((0,xD.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,en.D)(this.loader.load(e)):Za(e()).pipe((0,li.zg)(t=>t instanceof g.YKP?(0,ot.of)(t):(0,en.D)(this.compiler.compileModuleAsync(t))))}}class Wb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ap,this.attachRef=null}}class ap{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Wb,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class IT{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function dR(n){throw n}function hR(n,e,t){return e.parse("/")}function CT(n,e){return(0,ot.of)(null)}const Wu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Im={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{class n{constructor(t,r,a,c,h,y,E,D){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=c,this.config=D,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ml.xQ,this.errorHandler=dR,this.malformedUriErrorHandler=hR,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:CT,afterPreactivation:CT},this.urlHandlingStrategy=new IT,this.routeReuseStrategy=new lR,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(g.h0i),this.console=h.get(g.c2e);const $=h.get(g.R0b);this.isNgZoneEnabled=$ instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(D),this.currentUrlTree=new eh(new Kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bT(y,E,K=>this.triggerEvent(new MD(K)),K=>this.triggerEvent(new wN(K))),this.routerState=YD(this.currentUrlTree,this.rootComponentType),this.transitions=new Ka({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Bi(a=>0!==a.id),(0,Qe.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Zr(a=>{let c=!1,h=!1;return(0,ot.of)(a).pipe((0,xi.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Zr(y=>{const E=this.browserUrlTree.toString(),D=!this.navigated||y.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return zu(y.source)&&(this.browserUrlTree=y.extractedUrl),(0,ot.of)(y).pipe(Zr(M=>{const $=this.transitions.getValue();return r.next(new ND(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),$!==this.transitions.getValue()?yl.E:Promise.resolve(M)}),function(n,e,t,r){return Zr(a=>function(n,e,t,r,a){return new JN(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,Qe.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,xi.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function(n,e,t,r,a){return(0,li.zg)(c=>function(n,e,t,r,a="emptyOnly",c="legacy"){try{const h=new wm(n,e,t,r,a,c).recognize();return null===h?gT(new Hb):(0,ot.of)(h)}catch(h){return gT(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,a).pipe((0,Qe.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,xi.b)(M=>{"eager"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(M.urlAfterRedirects,M),this.browserUrlTree=M.urlAfterRedirects);const $=new x1(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next($)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:K,source:ie,restoredState:xe,extras:Fe}=y,Mt=new ND($,this.serializeUrl(K),ie,xe);r.next(Mt);const Vt=YD(K,this.rootComponentType).snapshot;return(0,ot.of)(Object.assign(Object.assign({},y),{targetSnapshot:Vt,urlAfterRedirects:K,extras:Object.assign(Object.assign({},Fe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,this.browserUrlTree=y.urlAfterRedirects,y.resolve(null),yl.E}),Ya(y=>{const{targetSnapshot:E,id:D,extractedUrl:N,rawUrl:M,extras:{skipLocationChange:$,replaceUrl:K}}=y;return this.hooks.beforePreactivation(E,{navigationId:D,appliedUrlTree:N,rawUrlTree:M,skipLocationChange:!!$,replaceUrl:!!K})}),(0,xi.b)(y=>{const E=new Ab(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}),(0,Qe.U)(y=>Object.assign(Object.assign({},y),{guards:lT(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(n,e){return(0,li.zg)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?(0,ot.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,en.D)(n).pipe((0,li.zg)(a=>function(n,e,t,r,a){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,ot.of)(!0);const h=c.map(y=>{const E=vm(y,e,a);let D;if(function(n){return n&&ih(n.canDeactivate)}(E))D=Za(E.canDeactivate(n,e,t,r));else{if(!ih(E))throw new Error("Invalid CanDeactivate guard");D=Za(E(n,e,t,r))}return D.pipe(Jd())});return(0,ot.of)(h).pipe(ym())}(a.component,a.route,t,e,r)),Jd(a=>!0!==a,!0))}(h,r,a,n).pipe((0,li.zg)(y=>y&&function(n){return"boolean"==typeof n}(y)?function(n,e,t,r){return(0,en.D)(e).pipe(tp(a=>zs(function(n,e){return null!==n&&e&&e(new OD(n)),(0,ot.of)(!0)}(a.route.parent,r),function(n,e){return null!==n&&e&&e(new M1(n)),(0,ot.of)(!0)}(a.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>G_(()=>{const y=h.guards.map(E=>{const D=vm(E,h.node,t);let N;if(function(n){return n&&ih(n.canActivateChild)}(D))N=Za(D.canActivateChild(r,n));else{if(!ih(D))throw new Error("Invalid CanActivateChild guard");N=Za(D(r,n))}return N.pipe(Jd())});return(0,ot.of)(y).pipe(ym())}));return(0,ot.of)(c).pipe(ym())}(n,a.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ot.of)(!0);const a=r.map(c=>G_(()=>{const h=vm(c,e,t);let y;if(function(n){return n&&ih(n.canActivate)}(h))y=Za(h.canActivate(e,n));else{if(!ih(h))throw new Error("Invalid CanActivate guard");y=Za(h(e,n))}return y.pipe(Jd())}));return(0,ot.of)(a).pipe(ym())}(n,a.route,t))),Jd(a=>!0!==a,!0))}(r,c,n,e):(0,ot.of)(y)),(0,Qe.U)(y=>Object.assign(Object.assign({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,xi.b)(y=>{if(sh(y.guardsResult)){const D=am(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw D.url=y.guardsResult,D}const E=new vN(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(E)}),Bi(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),Ya(y=>{if(y.guards.canActivateChecks.length)return(0,ot.of)(y).pipe((0,xi.b)(E=>{const D=new N1(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(D)}),Zr(E=>{let D=!1;return(0,ot.of)(E).pipe(function(n,e){return(0,li.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,ot.of)(t);let c=0;return(0,en.D)(a).pipe(tp(h=>function(n,e,t,r){return function(n,e,t,r){const a=Object.keys(n);if(0===a.length)return(0,ot.of)({});const c={};return(0,en.D)(a).pipe((0,li.zg)(h=>function(n,e,t,r){const a=vm(n,e,r);return Za(a.resolve?a.resolve(e,t):a(e,t))}(n[h],e,t,r).pipe((0,xi.b)(y=>{c[h]=y}))),q_(1),(0,li.zg)(()=>Object.keys(c).length===a.length?(0,ot.of)(c):yl.E))}(n._resolve,n,e,r).pipe((0,Qe.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),PN(n,t).resolve),null)))}(h.route,r,n,e)),(0,xi.b)(()=>c++),q_(1),(0,li.zg)(h=>c===a.length?(0,ot.of)(t):yl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,xi.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,xi.b)(E=>{const D=new R1(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(D)}))}),Ya(y=>{const{targetSnapshot:E,id:D,extractedUrl:N,rawUrl:M,extras:{skipLocationChange:$,replaceUrl:K}}=y;return this.hooks.afterPreactivation(E,{navigationId:D,appliedUrlTree:N,rawUrlTree:M,skipLocationChange:!!$,replaceUrl:!!K})}),(0,Qe.U)(y=>{const E=function(n,e,t){const r=J_(n,e._root,t?t._root:void 0);return new ZD(r,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:E})}),(0,xi.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,Qe.U)(r=>(new BN(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,xi.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new T1(n))}(()=>{var y;if(!c&&!h){const E=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,E)):this.cancelNavigationTransition(a,E)}(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===a.id&&(this.currentNavigation=null)}),vl(y=>{if(h=!0,function(n){return n&&n[kD]}(y)){const E=sh(y.url);E||(this.navigated=!0,this.restoreHistory(a,!0));const D=new RD(a.id,this.serializeUrl(a.extractedUrl),y.message);r.next(D),E?setTimeout(()=>{const N=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),M={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zu(a.source)};this.scheduleNavigation(N,"imperative",null,M,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const E=new S1(a.id,this.serializeUrl(a.extractedUrl),y);r.next(E);try{a.resolve(this.errorHandler(y))}catch(D){a.reject(D)}}return yl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:c,urlTree:h}=r,y={replaceUrl:!0};if(c){const E=Object.assign({},c);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(y.state=E)}this.scheduleNavigation(h,a,c,y)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const a=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!a||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){oT(t),this.config=t.map(Ub),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:c,fragment:h,queryParamsHandling:y,preserveFragment:E}=r,D=a||this.routerState.root,N=E?this.currentUrlTree.fragment:h;let M=null;switch(y){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=c||null}return null!==M&&(M=this.removeEmptyProps(M)),function(n,e,t,r,a){if(0===t.length)return Pb(e.root,e.root,e,r,a);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new nT(!0,0,n);let e=0,t=!1;const r=n.reduce((a,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const y={};return Qr(c.outlets,(E,D)=>{y[D]="string"==typeof E?E.split("/"):E}),[...a,{outlets:y}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===h?(c.split("/").forEach((y,E)=>{0==E&&"."===y||(0==E&&""===y?t=!0:".."===y?e++:""!=y&&a.push(y))}),a):[...a,c]},[]);return new nT(t,e,r)}(t);if(c.toRoot())return Pb(e.root,new Kt([],{}),e,r,a);const h=function(n,e,t){if(n.isAbsolute)return new X_(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new X_(c,c===e.root,0)}const r=op(n.commands[0])?0:1;return function(n,e,t){let r=n,a=e,c=t;for(;c>a;){if(c-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new X_(r,!1,a-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),y=h.processChildren?Fb(h.segmentGroup,h.index,c.commands):rT(h.segmentGroup,h.index,c.commands);return Pb(h.segmentGroup,y,e,r,a)}(D,this.currentUrlTree,t,M,null!=N?N:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=sh(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},Wu):!1===r?Object.assign({},Im):r,sh(t))return jD(this.currentUrlTree,t,a);const c=this.parseUrl(t);return jD(this.currentUrlTree,c,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const c=t[a];return null!=c&&(r[a]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new wl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,c,h){var y,E;if(this.disposed)return Promise.resolve(!1);const D=this.getTransition(),N=zu(r)&&D&&!zu(D.source),K=(this.lastSuccessfulId===D.id||this.currentNavigation?D.rawUrl:D.urlAfterRedirects).toString()===t.toString();if(N&&K)return Promise.resolve(!0);let ie,xe,Fe;h?(ie=h.resolve,xe=h.reject,Fe=h.promise):Fe=new Promise((Ut,Nt)=>{ie=Ut,xe=Nt});const Mt=++this.navigationId;let Vt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Vt=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Vt=0,this.setTransition({id:Mt,targetPageId:Vt,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:ie,reject:xe,promise:Fe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Fe.catch(Ut=>Promise.reject(Ut))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(t,r=!1){var a,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new RD(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.DyG),g.LFG(Nb),g.LFG(ap),g.LFG(at),g.LFG(g.zs3),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(void 0))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function zu(n){return"imperative"!==n}let Cm=(()=>{class n{constructor(t,r,a){this.router=t,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new ml.xQ,this.subscription=t.events.subscribe(c=>{c instanceof wl&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,a,c,h){if(0!==t||r||a||c||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const y={skipLocationChange:up(this.skipLocationChange),replaceUrl:up(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:up(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Nr),g.Y36(ip),g.Y36(fe))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&(g.Ikx("href",r.href,g.LSH),g.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[g.TTD]}),n})();function up(n){return""===n||!!n}let fv=(()=>{class n{constructor(t,r,a,c,h){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.name=c||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,E=new AT(t,y,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ap),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class AT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ip?this.route:e===ap?this.childContexts:this.parent.get(e,t)}}class pv{}class ST{preload(e,t){return(0,ot.of)(null)}}let Kb=(()=>{class n{constructor(t,r,a,c,h){this.router=t,this.injector=c,this.preloadingStrategy=h,this.loader=new bT(r,a,D=>t.triggerEvent(new MD(D)),D=>t.triggerEvent(new wN(D)))}setUpPreloading(){this.subscription=this.router.events.pipe(Bi(t=>t instanceof wl),tp(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;a.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(t,c)):c.children&&a.push(this.processRoutes(t,c.children));return(0,en.D)(a).pipe((0,Ws.J)(),(0,Qe.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ot.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,li.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Nr),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(pv))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ku=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ND?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof PD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new PD(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Nr),g.LFG(uu),g.LFG(void 0))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ah=new g.OlP("ROUTER_CONFIGURATION"),NT=new g.OlP("ROUTER_FORROOT_GUARD"),q1=[at,{provide:Nb,useClass:AN},{provide:Nr,useFactory:function(n,e,t,r,a,c,h,y={},E,D){const N=new Nr(null,n,e,t,r,a,c,LD(h));return E&&(N.urlHandlingStrategy=E),D&&(N.routeReuseStrategy=D),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(y,N),y.enableTracing&&N.events.subscribe(M=>{var $,K;null===($=console.group)||void 0===$||$.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(K=console.groupEnd)||void 0===K||K.call(console)}),N},deps:[Nb,ap,at,g.zs3,g.v3s,g.Sil,qb,ah,[class{},new g.FiY],[class{},new g.FiY]]},ap,{provide:ip,useFactory:function(n){return n.routerState.root},deps:[Nr]},{provide:g.v3s,useClass:g.EAV},Kb,ST,class{preload(e,t){return t().pipe(vl(()=>(0,ot.of)(null)))}},{provide:ah,useValue:{enableTracing:!1}}];function W1(){return new g.PXZ("Router",Nr)}let pR=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[q1,yR(t),{provide:NT,useFactory:z1,deps:[[Nr,new g.FiY,new g.tp0]]},{provide:ah,useValue:r||{}},{provide:fe,useFactory:mR,deps:[le,[new g.tBr(Ne),new g.FiY],ah]},{provide:Ku,useFactory:gR,deps:[Nr,uu,ah]},{provide:pv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ST},{provide:g.PXZ,multi:!0,useFactory:W1},[RT,{provide:g.ip1,multi:!0,useFactory:Y1,deps:[RT]},{provide:vR,useFactory:Q1,deps:[RT]},{provide:g.tb,multi:!0,useExisting:vR}]]}}static forChild(t){return{ngModule:n,providers:[yR(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(NT,8),g.LFG(Nr,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function gR(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ku(n,e,t)}function mR(n,e,t={}){return t.useHash?new He(n,e):new De(n,e)}function z1(n){return"guarded"}function yR(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:qb,multi:!0,useValue:n}]}let RT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ml.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(y=>r=y),c=this.injector.get(Nr),h=this.injector.get(ah);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,ot.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(ah),a=this.injector.get(Kb),c=this.injector.get(Ku),h=this.injector.get(Nr),y=this.injector.get(g.z2F);t===y.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),a.setUpPreloading(),c.init(),h.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Y1(n){return n.appInitializer.bind(n)}function Q1(n){return n.bootstrapListener.bind(n)}const vR=new g.OlP("Router Initializer");var o=k(1555);function l(n,e){return new Er.y(t=>{const r=n.length;if(0===r)return void t.complete();const a=new Array(r);let c=0,h=0;for(let y=0;y<r;y++){const E=(0,en.D)(n[y]);let D=!1;t.add(E.subscribe({next:N=>{D||(D=!0,h++),a[y]=N},error:N=>t.error(N),complete:()=>{c++,(c===r||!D)&&(h===r&&t.next(e?e.reduce((N,M,$)=>(N[M]=a[$],N),{}):a),t.complete())}}))}})}let d=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),m=(()=>{class n extends d{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const v=new g.OlP("NgValueAccessor"),S={provide:v,useExisting:(0,g.Gpc)(()=>B),multi:!0},P=new g.OlP("CompositionEventMode");let B=(()=>{class n extends d{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(P,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[g._Bn([S]),g.qOj]}),n})();const Z=new g.OlP("NgValidators"),Te=new g.OlP("NgAsyncValidators");function gv(n){return null!=n}function mv(n){const e=(0,g.QGY)(n)?(0,en.D)(n):n;return(0,g.CqO)(e),e}function yv(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function _v(n,e){return e.map(t=>t(n))}function J1(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function wR(n){return null!=n?function(n){if(!n)return null;const e=n.filter(gv);return 0==e.length?null:function(t){return yv(_v(t,e))}}(J1(n)):null}function bR(n){return null!=n?function(n){if(!n)return null;const e=n.filter(gv);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Tb.k)(e))return l(e,null);if((0,o.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return l(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return l(n=1===n.length&&(0,Tb.k)(n[0])?n[0]:n,null).pipe((0,Qe.U)(t=>e(...t)))}return l(n,null)}(_v(t,e).map(mv)).pipe((0,Qe.U)(yv))}}(J1(n)):null}function tO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nO(n){return n._rawValidators}function rO(n){return n._rawAsyncValidators}function ER(n){return n?Array.isArray(n)?n:[n]:[]}function MT(n,e){return Array.isArray(n)?n.includes(e):n===e}function iO(n,e){const t=ER(e);return ER(n).forEach(a=>{MT(t,a)||t.push(a)}),t}function sO(n,e){return ER(e).filter(t=>!MT(n,t))}let oO=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=wR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=bR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n}),n})(),Ls=(()=>{class n extends oO{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();class lp extends oO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class aO{constructor(e){this._cd=e}is(e){var t,r,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===a?void 0:a[e])}}let IR=(()=>{class n extends aO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(lp,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),CR=(()=>{class n extends aO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ls,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function Zb(n,e){AR(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&uO(n,e)})}(n,e),function(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&uO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function kT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),LT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function FT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function AR(n,e){const t=nO(n);null!==e.validator?n.setValidators(tO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=rO(n);null!==e.asyncValidator?n.setAsyncValidators(tO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();FT(e._rawValidators,a),FT(e._rawAsyncValidators,a)}function LT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const a=nO(n);if(Array.isArray(a)&&a.length>0){const c=a.filter(h=>h!==e.validator);c.length!==a.length&&(t=!0,n.setValidators(c))}}if(null!==e.asyncValidator){const a=rO(n);if(Array.isArray(a)&&a.length>0){const c=a.filter(h=>h!==e.asyncValidator);c.length!==a.length&&(t=!0,n.setAsyncValidators(c))}}}const r=()=>{};return FT(e._rawValidators,r),FT(e._rawAsyncValidators,r),t}function uO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Yb="VALID",UT="INVALID",vv="PENDING",Qb="DISABLED";function NR(n){return(MR(n)?n.validators:n)||null}function dO(n){return Array.isArray(n)?wR(n):n||null}function RR(n,e){return(MR(e)?e.asyncValidators:n)||null}function hO(n){return Array.isArray(n)?bR(n):n||null}function MR(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class OR{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=dO(this._rawValidators),this._composedAsyncValidatorFn=hO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yb}get invalid(){return this.status===UT}get pending(){return this.status==vv}get disabled(){return this.status===Qb}get enabled(){return this.status!==Qb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=dO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=hO(e)}addValidators(e){this.setValidators(iO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sO(e,this._rawAsyncValidators))}hasValidator(e){return MT(this._rawValidators,e)}hasAsyncValidator(e){return MT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qb,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yb,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yb||this.status===vv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qb:Yb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vv,this._hasOwnPendingAsyncValidator=!0;const t=mv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(a=>{r=r instanceof Jb?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof nk&&r.at(a)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Qb:this.errors?UT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vv)?vv:this._anyControlsHaveStatus(UT)?UT:Yb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){MR(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class mo extends OR{constructor(e=null,t,r){super(NR(t),RR(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Jb extends OR{constructor(e,t,r){super(NR(t),RR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof mo?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((a,c)=>{r=t(r,a,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class nk extends OR{constructor(e,t,r){super(NR(t),RR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof mo?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let kR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),_O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const FR=new g.OlP("NgModelWithFormControlWarning"),dk={provide:Ls,useExisting:(0,g.Gpc)(()=>eE)};let eE=(()=>{class n extends Ls{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(LT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Zb(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){kT(t.control||null,t,!1),VT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,a=this.form.get(t.path);r!==a&&(kT(r||null,t),a instanceof mo&&(Zb(a,t),t.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){AR(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return LT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){AR(this.form,this),this._oldForm&&LT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Z,10),g.Y36(Te,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([dk]),g.qOj,g.TTD]}),n})();const pk={provide:lp,useExisting:(0,g.Gpc)(()=>BT)};let BT=(()=>{class n extends lp{constructor(t,r,a,c,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=function(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(c=>{c.constructor===B?t=c:function(n){return Object.getPrototypeOf(n.constructor)===m}(c)?r=c:a=c}),a||r||t||null}(0,c)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ls,13),g.Y36(Z,10),g.Y36(Te,10),g.Y36(v,10),g.Y36(FR,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([pk]),g.qOj,g.TTD]}),n._ngModelWarningSentOnce=!1,n})(),PO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[_O]]}),n})(),xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[PO]}),n})(),Nk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:FR,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[PO]}),n})();class yo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yo.UNAUTHENTICATED=new yo(null),yo.GOOGLE_CREDENTIALS=new yo("google-credentials-uid"),yo.FIRST_PARTY=new yo("first-party-uid"),yo.MOCK_USER=new yo("mock-user");let wv="9.8.0";const Dm=new Ei.Yd("@firebase/firestore");function Tm(n,...e){if(Dm.logLevel<=Ei.in.DEBUG){const t=e.map($R);Dm.debug(`Firestore (${wv}): ${n}`,...t)}}function jT(n,...e){if(Dm.logLevel<=Ei.in.ERROR){const t=e.map($R);Dm.error(`Firestore (${wv}): ${n}`,...t)}}function $R(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function di(n="Unexpected state"){const e=`FIRESTORE (${wv}) INTERNAL ASSERTION FAILED: `+n;throw jT(e),new Error(e)}function _o(n,e){n||di()}function tE(n,e){return n}const bv="unknown",ct="invalid-argument",$T="unauthenticated",dh="failed-precondition",WR="unimplemented";class Ye extends mt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class HO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ok{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yo.UNAUTHENTICATED))}shutdown(){}}class kk{constructor(e){this.auth=null,e.onInit(t=>{this.auth=t})}getToken(){return this.auth?this.auth.getToken().then(e=>e?(_o("string"==typeof e.accessToken),new HO(e.accessToken,new yo(this.auth.getUid()))):null):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}}class Fk{constructor(e,t,r){this.type="FirstParty",this.user=yo.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Lk{constructor(e,t,r){this.t=e,this.i=t,this.o=r}getToken(){return Promise.resolve(new Fk(this.t,this.i,this.o))}start(e,t){e.enqueueRetryable(()=>t(yo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uk{constructor(e){this.u=e,this.appCheck=null,e.onInit(t=>{this.appCheck=t})}getToken(){return this.appCheck?this.appCheck.getToken().then(e=>e?(_o("string"==typeof e.token),new Vk(e.token)):null):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}}class Bk{constructor(e,t,r,a,c,h,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.useFetchStreams=E}}class Ev{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ev("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ev&&e.projectId===this.projectId&&e.database===this.database}}class nE{constructor(e,t,r){void 0===t?t=0:t>e.length&&di(),void 0===r?r=e.length-t:r>e.length-t&&di(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rr extends nE{construct(e,t,r){return new Rr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ye(ct,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Rr(t)}static emptyPath(){return new Rr([])}}const jk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ja extends nE{construct(e,t,r){return new Ja(e,t,r)}static isValidIdentifier(e){return jk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ja.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ja(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new Ye(ct,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ye(ct,"Path has trailing escape character: "+e);const E=e[a+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Ye(ct,"Path has invalid escape sequence: "+e);r+=E,a+=2}else"`"===y?(h=!h,a++):"."!==y||h?(r+=y,a++):(c(),a++)}if(c(),h)throw new Ye(ct,"Unterminated ` in path: "+e);return new Ja(t)}static emptyPath(){return new Ja([])}}class Xr{constructor(e){this.path=e}static fromPath(e){return new Xr(Rr.fromString(e))}static fromName(e){return new Xr(Rr.fromString(e).popFirst(5))}static empty(){return new Xr(Rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xr(new Rr(e.slice()))}}function KR(n,e,t){if(!t)throw new Ye(ct,`Function ${n}() cannot be called with an empty ${e}.`)}function GO(n){if(!Xr.isDocumentKey(n))throw new Ye(ct,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qO(n){if(Xr.isDocumentKey(n))throw new Ye(ct,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":di()}function Zu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ye(ct,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=HT(n);throw new Ye(ct,`Expected type '${e.name}', but it was: ${t}`)}}return n}function GT(n){return 0===n&&1/n==-1/0}const $k={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};var KO,tn;function ZO(n){if(void 0===n)return jT("RPC_ERROR","HTTP error has no status"),bv;switch(n){case 200:return"ok";case 400:return dh;case 401:return $T;case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 416:return"out-of-range";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return bv;case 501:return WR;case 503:return"unavailable";case 504:return"deadline-exceeded";default:return n>=200&&n<300?"ok":n>=400&&n<500?dh:n>=500&&n<600?"internal":bv}}(tn=KO||(KO={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class Hk extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.h=(e.ssl?"https":"http")+"://"+e.host,this.l="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}m(e,t,r,a,c){const h=this.p(e,t);Tm("RestConnection","Sending: ",h,r);const y={};return this.g(y,a,c),this.v(e,h,y,r).then(E=>(Tm("RestConnection","Received: ",E),E),E=>{throw function(n,...e){if(Dm.logLevel<=Ei.in.WARN){const t=e.map($R);Dm.warn(`Firestore (${wv}): ${n}`,...t)}}("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}T(e,t,r,a,c){return this.m(e,t,r,a,c)}g(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}p(e,t){return`${this.h}/v1/${t}:${$k[e]}`}}{constructor(e,t){super(e),this.A=t}I(e,t){throw new Error("Not supported by FetchConnection")}v(e,t,r,a){var c=this;return(0,pe.Z)(function*(){const h=JSON.stringify(a);let y;try{y=yield c.A(t,{method:"POST",headers:r,body:h})}catch(E){throw new Ye(ZO(E.status),"Request failed with error: "+E.statusText)}if(!y.ok)throw new Ye(ZO(y.status),"Request failed with error: "+y.statusText);return y.json()})()}}function Gk(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class qk{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=Gk(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function Ni(n,e){return n<e?-1:n>e?1:0}function ZR(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}class aa{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ye(ct,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ye(ct,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ye(ct,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(ct,"Timestamp seconds out of range: "+e)}static now(){return aa.fromMillis(Date.now())}static fromDate(e){return aa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new aa(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ni(this.nanoseconds,e.nanoseconds):Ni(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xa{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xa(e)}static min(){return new Xa(new aa(0,0))}static max(){return new Xa(new aa(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function YO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rE(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}class qT{constructor(e){this.fields=e,e.sort(Ja.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ZR(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new hh(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new hh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ni(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hh.EMPTY_BYTE_STRING=new hh("");const Wk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Am(n){if(_o(!!n),"string"==typeof n){let e=0;const t=Wk.exec(n);if(_o(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hi(n.seconds),nanos:hi(n.nanos)}}function hi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function iE(n){return"string"==typeof n?hh.fromBase64String(n):hh.fromUint8Array(n)}function YR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function QO(n){const e=n.mapValue.fields.__previous_value__;return YR(e)?QO(e):e}function sE(n){const e=Am(n.mapValue.fields.__local_write_time__.timestampValue);return new aa(e.seconds,e.nanos)}function Sm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YR(n)?4:"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue?9007199254740991:10:di()}function Iv(n,e){if(n===e)return!0;const t=Sm(n);if(t!==Sm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sE(n).isEqual(sE(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Am(r.timestampValue),h=Am(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,iE(n.bytesValue).isEqual(iE(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return hi(r.geoPointValue.latitude)===hi(a.geoPointValue.latitude)&&hi(r.geoPointValue.longitude)===hi(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return hi(r.integerValue)===hi(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=hi(r.doubleValue),h=hi(a.doubleValue);return c===h?GT(c)===GT(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return ZR(n.arrayValue.values||[],e.arrayValue.values||[],Iv);case 10:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(YO(c)!==YO(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===h[y]||!Iv(c[y],h[y])))return!1;return!0}(n,e);default:return di()}var a}function eP(n){return!!n&&"nullValue"in n}function tP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function QR(n){return!!n&&"mapValue"in n}function aE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rE(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=aE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=aE(n.arrayValue.values[t]);return e}return Object.assign({},n)}class ua{constructor(e){this.value=e}static empty(){return new ua({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!QR(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=aE(t)}setAll(e){let t=Ja.emptyPath(),r={},a=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const E=this.getFieldsMap(t);this.applyChanges(E,r,a),r={},a=[],t=y.popLast()}h?r[y.lastSegment()]=aE(h):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());QR(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Iv(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];QR(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){rE(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new ua(aE(this.value))}}class El{constructor(e,t,r,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new El(e,0,Xa.min(),Xa.min(),ua.empty(),0)}static newFoundDocument(e,t,r){return new El(e,1,t,Xa.min(),r,0)}static newNoDocument(e,t){return new El(e,2,t,Xa.min(),ua.empty(),0)}static newUnknownDocument(e,t){return new El(e,3,t,Xa.min(),ua.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ua.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ua.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof El&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new El(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zk{constructor(e,t=null,r=[],a=[],c=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=y,this.P=null}}function nP(n,e=null,t=[],r=[],a=null,c=null,h=null){return new zk(n,e,t,r,a,c,h)}class ZT{constructor(e,t){this.position=e,this.inclusive=t}}class uE{constructor(e,t="asc"){this.field=e,this.dir=t}}class xm{constructor(e,t=null,r=[],a=[],c=null,h="F",y=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=y,this.endAt=E,this.$=null,this.S=null}}function tM(n){const e=tE(n);if(null===e.$){e.$=[];const t=function(n){for(const e of n.filters)if(e.N())return e.field;return null}(e),r=function(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.$.push(new uE(t)),e.$.push(new uE(Ja.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.$.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.$.push(new uE(Ja.keyField(),c))}}}return e.$}function nM(n){const e=tE(n);if(!e.S)if("F"===e.limitType)e.S=nP(e.path,e.collectionGroup,tM(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of tM(e))t.push(new uE(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new ZT(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new ZT(e.startAt.position,e.startAt.inclusive):null;e.S=nP(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.S}class YT{constructor(){this._=void 0}}class aP extends YT{}class uP extends YT{constructor(e){super(),this.elements=e}}class cP extends YT{constructor(e){super(),this.elements=e}}class lP extends YT{constructor(e,t){super(),this.q=e,this.O=t}}class Vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vs}static exists(e){return new Vs(void 0,e)}static updateTime(e){return new Vs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}class JT{}class dP extends JT{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}}class rM extends JT{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}}class XT extends JT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class hP extends JT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}const rF={asc:"ASCENDING",desc:"DESCENDING"},iF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sF{constructor(e,t){this.databaseId=e,this.F=t}}function iM(n,e){return n.F?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oF(n,e){return n.F?e.toBase64():e.toUint8Array()}function aF(n,e){return iM(n,e.toTimestamp())}function sM(n){return _o(!!n),Xa.fromTimestamp(function(e){const t=Am(e);return new aa(t.seconds,t.nanos)}(n))}function oM(n,e){return(t=n,new Rr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function eA(n,e){return oM(n.databaseId,e.path)}function aM(n,e){const t=function(a){const c=Rr.fromString(a);return _o(mP(c)),c}(e);if(t.get(1)!==n.databaseId.projectId)throw new Ye(ct,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ye(ct,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xr((_o((r=t).length>4&&"documents"===r.get(4)),r.popFirst(5)));var r}function fP(n,e){return oM(n.databaseId,e)}function pP(n){return new Rr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gP(n,e,t){return{name:eA(n,e),fields:t.value.mapValue.fields}}function cF(n,e){let t;if(e instanceof dP)t={update:gP(n,e.key,e.value)};else if(e instanceof XT)t={delete:eA(n,e.key)};else if(e instanceof rM)t={update:gP(n,e.key,e.data),updateMask:fF(e.fieldMask)};else{if(!(e instanceof hP))return di();t={verify:eA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof aP)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof uP)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof cP)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof lP)return{fieldPath:c.field.canonicalString(),increment:h.O};throw di()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:aF(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:di()),t;var a}function lF(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=fP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=fP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(E){if(0===E.length)return;const D=E.map(N=>function(M){if("=="===M.op){if(tP(M.value))return{unaryFilter:{field:Cv(M.field),op:"IS_NAN"}};if(eP(M.value))return{unaryFilter:{field:Cv(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(tP(M.value))return{unaryFilter:{field:Cv(M.field),op:"IS_NOT_NAN"}};if(eP(M.value))return{unaryFilter:{field:Cv(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cv(M.field),op:hF(M.op),value:M.value}}}(N));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(E){if(0!==E.length)return E.map(D=>{return{field:Cv((N=D).field),direction:dF(N.dir)};var N})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(D=e.limit,n.F||function(n){return null==n}(D)?D:{value:D});var D,y,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function dF(n){return rF[n]}function hF(n){return iF[n]}function Cv(n){return{fieldPath:n.canonicalString()}}function fF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function uM(n){return new sF(n,!0)}class pF extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.K=r,this.q=a,this.J=!1}X(){if(this.J)throw new Ye(dh,"The client has already been terminated.")}m(e,t,r){return this.X(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.K.m(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===$T&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ye(bv,a.toString())})}T(e,t,r){return this.X(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.K.T(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===$T&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ye(bv,a.toString())})}terminate(){this.J=!0}}function cM(){return(cM=(0,pe.Z)(function*(n,e){const t=tE(n),r=pP(t.q)+"/documents",a={writes:e.map(c=>cF(t.q,c))};yield t.m("Commit",r,a)})).apply(this,arguments)}function dM(){return(dM=(0,pe.Z)(function*(n,e){const t=tE(n),r=lF(t.q,nM(e));return(yield t.T("RunQuery",r.parent,{structuredQuery:r.structuredQuery})).filter(a=>!!a.document).map(a=>function(c,h,y){const E=aM(c,h.name),D=sM(h.updateTime),N=new ua({mapValue:{fields:h.fields}});return El.newFoundDocument(E,D,N)}(t.q,a.document))})).apply(this,arguments)}const cE=new Map;function dp(n){if(n._terminated)throw new Ye(dh,"The client has already been terminated.");if(!cE.has(n)){Tm("ComponentProvider","Initializing Datastore");const c=(e=n._databaseId,t=n.app.options.appId||"",r=n._persistenceKey,a=n._freezeSettings(),E=new Bk(e,t,r,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams),new Hk(E,fetch.bind(null))),h=uM(n._databaseId),y=function(E,D,N,M){return new pF(E,D,N,M)}(n._authCredentials,n._appCheckCredentials,c,h);cE.set(n,y)}var E,e,t,r,a;return cE.get(n)}class vP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ye(ct,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ye(ct,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(r,a,c,h){if(!0===a&&!0===h)throw new Ye(ct,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hp{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vP({}),this._settingsFrozen=!1,e instanceof Ev?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ye(ct,'"projectId" not provided in firebase.initializeApp.');return new Ev(a.options.projectId)}(e))}get app(){if(!this._app)throw new Ye(dh,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ye(dh,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ok;switch(t.type){case"gapi":const r=t.client;return _o(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Lk(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ye(ct,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cE.get(e);t&&(Tm("ComponentProvider","Removing Datastore"),cE.delete(e),t.terminate())}(this),Promise.resolve()}}function tA(n=(0,Ir.getApp)()){return(0,Ir._getProvider)(n,"firestore/lite").getImmediate()}class Ri{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ri(this.firestore,e,this._key)}}class eu{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new eu(this.firestore,e,this._query)}}class Yu extends eu{constructor(e,t,r){super(e,t,new xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ri(this.firestore,null,new Xr(e))}withConverter(e){return new Yu(this.firestore,e,this._path)}}function nA(n,e,...t){if(n=(0,mt.m9)(n),KR("collection","path",e),n instanceof hp){const r=Rr.fromString(e,...t);return qO(r),new Yu(n,null,r)}{if(!(n instanceof Ri||n instanceof Yu))throw new Ye(ct,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rr.fromString(e,...t));return qO(r),new Yu(n.firestore,null,r)}}class Nm{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ye(ct,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ja(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tv(hh.fromBase64String(e))}catch(t){throw new Ye(ct,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tv(hh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wP{constructor(e){this._methodName=e}}class hM{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ye(ct,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ye(ct,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ni(this._lat,e._lat)||Ni(this._long,e._long)}}const _F=/^__.*__$/;class vF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new rM(e,this.data,this.fieldMask,t,this.fieldTransforms):new dP(e,this.data,t,this.fieldTransforms)}}function EP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw di()}}class rA{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.q=r,this.ignoreUndefinedProperties=a,void 0===c&&this.Z(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get tt(){return this.settings.tt}et(e){return new rA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.q,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}nt(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.et({path:r,rt:!1});return a.st(e),a}it(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.et({path:r,rt:!1});return a.Z(),a}ot(e){return this.et({path:void 0,rt:!0})}ut(e){return sA(e,this.settings.methodName,this.settings.ct||!1,this.path,this.settings.at)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Z(){if(this.path)for(let e=0;e<this.path.length;e++)this.st(this.path.get(e))}st(e){if(0===e.length)throw this.ut("Document fields must not be empty");if(EP(this.tt)&&_F.test(e))throw this.ut('Document fields cannot begin and end with "__"')}}class wF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.q=r||uM(e)}ht(e,t,r,a=!1){return new rA({tt:e,methodName:t,at:r,path:Ja.emptyPath(),rt:!1,ct:a},this.databaseId,this.q,this.ignoreUndefinedProperties)}}function Mm(n,e){if(TP(n=(0,mt.m9)(n)))return mM("Unsupported field value:",e,n),DP(n,e);if(n instanceof wP)return function(t,r){if(!EP(r.tt))throw r.ut(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ut(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.rt&&4!==e.tt)throw e.ut("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const h of t){let y=Mm(h,r.ot(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,mt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return function(n,e){return"number"==typeof(t=e)&&Number.isInteger(t)&&!GT(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER?function(t){return{integerValue:""+t}}(e):function(t,r){if(t.F){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:GT(r)?"-0":r}}(n,e);var t}(r.q,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=aa.fromDate(t);return{timestampValue:iM(r.q,a)}}if(t instanceof aa){const a=new aa(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:iM(r.q,a)}}if(t instanceof hM)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tv)return{bytesValue:oF(r.q,t._byteString)};if(t instanceof Ri){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r.ut(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:oM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ut(`Unsupported field value: ${HT(t)}`)}(n,e)}function DP(n,e){const t={};return function(r){for(const a in r)if(Object.prototype.hasOwnProperty.call(r,a))return!1;return!0}(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rE(n,(r,a)=>{const c=Mm(a,e.nt(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function TP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof aa||n instanceof hM||n instanceof Tv||n instanceof Ri||n instanceof wP)}function mM(n,e,t){if(!TP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=HT(t);throw e.ut("an object"===r?n+" a custom object":n+" "+r)}var r}function yM(n,e,t){if((e=(0,mt.m9)(e))instanceof Nm)return e._internalPath;if("string"==typeof e)return _M(n,e);throw sA("Field path arguments must be of type string or ",n,!1,void 0,t)}const CF=new RegExp("[~\\*/\\[\\]]");function _M(n,e,t){if(e.search(CF)>=0)throw sA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nm(...e.split("."))._internalPath}catch(r){throw sA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sA(n,e,t,r,a){const c=r&&!r.isEmpty(),h=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let E="";return(c||h)&&(E+=" (found",c&&(E+=` in field ${r}`),h&&(E+=` in document ${a}`),E+=")"),new Ye(ct,y+n+E)}function AP(n,e){return n.some(t=>t.isEqual(e))}class SP extends class{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ri(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(function(n,e){return"string"==typeof e?_M(n,e):e instanceof Nm?e._internalPath:e._delegate._internalPath}("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}{data(){return super.data()}}class vM{constructor(e,t){this._docs=t,this.query=e}get docs(){return[...this._docs]}get size(){return this.docs.length}get empty(){return 0===this.docs.length}forEach(e,t){this._docs.forEach(e,t)}}class bM extends class{convertValue(e,t="none"){switch(Sm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(iE(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw di()}}convertObject(e,t){const r={};return rE(e.fields,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new hM(hi(e.latitude),hi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=QO(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sE(e));default:return null}}convertTimestamp(e){const t=Am(e);return new aa(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rr.fromString(e);_o(mP(r));const a=new Ev(r.get(1),r.get(3)),c=new Xr(r.popFirst(5));return a.isEqual(t)||jT(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ri(this.firestore,null,t)}}function FP(n){!function(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Ye(WR,"limitToLast() queries require specifying at least one orderBy() clause")}((n=Zu(n,eu))._query);const e=dp(n.firestore),t=new bM(n.firestore);return function(n,e){return dM.apply(this,arguments)}(e,n._query).then(r=>{const a=r.map(c=>new SP(n.firestore,t,c.key,c,n.converter));return"L"===n._query.limitType&&a.reverse(),new vM(n,a)})}function LP(n,e){const t=function(n,e,...t){if(n=(0,mt.m9)(n),1===arguments.length&&(e=qk.R()),KR("doc","path",e),n instanceof hp){const r=Rr.fromString(e,...t);return GO(r),new Ri(n,null,new Xr(r))}{if(!(n instanceof Ri||n instanceof Yu))throw new Ye(ct,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rr.fromString(e,...t));return GO(r),new Ri(n.firestore,n instanceof Yu?n.converter:null,new Xr(r))}}(n=Zu(n,Yu)),r=function(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e),a=function(n,e,t,r,a,c={}){const h=n.ht(c.merge||c.mergeFields?2:0,e,t,a);mM("Data must be an object, but it was:",h,r);const y=DP(r,h);let E,D;if(c.merge)E=new qT(h.fieldMask),D=h.fieldTransforms;else if(c.mergeFields){const N=[];for(const M of c.mergeFields){const $=yM(e,M,t);if(!h.contains($))throw new Ye(ct,`Field '${$}' is specified in your field mask but missing from your input data.`);AP(N,$)||N.push($)}E=new qT(N),D=h.fieldTransforms.filter(M=>E.covers(M.field))}else E=null,D=h.fieldTransforms;return new vF(new ua(y),E,D)}(function(n){const e=n._freezeSettings(),t=uM(n._databaseId);return new wF(n._databaseId,!!e.ignoreUndefinedProperties,t)}(n.firestore),"addDoc",t._key,r,null!==t.converter,{});return function(n,e){return cM.apply(this,arguments)}(dp(n.firestore),[a.toMutation(t._key,Vs.exists(!1))]).then(()=>t)}(function(n){wv=n})(`${Ir.SDK_VERSION}_lite`),(0,Ir._registerComponent)(new bi.wA("firestore/lite",(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=new hp(t,new kk(n.getProvider("auth-internal")),new Uk(n.getProvider("app-check-internal")));return e&&r._setSettings(e),r},"PUBLIC")),(0,Ir.registerVersion)("firestore-lite","3.4.9",""),(0,Ir.registerVersion)("firestore-lite","3.4.9","esm2017");const CM_firebase={apiKey:"AIzaSyCPaS1R8M4tV9pV4BpldqOp642WMnD_SXM",authDomain:"madhoktyres-4a1f7.firebaseapp.com",projectId:"madhoktyres-4a1f7",storageBucket:"madhoktyres-4a1f7.appspot.com",messagingSenderId:"851326770987",appId:"1:851326770987:web:079d4da1caa3fc56ba2f6e",measurementId:"G-3ZQS0BP641"};let VP=(()=>{class n{constructor(){this.app=(0,Ir.initializeApp)(CM_firebase),console.log("Db - Firebase Initialized")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PF(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",4),g.TgZ(1,"form",5),g.NdJ("ngSubmit",function(){return g.CHM(t),g.oxw().addTyreToFirebase()}),g.TgZ(2,"label",6),g._uU(3,"Name of Tyre"),g.qZA(),g._UZ(4,"input",7),g._UZ(5,"br"),g.TgZ(6,"label",8),g._uU(7,"Brand of Tyre"),g.qZA(),g._UZ(8,"input",9),g._UZ(9,"br"),g.TgZ(10,"label",10),g._uU(11,"Rate of Tyre"),g.qZA(),g._UZ(12,"input",11),g._UZ(13,"br"),g.TgZ(14,"label",12),g._uU(15,"Qty of Tyre"),g.qZA(),g._UZ(16,"input",13),g._UZ(17,"br"),g.TgZ(18,"label",14),g._uU(19,"Size of Tyre"),g.qZA(),g._UZ(20,"input",15),g._UZ(21,"br"),g.TgZ(22,"button",16),g._uU(23,"Add Tyre"),g.qZA(),g.qZA(),g.qZA()}if(2&n){const t=g.oxw();g.xp6(1),g.Q6J("formGroup",t.DesignForm)}}const kF=function(n,e){return{id:n,size:e}};function FF(n,e){if(1&n&&(g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"button",20),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"td"),g.TgZ(5,"a",21),g._uU(6,"List of Tyres"),g.qZA(),g.qZA(),g.qZA()),2&n){const t=e.$implicit;g.xp6(3),g.Oqu(t.size),g.xp6(2),g.Q6J("queryParams",g.WLB(2,kF,t.uid,t.size))}}function LF(n,e){if(1&n&&(g.TgZ(0,"div",0),g.TgZ(1,"h3"),g._uU(2,"List of Tyres"),g.qZA(),g.TgZ(3,"table",17),g.TgZ(4,"thead"),g.TgZ(5,"tr"),g.TgZ(6,"th",18),g._uU(7,"Size"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(8,"tbody"),g.YNc(9,FF,7,5,"tr",19),g.qZA(),g.qZA(),g.qZA()),2&n){const t=g.oxw();g.xp6(9),g.Q6J("ngForOf",t.tyreList)}}function UF(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",4),g.TgZ(1,"form",5),g.NdJ("ngSubmit",function(){return g.CHM(t),g.oxw().addDesignToFirebase()}),g.TgZ(2,"label",6),g._uU(3,"Name of Alloy"),g.qZA(),g._UZ(4,"input",7),g._UZ(5,"br"),g.TgZ(6,"label",8),g._uU(7,"Brand of Alloy"),g.qZA(),g._UZ(8,"input",9),g._UZ(9,"br"),g.TgZ(10,"label",10),g._uU(11,"Rate of Alloy"),g.qZA(),g._UZ(12,"input",11),g._UZ(13,"br"),g.TgZ(14,"label",12),g._uU(15,"Qty of Alloy"),g.qZA(),g._UZ(16,"input",13),g._UZ(17,"br"),g.TgZ(18,"label",14),g._uU(19,"Size of Alloy"),g.qZA(),g._UZ(20,"input",15),g._UZ(21,"br"),g.TgZ(22,"button",16),g._uU(23,"Add Alloy"),g.qZA(),g.qZA(),g.qZA()}if(2&n){const t=g.oxw();g.xp6(1),g.Q6J("formGroup",t.DesignForm)}}function BF(n,e){if(1&n&&(g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"button",20),g._uU(3),g.qZA(),g.qZA(),g.qZA()),2&n){const t=e.$implicit;g.xp6(3),g.Oqu(t.size)}}function jF(n,e){if(1&n&&(g.TgZ(0,"div",0),g.TgZ(1,"h3"),g._uU(2,"List of Alloys"),g.qZA(),g.TgZ(3,"table",17),g.TgZ(4,"thead"),g.TgZ(5,"tr"),g.TgZ(6,"th",18),g._uU(7,"Size"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(8,"tbody"),g.YNc(9,BF,4,1,"tr",19),g.qZA(),g.qZA(),g.qZA()),2&n){const t=g.oxw();g.xp6(9),g.Q6J("ngForOf",t.alloyList)}}const $F=[{path:"tyres",component:(()=>{class n{constructor(t,r){this.db=t,this.route=r,this.addView=!1,this.text="Add Tyre",this.updateMode=!1,this.DesignForm=new Jb({Name:new mo(""),Brand:new mo(""),Rate:new mo(""),Quantity:new mo(""),Size:new mo("")}),this.action="",this.fetchTyreSizes()}ngOnInit(){this.route.queryParams.subscribe(t=>{if(this.action=t.action,"update"==this.action){this.addView=!0,this.updateMode=!0,this.text="Update Tyre";const r=sessionStorage.getItem("restaurant");this.tyreData=JSON.parse(r),this.tyreData.patchValue({name:this.tyreData.Name,email:this.tyreData.Size})}else console.log("Do Nothing or Handle the Case")})}fetchTyreSizes(){var t=this;return(0,pe.Z)(function*(){const a=nA(tA(t.db.app),"TyreSizes"),c=yield FP(a);t.tyreList=c.docs.map(h=>h.data())})()}addTyreToFirebase(){console.log(this.DesignForm.value);const t=this.DesignForm.value;console.log("dataToSave is: "+t),LP(nA(tA(this.db.app),"TyreSizes/"+this.DesignForm.value.Size+"/Tyres"),t),console.log("Tyre Added"),this.DesignForm.reset()}changeView(){this.addView=!this.addView,this.text=this.addView?"View Tyres":"Add Tyres"}saveDataInSession(t){console.log(t),sessionStorage.setItem("dishes",JSON.stringify(t)),console.log("Alloy Saved in Session Storage")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(VP),g.Y36(ip))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-add-tyre"]],decls:5,vars:3,consts:[[1,"content"],[1,"btn","btn-dark",3,"click"],["class","mb-3 content",4,"ngIf"],["class","content",4,"ngIf"],[1,"mb-3","content"],[3,"formGroup","ngSubmit"],["for","Name",1,"form-label"],["type","text","id","Name","placeholder","Enter name of tyre","formControlName","Name",1,"form-control"],["for","Brand",1,"form-label"],["type","text","id","Brand","placeholder","Enter brand of tyre","formControlName","Brand",1,"form-control"],["for","Rate",1,"form-label"],["type","text","id","Rate","placeholder","Enter rate of tyre","formControlName","Rate",1,"form-control"],["for","Quantity",1,"form-label"],["type","text","id","Quantity","placeholder","Enter quantity of tyre","formControlName","Quantity",1,"form-control"],["for","Size",1,"form-label"],["type","text","id","Size","placeholder","Enter size of tyre","formControlName","Size",1,"form-control"],["type","submit",1,"btn","btn-dark"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-dark"],["routerLink","/tyreSize",3,"queryParams"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"button",1),g.NdJ("click",function(){return r.changeView()}),g._uU(2),g.qZA(),g.qZA(),g.YNc(3,PF,24,1,"div",2),g.YNc(4,LF,10,1,"div",3)),2&t&&(g.xp6(2),g.Oqu(r.text),g.xp6(1),g.Q6J("ngIf",r.addView),g.xp6(1),g.Q6J("ngIf",!r.addView))},directives:[wr,kR,CR,eE,B,IR,BT,kr,Cm],styles:[""]}),n})()},{path:"alloys",component:(()=>{class n{constructor(t){this.db=t,this.addView=!1,this.text="Add Alloy",this.updateMode=!1,this.DesignForm=new Jb({Name:new mo(""),Brand:new mo(""),Rate:new mo(""),Quantity:new mo(""),Size:new mo("")}),this.fetchAlloySizes()}ngOnInit(){}fetchAlloySizes(){var t=this;return(0,pe.Z)(function*(){const a=nA(tA(t.db.app),"Alloys"),c=yield FP(a);t.alloyList=c.docs.map(h=>h.data())})()}addDesignToFirebase(){console.log(this.DesignForm.value);const t=this.DesignForm.value;console.log("dataToSave is: "+t),LP(nA(tA(this.db.app),"Alloys/"+this.DesignForm.value.Size+"/Alloys"),t),console.log("Alloy Added"),this.DesignForm.reset()}changeView(){this.addView=!this.addView,this.text=this.addView?"View Alloys":"Add Alloys"}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(VP))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-add-alloys"]],decls:5,vars:3,consts:[[1,"content"],[1,"btn","btn-dark",3,"click"],["class","mb-3 content",4,"ngIf"],["class","content",4,"ngIf"],[1,"mb-3","content"],[3,"formGroup","ngSubmit"],["for","Name",1,"form-label"],["type","text","id","Name","placeholder","Enter name of alloy","formControlName","Name",1,"form-control"],["for","Brand",1,"form-label"],["type","text","id","Brand","placeholder","Enter brand of alloy","formControlName","Brand",1,"form-control"],["for","Rate",1,"form-label"],["type","text","id","Rate","placeholder","Enter rate of alloy","formControlName","Rate",1,"form-control"],["for","Quantity",1,"form-label"],["type","text","id","Quantity","placeholder","Enter quantity of alloy","formControlName","Quantity",1,"form-control"],["for","Size",1,"form-label"],["type","text","id","Size","placeholder","Enter size of alloy","formControlName","Size",1,"form-control"],["type","submit",1,"btn","btn-dark"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-dark"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"button",1),g.NdJ("click",function(){return r.changeView()}),g._uU(2),g.qZA(),g.qZA(),g.YNc(3,UF,24,1,"div",2),g.YNc(4,jF,10,1,"div",3)),2&t&&(g.xp6(2),g.Oqu(r.text),g.xp6(1),g.Q6J("ngIf",r.addView),g.xp6(1),g.Q6J("ngIf",!r.addView))},directives:[wr,kR,CR,eE,B,IR,BT,kr],styles:[""]}),n})()},{path:"tyreSize",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-tyres"]],decls:2,vars:0,template:function(t,r){1&t&&(g.TgZ(0,"p"),g._uU(1,"tyres works!"),g.qZA())},styles:[""]}),n})()}];let HF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[pR.forRoot($F)],pR]}),n})(),GF=(()=>{class n{constructor(){this.title="Madhok Backend App"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:9,vars:0,consts:[[1,""],["routerLink","/tyres"],["routerLink","/alloys"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0),g.TgZ(1,"ul"),g.TgZ(2,"li"),g.TgZ(3,"a",1),g._uU(4,"Add/View Tyres"),g.qZA(),g.qZA(),g.TgZ(5,"li"),g.TgZ(6,"a",2),g._uU(7,"Add/View Alloys"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(8,"router-outlet"))},directives:[Cm,fv],styles:["ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#000}li[_ngcontent-%COMP%]{float:left}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-align:center;color:#fff;padding:12px 18px;text-decoration:none}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:gray}"]}),n})(),qF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[GF]}),n.\u0275inj=g.cJS({providers:[],imports:[[Ta,HF,Ur.hO.initializeApp(CM_firebase),v1,Nk,xk]]}),n})();(0,g.G48)(),Vl().bootstrapModule(qF).catch(n=>console.error(n))},3394:(We,ye,k)=>{"use strict";k.d(ye,{Z:()=>be});var g=k(3854),ee=k(3910),F=k(8026),ce=k(5422);class se{constructor(fe,Ae){this._delegate=fe,this.firebase=Ae,(0,F._addComponent)(fe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(fe,Ae=F._DEFAULT_ENTRY_NAME){var Ne;this._delegate.checkDestroyed();const De=this._delegate.container.getProvider(fe);return!De.isInitialized()&&"EXPLICIT"===(null===(Ne=De.getComponent())||void 0===Ne?void 0:Ne.instantiationMode)&&De.initialize(),De.getImmediate({identifier:Ae})}_removeServiceInstance(fe,Ae=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(Ae)}_addComponent(fe){(0,F._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,F._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function ne(){const ge=function(ge){const fe={},Ae={__esModule:!0,initializeApp:function(wt,Pe={}){const Oe=F.initializeApp(wt,Pe);if((0,g.r3)(fe,Oe.name))return fe[Oe.name];const Ve=new ge(Oe,Ae);return fe[Oe.name]=Ve,Ve},app:De,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(wt){const Pe=wt.name,Oe=Pe.replace("-compat","");if(F._registerComponent(wt)&&"PUBLIC"===wt.type){const Ve=(et=De())=>{if("function"!=typeof et[Oe])throw ve.create("invalid-app-argument",{appName:Pe});return et[Oe]()};void 0!==wt.serviceProps&&(0,g.ZB)(Ve,wt.serviceProps),Ae[Oe]=Ve,ge.prototype[Oe]=function(...et){return this._getService.bind(this,Pe).apply(this,wt.multipleInstances?et:[])}}return"PUBLIC"===wt.type?Ae[Oe]:null},removeApp:function(wt){delete fe[wt]},useAsService:function(wt,Pe){return"serverAuth"===Pe?null:Pe},modularAPIs:F}};function De(wt){if(!(0,g.r3)(fe,wt=wt||F._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:wt});return fe[wt]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function(){return Object.keys(fe).map(wt=>fe[wt])}}),De.App=ge,Ae}(se);return ge.INTERNAL=Object.assign(Object.assign({},ge.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function(Ae){(0,g.ZB)(ge,Ae)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),ge}(),V=new ce.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ge=self.firebase.SDK_VERSION;ge&&ge.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=L;(0,F.registerVersion)("@firebase/app-compat","0.1.26",undefined)},8026:(We,ye,k)=>{"use strict";k.r(ye),k.d(ye,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>qi,_DEFAULT_ENTRY_NAME:()=>Mi,_addComponent:()=>Gi,_addOrOverwriteComponent:()=>vo,_apps:()=>dr,_clearComponents:()=>la,_components:()=>Oi,_getProvider:()=>Ht,_registerComponent:()=>pn,_removeServiceInstance:()=>yr,deleteApp:()=>hr,getApp:()=>Mr,getApps:()=>Se,initializeApp:()=>qn,onLog:()=>cn,registerVersion:()=>un,setLogLevel:()=>wo});var g=k(8239),ee=k(3910),F=k(5422),ce=k(3854),se=k(5384);class oe{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(me=>{if(function(G){const X=G.getComponent();return"VERSION"===(null==X?void 0:X.type)}(me)){const ze=me.getImmediate();return`${ze.library}/${ze.version}`}return null}).filter(me=>me).join(" ")}}const le="@firebase/app",L=new F.Yd("@firebase/app"),Mi="[DEFAULT]",ca={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dr=new Map,Oi=new Map;function Gi(G,X){try{G.container.addComponent(X)}catch(me){L.debug(`Component ${X.name} failed to register with FirebaseApp ${G.name}`,me)}}function vo(G,X){G.container.addOrOverwriteComponent(X)}function pn(G){const X=G.name;if(Oi.has(X))return L.debug(`There were multiple attempts to register component ${X}.`),!1;Oi.set(X,G);for(const me of dr.values())Gi(me,G);return!0}function Ht(G,X){const me=G.container.getProvider("heartbeat").getImmediate({optional:!0});return me&&me.triggerHeartbeat(),G.container.getProvider(X)}function yr(G,X,me=Mi){Ht(G,X).clearInstance(me)}function la(){Oi.clear()}const gt=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Rn{constructor(X,me,ze){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},me),this._name=me.name,this._automaticDataCollectionEnabled=me.automaticDataCollectionEnabled,this._container=ze,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw gt.create("app-deleted",{appName:this._name})}}const qi="9.8.2";function qn(G,X={}){"object"!=typeof X&&(X={name:X});const me=Object.assign({name:Mi,automaticDataCollectionEnabled:!1},X),ze=me.name;if("string"!=typeof ze||!ze)throw gt.create("bad-app-name",{appName:String(ze)});const ft=dr.get(ze);if(ft){if((0,ce.vZ)(G,ft.options)&&(0,ce.vZ)(me,ft.config))return ft;throw gt.create("duplicate-app",{appName:ze})}const Ct=new ee.H0(ze);for(const St of Oi.values())Ct.addComponent(St);const nn=new Rn(G,me,Ct);return dr.set(ze,nn),nn}function Mr(G=Mi){const X=dr.get(G);if(!X)throw gt.create("no-app",{appName:G});return X}function Se(){return Array.from(dr.values())}function hr(G){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(G){const X=G.name;dr.has(X)&&(dr.delete(X),yield Promise.all(G.container.getProviders().map(me=>me.delete())),G.isDeleted=!0)})).apply(this,arguments)}function un(G,X,me){var ze;let ft=null!==(ze=ca[G])&&void 0!==ze?ze:G;me&&(ft+=`-${me}`);const Ct=ft.match(/\s|\//),nn=X.match(/\s|\//);if(Ct||nn){const St=[`Unable to register library "${ft}" with version "${X}":`];return Ct&&St.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),Ct&&nn&&St.push("and"),nn&&St.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void L.warn(St.join(" "))}pn(new ee.wA(`${ft}-version`,()=>({library:ft,version:X}),"VERSION"))}function cn(G,X){if(null!==G&&"function"!=typeof G)throw gt.create("invalid-log-argument");(0,F.Am)(G,X)}function wo(G){(0,F.Ub)(G)}const Or="firebase-heartbeat-store";let ni=null;function pi(){return ni||(ni=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(G,X)=>{switch(X){case 0:G.createObjectStore(Or)}}}).catch(G=>{throw gt.create("storage-open",{originalErrorMessage:G.message})})),ni}function tt(){return(tt=(0,g.Z)(function*(G){try{return(yield pi()).transaction(Or).objectStore(Or).get(Wi(G))}catch(X){throw gt.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function rt(G,X){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(G,X){try{const ze=(yield pi()).transaction(Or,"readwrite");return yield ze.objectStore(Or).put(X,Wi(G)),ze.done}catch(me){throw gt.create("storage-set",{originalErrorMessage:me.message})}})).apply(this,arguments)}function Wi(G){return`${G.name}!${G.options.appId}`}class qt{constructor(X){this.container=X,this._heartbeatsCache=null;const me=this.container.getProvider("app").getImmediate();this._storage=new z(me),this._heartbeatsCachePromise=this._storage.read().then(ze=>(this._heartbeatsCache=ze,ze))}triggerHeartbeat(){var X=this;return(0,g.Z)(function*(){const ze=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=Us();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==ft&&!X._heartbeatsCache.heartbeats.some(Ct=>Ct.date===ft))return X._heartbeatsCache.heartbeats.push({date:ft,agent:ze}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Ct=>{const nn=new Date(Ct.date).valueOf();return Date.now()-nn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,g.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const me=Us(),{heartbeatsToSend:ze,unsentEntries:ft}=function(G,X=1024){const me=[];let ze=G.slice();for(const ft of G){const Ct=me.find(nn=>nn.agent===ft.agent);if(Ct){if(Ct.dates.push(ft.date),H(me)>X){Ct.dates.pop();break}}else if(me.push({agent:ft.agent,dates:[ft.date]}),H(me)>X){me.pop();break}ze=ze.slice(1)}return{heartbeatsToSend:me,unsentEntries:ze}}(X._heartbeatsCache.heartbeats),Ct=(0,ce.L)(JSON.stringify({version:2,heartbeats:ze}));return X._heartbeatsCache.lastSentHeartbeatDate=me,ft.length>0?(X._heartbeatsCache.heartbeats=ft,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Ct})()}}function Us(){return(new Date).toISOString().substring(0,10)}class z{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,g.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function(G){return tt.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var me=this;return(0,g.Z)(function*(){var ze;if(yield me._canUseIndexedDBPromise){const Ct=yield me.read();return rt(me.app,{lastSentHeartbeatDate:null!==(ze=X.lastSentHeartbeatDate)&&void 0!==ze?ze:Ct.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var me=this;return(0,g.Z)(function*(){var ze;if(yield me._canUseIndexedDBPromise){const Ct=yield me.read();return rt(me.app,{lastSentHeartbeatDate:null!==(ze=X.lastSentHeartbeatDate)&&void 0!==ze?ze:Ct.lastSentHeartbeatDate,heartbeats:[...Ct.heartbeats,...X.heartbeats]})}})()}}function H(G){return(0,ce.L)(JSON.stringify({version:2,heartbeats:G})).length}pn(new ee.wA("platform-logger",X=>new oe(X),"PRIVATE")),pn(new ee.wA("heartbeat",X=>new qt(X),"PRIVATE")),un(le,"0.7.25",""),un(le,"0.7.25","esm2017"),un("fire-js","")},3910:(We,ye,k)=>{"use strict";k.d(ye,{wA:()=>F,H0:()=>le});var g=k(8239),ee=k(3854);class F{constructor(L,V,J){this.name=L,this.instanceFactory=V,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const ce="[DEFAULT]";class se{constructor(L,V){this.name=L,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const V=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(V)){const J=new ee.BH;if(this.instancesDeferred.set(V,J),this.isInitialized(V)||this.shouldAutoInitialize())try{const Y=this.getOrInitializeService({instanceIdentifier:V});Y&&J.resolve(Y)}catch(Y){}}return this.instancesDeferred.get(V).promise}getImmediate(L){var V;const J=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),Y=null!==(V=null==L?void 0:L.optional)&&void 0!==V&&V;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Y)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(de){if(Y)return null;throw de}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if("EAGER"===L.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(V){}for(const[V,J]of this.instancesDeferred.entries()){const Y=this.normalizeInstanceIdentifier(V);try{const de=this.getOrInitializeService({instanceIdentifier:Y});J.resolve(de)}catch(de){}}}}clearInstance(L=ce){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,g.Z)(function*(){const V=Array.from(L.instances.values());yield Promise.all([...V.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...V.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=ce){return this.instances.has(L)}getOptions(L=ce){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:V={}}=L,J=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Y=this.getOrInitializeService({instanceIdentifier:J,options:V});for(const[de,be]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(de)&&be.resolve(Y);return Y}onInit(L,V){var J;const Y=this.normalizeInstanceIdentifier(V),de=null!==(J=this.onInitCallbacks.get(Y))&&void 0!==J?J:new Set;de.add(L),this.onInitCallbacks.set(Y,de);const be=this.instances.get(Y);return be&&L(be,Y),()=>{de.delete(L)}}invokeOnInitCallbacks(L,V){const J=this.onInitCallbacks.get(V);if(J)for(const Y of J)try{Y(L,V)}catch(de){}}getOrInitializeService({instanceIdentifier:L,options:V={}}){let J=this.instances.get(L);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ne=L,ne===ce?void 0:ne),options:V}),this.instances.set(L,J),this.instancesOptions.set(L,V),this.invokeOnInitCallbacks(J,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,J)}catch(Y){}var ne;return J||null}normalizeInstanceIdentifier(L=ce){return this.component?this.component.multipleInstances?L:ce:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const V=this.getProvider(L.name);if(V.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);V.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const V=new se(L,this);return this.providers.set(L,V),V}getProviders(){return Array.from(this.providers.values())}}},5422:(We,ye,k)=>{"use strict";k.d(ye,{in:()=>ee,Yd:()=>ve,Ub:()=>le,Am:()=>ne});const g=[];var ee=(()=>{return(L=ee||(ee={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",ee;var L})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,se={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},oe=(L,V,...J)=>{if(V<L.logLevel)return;const Y=(new Date).toISOString(),de=se[V];if(!de)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[de](`[${Y}]  ${L.name}:`,...J)};class ve{constructor(V){this.name=V,this._logLevel=ce,this._logHandler=oe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in ee))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?F[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...V),this._logHandler(this,ee.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...V),this._logHandler(this,ee.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...V),this._logHandler(this,ee.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...V),this._logHandler(this,ee.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...V),this._logHandler(this,ee.ERROR,...V)}}function le(L){g.forEach(V=>{V.setLogLevel(L)})}function ne(L,V){for(const J of g){let Y=null;V&&V.level&&(Y=F[V.level]),J.userLogHandler=null===L?null:(de,be,...ge)=>{const fe=ge.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(Ne){return null}}).filter(Ae=>Ae).join(" ");be>=(null!=Y?Y:de.logLevel)&&L({level:ee[be].toLowerCase(),message:fe,args:ge,type:de.name})}}}},5384:(We,ye,k)=>{"use strict";k.d(ye,{Lj:()=>He,X3:()=>De});var g=k(8239);let F,ce;const ve=new WeakMap,le=new WeakMap,ne=new WeakMap,L=new WeakMap,V=new WeakMap;let de={get(Pe,Oe,Ve){if(Pe instanceof IDBTransaction){if("done"===Oe)return le.get(Pe);if("objectStoreNames"===Oe)return Pe.objectStoreNames||ne.get(Pe);if("store"===Oe)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return Ae(Pe[Oe])},set:(Pe,Oe,Ve)=>(Pe[Oe]=Ve,!0),has:(Pe,Oe)=>Pe instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in Pe};function fe(Pe){return"function"==typeof Pe?function(Pe){return Pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Pe)?function(...Oe){return Pe.apply(Ne(this),Oe),Ae(ve.get(this))}:function(...Oe){return Ae(Pe.apply(Ne(this),Oe))}:function(Oe,...Ve){const et=Pe.call(Ne(this),Oe,...Ve);return ne.set(et,Oe.sort?Oe.sort():[Oe]),Ae(et)}}(Pe):(Pe instanceof IDBTransaction&&function(Pe){if(le.has(Pe))return;const Oe=new Promise((Ve,et)=>{const nt=()=>{Pe.removeEventListener("complete",bt),Pe.removeEventListener("error",Ue),Pe.removeEventListener("abort",Ue)},bt=()=>{Ve(),nt()},Ue=()=>{et(Pe.error||new DOMException("AbortError","AbortError")),nt()};Pe.addEventListener("complete",bt),Pe.addEventListener("error",Ue),Pe.addEventListener("abort",Ue)});le.set(Pe,Oe)}(Pe),((Pe,Oe)=>Oe.some(Ve=>Pe instanceof Ve))(Pe,F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Pe,de):Pe)}function Ae(Pe){if(Pe instanceof IDBRequest)return function(Pe){const Oe=new Promise((Ve,et)=>{const nt=()=>{Pe.removeEventListener("success",bt),Pe.removeEventListener("error",Ue)},bt=()=>{Ve(Ae(Pe.result)),nt()},Ue=()=>{et(Pe.error),nt()};Pe.addEventListener("success",bt),Pe.addEventListener("error",Ue)});return Oe.then(Ve=>{Ve instanceof IDBCursor&&ve.set(Ve,Pe)}).catch(()=>{}),V.set(Oe,Pe),Oe}(Pe);if(L.has(Pe))return L.get(Pe);const Oe=fe(Pe);return Oe!==Pe&&(L.set(Pe,Oe),V.set(Oe,Pe)),Oe}const Ne=Pe=>V.get(Pe);function De(Pe,Oe,{blocked:Ve,upgrade:et,blocking:nt,terminated:bt}={}){const Ue=indexedDB.open(Pe,Oe),Dn=Ae(Ue);return et&&Ue.addEventListener("upgradeneeded",ei=>{et(Ae(Ue.result),ei.oldVersion,ei.newVersion,Ae(Ue.transaction))}),Ve&&Ue.addEventListener("blocked",()=>Ve()),Dn.then(ei=>{bt&&ei.addEventListener("close",()=>bt()),nt&&ei.addEventListener("versionchange",()=>nt())}).catch(()=>{}),Dn}function He(Pe,{blocked:Oe}={}){const Ve=indexedDB.deleteDatabase(Pe);return Oe&&Ve.addEventListener("blocked",()=>Oe()),Ae(Ve).then(()=>{})}const at=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],Ot=new Map;function wt(Pe,Oe){if(!(Pe instanceof IDBDatabase)||Oe in Pe||"string"!=typeof Oe)return;if(Ot.get(Oe))return Ot.get(Oe);const Ve=Oe.replace(/FromIndex$/,""),et=Oe!==Ve,nt=Le.includes(Ve);if(!(Ve in(et?IDBIndex:IDBObjectStore).prototype)||!nt&&!at.includes(Ve))return;const bt=function(){var Ue=(0,g.Z)(function*(Dn,...ei){const fi=this.transaction(Dn,nt?"readwrite":"readonly");let Mi=fi.store;return et&&(Mi=Mi.index(ei.shift())),(yield Promise.all([Mi[Ve](...ei),nt&&fi.done]))[0]});return function(ei){return Ue.apply(this,arguments)}}();return Ot.set(Oe,bt),bt}var Pe;de=$P(jP({},Pe=de),{get:(Oe,Ve,et)=>wt(Oe,Ve)||Pe.get(Oe,Ve,et),has:(Oe,Ve)=>!!wt(Oe,Ve)||Pe.has(Oe,Ve)})},8239:(We,ye,k)=>{"use strict";function g(F,ce,se,oe,ve,le,ne){try{var L=F[le](ne),V=L.value}catch(J){return void se(J)}L.done?ce(V):Promise.resolve(V).then(oe,ve)}function ee(F){return function(){var ce=this,se=arguments;return new Promise(function(oe,ve){var le=F.apply(ce,se);function ne(V){g(le,oe,ve,ne,L,"next",V)}function L(V){g(le,oe,ve,ne,L,"throw",V)}ne(void 0)})}}k.d(ye,{Z:()=>ee})}},We=>{We(We.s=9130)}]);